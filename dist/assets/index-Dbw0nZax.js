function s6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z2={exports:{}},cd={},B2={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Il=Symbol.for("react.element"),o6=Symbol.for("react.portal"),a6=Symbol.for("react.fragment"),l6=Symbol.for("react.strict_mode"),u6=Symbol.for("react.profiler"),c6=Symbol.for("react.provider"),d6=Symbol.for("react.context"),h6=Symbol.for("react.forward_ref"),f6=Symbol.for("react.suspense"),p6=Symbol.for("react.memo"),g6=Symbol.for("react.lazy"),oy=Symbol.iterator;function m6(t){return t===null||typeof t!="object"?null:(t=oy&&t[oy]||t["@@iterator"],typeof t=="function"?t:null)}var G2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V2=Object.assign,$2={};function $o(t,e,n){this.props=t,this.context=e,this.refs=$2,this.updater=n||G2}$o.prototype.isReactComponent={};$o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W2(){}W2.prototype=$o.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=$2,this.updater=n||G2}var Qp=Xp.prototype=new W2;Qp.constructor=Xp;V2(Qp,$o.prototype);Qp.isPureReactComponent=!0;var ay=Array.isArray,H2=Object.prototype.hasOwnProperty,Jp={current:null},K2={key:!0,ref:!0,__self:!0,__source:!0};function q2(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)H2.call(e,r)&&!K2.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Il,type:t,key:s,ref:l,props:i,_owner:Jp.current}}function y6(t,e){return{$$typeof:Il,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Il}function v6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ly=/\/+/g;function Uf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v6(""+t.key):e.toString(36)}function fc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Il:case o6:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Uf(l,0):r,ay(i)?(n="",t!=null&&(n=t.replace(ly,"$&/")+"/"),fc(i,e,n,"",function(h){return h})):i!=null&&(Zp(i)&&(i=y6(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(ly,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",ay(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+Uf(s,u);l+=fc(s,e,n,c,i)}else if(c=m6(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+Uf(s,u++),l+=fc(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Du(t,e,n){if(t==null)return t;var r=[],i=0;return fc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},pc={transition:null},w6={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:pc,ReactCurrentOwner:Jp};function Y2(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Du,forEach:function(t,e,n){Du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Du(t,function(){e++}),e},toArray:function(t){return Du(t,function(e){return e})||[]},only:function(t){if(!Zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=$o;Pe.Fragment=a6;Pe.Profiler=u6;Pe.PureComponent=Xp;Pe.StrictMode=l6;Pe.Suspense=f6;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w6;Pe.act=Y2;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V2({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Jp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)H2.call(e,c)&&!K2.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Il,type:t.type,key:i,ref:s,props:r,_owner:l}};Pe.createContext=function(t){return t={$$typeof:d6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:c6,_context:t},t.Consumer=t};Pe.createElement=q2;Pe.createFactory=function(t){var e=q2.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:h6,render:t}};Pe.isValidElement=Zp;Pe.lazy=function(t){return{$$typeof:g6,_payload:{_status:-1,_result:t},_init:_6}};Pe.memo=function(t,e){return{$$typeof:p6,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=pc.transition;pc.transition={};try{t()}finally{pc.transition=e}};Pe.unstable_act=Y2;Pe.useCallback=function(t,e){return rn.current.useCallback(t,e)};Pe.useContext=function(t){return rn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return rn.current.useEffect(t,e)};Pe.useId=function(){return rn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return rn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};Pe.useRef=function(t){return rn.current.useRef(t)};Pe.useState=function(t){return rn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return rn.current.useTransition()};Pe.version="18.3.1";B2.exports=Pe;var W=B2.exports;const Ut=Yp(W),S6=s6({__proto__:null,default:Ut},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6=W,k6=Symbol.for("react.element"),C6=Symbol.for("react.fragment"),b6=Object.prototype.hasOwnProperty,E6=x6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P6={key:!0,ref:!0,__self:!0,__source:!0};function X2(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)b6.call(e,r)&&!P6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k6,type:t,key:s,ref:l,props:i,_owner:E6.current}}cd.Fragment=C6;cd.jsx=X2;cd.jsxs=X2;z2.exports=cd;var P=z2.exports,O0={},Q2={exports:{}},bn={},J2={exports:{}},Z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var $=F.length;F.push(q);e:for(;0<$;){var Q=$-1>>>1,ne=F[Q];if(0<i(ne,q))F[Q]=q,F[$]=ne,$=Q;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],$=F.pop();if($!==q){F[0]=$;e:for(var Q=0,ne=F.length,me=ne>>>1;Q<me;){var Fe=2*(Q+1)-1,Ue=F[Fe],Re=Fe+1,L=F[Re];if(0>i(Ue,$))Re<ne&&0>i(L,Ue)?(F[Q]=L,F[Re]=$,Q=Re):(F[Q]=Ue,F[Fe]=$,Q=Fe);else if(Re<ne&&0>i(L,$))F[Q]=L,F[Re]=$,Q=Re;else break e}}return q}function i(F,q){var $=F.sortIndex-q.sortIndex;return $!==0?$:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],p=1,w=null,y=3,v=!1,_=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(F){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=F)r(h),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(h)}}function k(F){if(b=!1,m(F),!_)if(n(c)!==null)_=!0,te(R);else{var q=n(h);q!==null&&ee(k,q.startTime-F)}}function R(F,q){_=!1,b&&(b=!1,C(A),A=-1),v=!0;var $=y;try{for(m(q),w=n(c);w!==null&&(!(w.expirationTime>q)||F&&!K());){var Q=w.callback;if(typeof Q=="function"){w.callback=null,y=w.priorityLevel;var ne=Q(w.expirationTime<=q);q=t.unstable_now(),typeof ne=="function"?w.callback=ne:w===n(c)&&r(c),m(q)}else r(c);w=n(c)}if(w!==null)var me=!0;else{var Fe=n(h);Fe!==null&&ee(k,Fe.startTime-q),me=!1}return me}finally{w=null,y=$,v=!1}}var N=!1,O=null,A=-1,U=5,I=-1;function K(){return!(t.unstable_now()-I<U)}function M(){if(O!==null){var F=t.unstable_now();I=F;var q=!0;try{q=O(!0,F)}finally{q?V():(N=!1,O=null)}}else N=!1}var V;if(typeof x=="function")V=function(){x(M)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=M,V=function(){Y.postMessage(null)}}else V=function(){E(M,0)};function te(F){O=F,N||(N=!0,V())}function ee(F,q){A=E(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,te(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var $=y;y=q;try{return F()}finally{y=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=y;y=F;try{return q()}finally{y=$}},t.unstable_scheduleCallback=function(F,q,$){var Q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=$+ne,F={id:p++,callback:q,priorityLevel:F,startTime:$,expirationTime:ne,sortIndex:-1},$>Q?(F.sortIndex=$,e(h,F),n(c)===null&&F===n(h)&&(b?(C(A),A=-1):b=!0,ee(k,$-Q))):(F.sortIndex=ne,e(c,F),_||v||(_=!0,te(R))),F},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(F){var q=y;return function(){var $=y;y=q;try{return F.apply(this,arguments)}finally{y=$}}}})(Z2);J2.exports=Z2;var $a=J2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6=W,Cn=$a;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e_=new Set,il={};function Cs(t,e){Lo(t,e),Lo(t+"Capture",e)}function Lo(t,e){for(il[t]=e,t=0;t<e.length;t++)e_.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I0=Object.prototype.hasOwnProperty,R6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uy={},cy={};function N6(t){return I0.call(cy,t)?!0:I0.call(uy,t)?!1:R6.test(t)?cy[t]=!0:(uy[t]=!0,!1)}function A6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O6(t,e,n,r){if(e===null||typeof e>"u"||A6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eg,tg);Bt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eg,tg);Bt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eg,tg);Bt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ng(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O6(e,n,i,r)&&(n=null),r||i===null?N6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=T6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uu=Symbol.for("react.element"),ho=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),n_=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),j0=Symbol.for("react.suspense"),M0=Symbol.for("react.suspense_list"),sg=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),r_=Symbol.for("react.offscreen"),dy=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,zf;function Da(t){if(zf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zf=e&&e[1]||""}return`
`+zf+t}var Bf=!1;function Gf(t,e){if(!t||Bf)return"";Bf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,u=s.length-1;1<=l&&0<=u&&i[l]!==s[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==s[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==s[u]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=u);break}}}finally{Bf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Da(t):""}function I6(t){switch(t.tag){case 5:return Da(t.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 2:case 15:return t=Gf(t.type,!1),t;case 11:return t=Gf(t.type.render,!1),t;case 1:return t=Gf(t.type,!0),t;default:return""}}function F0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fo:return"Fragment";case ho:return"Portal";case L0:return"Profiler";case rg:return"StrictMode";case j0:return"Suspense";case M0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n_:return(t.displayName||"Context")+".Consumer";case t_:return(t._context.displayName||"Context")+".Provider";case ig:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sg:return e=t.displayName||null,e!==null?e:F0(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return F0(t(e))}catch{}}return null}function L6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(e);case 8:return e===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j6(t){var e=i_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zu(t){t._valueTracker||(t._valueTracker=j6(t))}function s_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function D0(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o_(t,e){e=e.checked,e!=null&&ng(t,"checked",e,!1)}function U0(t,e){o_(t,e);var n=Ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?z0(t,e.type,n):e.hasOwnProperty("defaultValue")&&z0(t,e.type,Ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function z0(t,e,n){(e!=="number"||Tc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ua=Array.isArray;function bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ii(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function B0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function py(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Ua(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ii(n)}}function a_(t,e){var n=Ii(e.value),r=Ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bu,u_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M6=["Webkit","ms","Moz","O"];Object.keys(Wa).forEach(function(t){M6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wa[e]=Wa[t]})});function c_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wa.hasOwnProperty(t)&&Wa[t]?(""+e).trim():e+"px"}function d_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=c_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var F6=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V0(t,e){if(e){if(F6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function $0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W0=null;function og(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var H0=null,Eo=null,Po=null;function my(t){if(t=Ml(t)){if(typeof H0!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gd(e),H0(t.stateNode,t.type,e))}}function h_(t){Eo?Po?Po.push(t):Po=[t]:Eo=t}function f_(){if(Eo){var t=Eo,e=Po;if(Po=Eo=null,my(t),e)for(t=0;t<e.length;t++)my(e[t])}}function p_(t,e){return t(e)}function g_(){}var Vf=!1;function m_(t,e,n){if(Vf)return t(e,n);Vf=!0;try{return p_(t,e,n)}finally{Vf=!1,(Eo!==null||Po!==null)&&(g_(),f_())}}function ol(t,e){var n=t.stateNode;if(n===null)return null;var r=gd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var K0=!1;if(Vr)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){K0=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{K0=!1}function D6(t,e,n,r,i,s,l,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ha=!1,Rc=null,Nc=!1,q0=null,U6={onError:function(t){Ha=!0,Rc=t}};function z6(t,e,n,r,i,s,l,u,c){Ha=!1,Rc=null,D6.apply(U6,arguments)}function B6(t,e,n,r,i,s,l,u,c){if(z6.apply(this,arguments),Ha){if(Ha){var h=Rc;Ha=!1,Rc=null}else throw Error(J(198));Nc||(Nc=!0,q0=h)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yy(t){if(bs(t)!==t)throw Error(J(188))}function G6(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yy(i),t;if(s===r)return yy(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=s;break}if(u===r){l=!0,r=i,n=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===n){l=!0,n=s,r=i;break}if(u===r){l=!0,r=s,n=i;break}u=u.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function v_(t){return t=G6(t),t!==null?__(t):null}function __(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=__(t);if(e!==null)return e;t=t.sibling}return null}var w_=Cn.unstable_scheduleCallback,vy=Cn.unstable_cancelCallback,V6=Cn.unstable_shouldYield,$6=Cn.unstable_requestPaint,ft=Cn.unstable_now,W6=Cn.unstable_getCurrentPriorityLevel,ag=Cn.unstable_ImmediatePriority,S_=Cn.unstable_UserBlockingPriority,Ac=Cn.unstable_NormalPriority,H6=Cn.unstable_LowPriority,x_=Cn.unstable_IdlePriority,dd=null,kr=null;function K6(t){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(dd,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:X6,q6=Math.log,Y6=Math.LN2;function X6(t){return t>>>=0,t===0?32:31-(q6(t)/Y6|0)|0}var Gu=64,Vu=4194304;function za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=za(u):(s&=l,s!==0&&(r=za(s)))}else l=n&~i,l!==0?r=za(l):s!==0&&(r=za(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),i=1<<n,r|=t[n],e&=~i;return r}function Q6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-or(s),u=1<<l,c=i[l];c===-1?(!(u&n)||u&r)&&(i[l]=Q6(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function Y0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k_(){var t=Gu;return Gu<<=1,!(Gu&4194240)&&(Gu=64),t}function $f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ll(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function Z6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ze=0;function C_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var b_,ug,E_,P_,T_,X0=!1,$u=[],Ci=null,bi=null,Ei=null,al=new Map,ll=new Map,vi=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _y(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(e.pointerId)}}function Ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ml(e),e!==null&&ug(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tS(t,e,n,r,i){switch(e){case"focusin":return Ci=Ea(Ci,t,e,n,r,i),!0;case"dragenter":return bi=Ea(bi,t,e,n,r,i),!0;case"mouseover":return Ei=Ea(Ei,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return al.set(s,Ea(al.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ll.set(s,Ea(ll.get(s)||null,t,e,n,r,i)),!0}return!1}function R_(t){var e=fs(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=y_(n),e!==null){t.blockedOn=e,T_(t.priority,function(){E_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Q0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);W0=r,n.target.dispatchEvent(r),W0=null}else return e=Ml(n),e!==null&&ug(e),t.blockedOn=n,!1;e.shift()}return!0}function wy(t,e,n){gc(t)&&n.delete(e)}function nS(){X0=!1,Ci!==null&&gc(Ci)&&(Ci=null),bi!==null&&gc(bi)&&(bi=null),Ei!==null&&gc(Ei)&&(Ei=null),al.forEach(wy),ll.forEach(wy)}function Pa(t,e){t.blockedOn===e&&(t.blockedOn=null,X0||(X0=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,nS)))}function ul(t){function e(i){return Pa(i,t)}if(0<$u.length){Pa($u[0],t);for(var n=1;n<$u.length;n++){var r=$u[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ci!==null&&Pa(Ci,t),bi!==null&&Pa(bi,t),Ei!==null&&Pa(Ei,t),al.forEach(e),ll.forEach(e),n=0;n<vi.length;n++)r=vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vi.length&&(n=vi[0],n.blockedOn===null);)R_(n),n.blockedOn===null&&vi.shift()}var To=Kr.ReactCurrentBatchConfig,Ic=!0;function rS(t,e,n,r){var i=ze,s=To.transition;To.transition=null;try{ze=1,cg(t,e,n,r)}finally{ze=i,To.transition=s}}function iS(t,e,n,r){var i=ze,s=To.transition;To.transition=null;try{ze=4,cg(t,e,n,r)}finally{ze=i,To.transition=s}}function cg(t,e,n,r){if(Ic){var i=Q0(t,e,n,r);if(i===null)e0(t,e,r,Lc,n),_y(t,r);else if(tS(i,t,e,n,r))r.stopPropagation();else if(_y(t,r),e&4&&-1<eS.indexOf(t)){for(;i!==null;){var s=Ml(i);if(s!==null&&b_(s),s=Q0(t,e,n,r),s===null&&e0(t,e,r,Lc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else e0(t,e,r,null,n)}}var Lc=null;function Q0(t,e,n,r){if(Lc=null,t=og(r),t=fs(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lc=t,null}function N_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W6()){case ag:return 1;case S_:return 4;case Ac:case H6:return 16;case x_:return 536870912;default:return 16}default:return 16}}var Si=null,dg=null,mc=null;function A_(){if(mc)return mc;var t,e=dg,n=e.length,r,i="value"in Si?Si.value:Si.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return mc=i.slice(t,1<r?1-r:void 0)}function yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wu(){return!0}function Sy(){return!1}function En(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wu:Sy,this.isPropagationStopped=Sy,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),e}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hg=En(Wo),jl=ot({},Wo,{view:0,detail:0}),sS=En(jl),Wf,Hf,Ta,hd=ot({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ta&&(Ta&&t.type==="mousemove"?(Wf=t.screenX-Ta.screenX,Hf=t.screenY-Ta.screenY):Hf=Wf=0,Ta=t),Wf)},movementY:function(t){return"movementY"in t?t.movementY:Hf}}),xy=En(hd),oS=ot({},hd,{dataTransfer:0}),aS=En(oS),lS=ot({},jl,{relatedTarget:0}),Kf=En(lS),uS=ot({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),cS=En(uS),dS=ot({},Wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hS=En(dS),fS=ot({},Wo,{data:0}),ky=En(fS),pS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mS[t])?!!e[t]:!1}function fg(){return yS}var vS=ot({},jl,{key:function(t){if(t.key){var e=pS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fg,charCode:function(t){return t.type==="keypress"?yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_S=En(vS),wS=ot({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=En(wS),SS=ot({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fg}),xS=En(SS),kS=ot({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),CS=En(kS),bS=ot({},hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ES=En(bS),PS=[9,13,27,32],pg=Vr&&"CompositionEvent"in window,Ka=null;Vr&&"documentMode"in document&&(Ka=document.documentMode);var TS=Vr&&"TextEvent"in window&&!Ka,O_=Vr&&(!pg||Ka&&8<Ka&&11>=Ka),by=" ",Ey=!1;function I_(t,e){switch(t){case"keyup":return PS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var po=!1;function RS(t,e){switch(t){case"compositionend":return L_(e);case"keypress":return e.which!==32?null:(Ey=!0,by);case"textInput":return t=e.data,t===by&&Ey?null:t;default:return null}}function NS(t,e){if(po)return t==="compositionend"||!pg&&I_(t,e)?(t=A_(),mc=dg=Si=null,po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O_&&e.locale!=="ko"?null:e.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AS[t.type]:e==="textarea"}function j_(t,e,n,r){h_(r),e=jc(e,"onChange"),0<e.length&&(n=new hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qa=null,cl=null;function OS(t){H_(t,0)}function fd(t){var e=yo(t);if(s_(e))return t}function IS(t,e){if(t==="change")return e}var M_=!1;if(Vr){var qf;if(Vr){var Yf="oninput"in document;if(!Yf){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),Yf=typeof Ty.oninput=="function"}qf=Yf}else qf=!1;M_=qf&&(!document.documentMode||9<document.documentMode)}function Ry(){qa&&(qa.detachEvent("onpropertychange",F_),cl=qa=null)}function F_(t){if(t.propertyName==="value"&&fd(cl)){var e=[];j_(e,cl,t,og(t)),m_(OS,e)}}function LS(t,e,n){t==="focusin"?(Ry(),qa=e,cl=n,qa.attachEvent("onpropertychange",F_)):t==="focusout"&&Ry()}function jS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fd(cl)}function MS(t,e){if(t==="click")return fd(e)}function FS(t,e){if(t==="input"||t==="change")return fd(e)}function DS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:DS;function dl(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!I0.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function D_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U_(){for(var t=window,e=Tc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tc(t.document)}return e}function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function US(t){var e=U_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D_(n.ownerDocument.documentElement,n)){if(r!==null&&gg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ay(n,s);var l=Ay(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zS=Vr&&"documentMode"in document&&11>=document.documentMode,go=null,J0=null,Ya=null,Z0=!1;function Oy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Z0||go==null||go!==Tc(r)||(r=go,"selectionStart"in r&&gg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ya&&dl(Ya,r)||(Ya=r,r=jc(J0,"onSelect"),0<r.length&&(e=new hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=go)))}function Hu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mo={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},Xf={},z_={};Vr&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function pd(t){if(Xf[t])return Xf[t];if(!mo[t])return t;var e=mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in z_)return Xf[t]=e[n];return t}var B_=pd("animationend"),G_=pd("animationiteration"),V_=pd("animationstart"),$_=pd("transitionend"),W_=new Map,Iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){W_.set(t,e),Cs(e,[t])}for(var Qf=0;Qf<Iy.length;Qf++){var Jf=Iy[Qf],BS=Jf.toLowerCase(),GS=Jf[0].toUpperCase()+Jf.slice(1);Mi(BS,"on"+GS)}Mi(B_,"onAnimationEnd");Mi(G_,"onAnimationIteration");Mi(V_,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi($_,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Ly(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,B6(r,e,void 0,t),t.currentTarget=null}function H_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;Ly(i,u,h),s=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;Ly(i,u,h),s=c}}}if(Nc)throw t=q0,Nc=!1,q0=null,t}function Xe(t,e){var n=e[ip];n===void 0&&(n=e[ip]=new Set);var r=t+"__bubble";n.has(r)||(K_(e,t,2,!1),n.add(r))}function Zf(t,e,n){var r=0;e&&(r|=4),K_(n,t,r,e)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function hl(t){if(!t[Ku]){t[Ku]=!0,e_.forEach(function(n){n!=="selectionchange"&&(VS.has(n)||Zf(n,!1,t),Zf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ku]||(e[Ku]=!0,Zf("selectionchange",!1,e))}}function K_(t,e,n,r){switch(N_(e)){case 1:var i=rS;break;case 4:i=iS;break;default:i=cg}n=i.bind(null,e,n,t),i=void 0,!K0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function e0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;u!==null;){if(l=fs(u),l===null)return;if(c=l.tag,c===5||c===6){r=s=l;continue e}u=u.parentNode}}r=r.return}m_(function(){var h=s,p=og(n),w=[];e:{var y=W_.get(t);if(y!==void 0){var v=hg,_=t;switch(t){case"keypress":if(yc(n)===0)break e;case"keydown":case"keyup":v=_S;break;case"focusin":_="focus",v=Kf;break;case"focusout":_="blur",v=Kf;break;case"beforeblur":case"afterblur":v=Kf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=aS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xS;break;case B_:case G_:case V_:v=cS;break;case $_:v=CS;break;case"scroll":v=sS;break;case"wheel":v=ES;break;case"copy":case"cut":case"paste":v=hS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Cy}var b=(e&4)!==0,E=!b&&t==="scroll",C=b?y!==null?y+"Capture":null:y;b=[];for(var x=h,m;x!==null;){m=x;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,C!==null&&(k=ol(x,C),k!=null&&b.push(fl(x,k,m)))),E)break;x=x.return}0<b.length&&(y=new v(y,_,null,n,p),w.push({event:y,listeners:b}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",y&&n!==W0&&(_=n.relatedTarget||n.fromElement)&&(fs(_)||_[$r]))break e;if((v||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=h,_=_?fs(_):null,_!==null&&(E=bs(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=h),v!==_)){if(b=xy,k="onMouseLeave",C="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=Cy,k="onPointerLeave",C="onPointerEnter",x="pointer"),E=v==null?y:yo(v),m=_==null?y:yo(_),y=new b(k,x+"leave",v,n,p),y.target=E,y.relatedTarget=m,k=null,fs(p)===h&&(b=new b(C,x+"enter",_,n,p),b.target=m,b.relatedTarget=E,k=b),E=k,v&&_)t:{for(b=v,C=_,x=0,m=b;m;m=Qs(m))x++;for(m=0,k=C;k;k=Qs(k))m++;for(;0<x-m;)b=Qs(b),x--;for(;0<m-x;)C=Qs(C),m--;for(;x--;){if(b===C||C!==null&&b===C.alternate)break t;b=Qs(b),C=Qs(C)}b=null}else b=null;v!==null&&jy(w,y,v,b,!1),_!==null&&E!==null&&jy(w,E,_,b,!0)}}e:{if(y=h?yo(h):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var R=IS;else if(Py(y))if(M_)R=FS;else{R=jS;var N=LS}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(R=MS);if(R&&(R=R(t,h))){j_(w,R,n,p);break e}N&&N(t,y,h),t==="focusout"&&(N=y._wrapperState)&&N.controlled&&y.type==="number"&&z0(y,"number",y.value)}switch(N=h?yo(h):window,t){case"focusin":(Py(N)||N.contentEditable==="true")&&(go=N,J0=h,Ya=null);break;case"focusout":Ya=J0=go=null;break;case"mousedown":Z0=!0;break;case"contextmenu":case"mouseup":case"dragend":Z0=!1,Oy(w,n,p);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":Oy(w,n,p)}var O;if(pg)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else po?I_(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(O_&&n.locale!=="ko"&&(po||A!=="onCompositionStart"?A==="onCompositionEnd"&&po&&(O=A_()):(Si=p,dg="value"in Si?Si.value:Si.textContent,po=!0)),N=jc(h,A),0<N.length&&(A=new ky(A,t,null,n,p),w.push({event:A,listeners:N}),O?A.data=O:(O=L_(n),O!==null&&(A.data=O)))),(O=TS?RS(t,n):NS(t,n))&&(h=jc(h,"onBeforeInput"),0<h.length&&(p=new ky("onBeforeInput","beforeinput",null,n,p),w.push({event:p,listeners:h}),p.data=O))}H_(w,e)})}function fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ol(t,n),s!=null&&r.unshift(fl(t,s,i)),s=ol(t,e),s!=null&&r.push(fl(t,s,i))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=ol(n,s),c!=null&&l.unshift(fl(n,c,u))):i||(c=ol(n,s),c!=null&&l.push(fl(n,c,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var $S=/\r\n?/g,WS=/\u0000|\uFFFD/g;function My(t){return(typeof t=="string"?t:""+t).replace($S,`
`).replace(WS,"")}function qu(t,e,n){if(e=My(e),My(t)!==e&&n)throw Error(J(425))}function Mc(){}var ep=null,tp=null;function np(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,KS=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(t){return Fy.resolve(null).then(t).catch(qS)}:rp;function qS(t){setTimeout(function(){throw t})}function t0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ul(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ul(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Ho,pl="__reactProps$"+Ho,$r="__reactContainer$"+Ho,ip="__reactEvents$"+Ho,YS="__reactListeners$"+Ho,XS="__reactHandles$"+Ho;function fs(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dy(t);t!==null;){if(n=t[Sr])return n;t=Dy(t)}return e}t=n,n=t.parentNode}return null}function Ml(t){return t=t[Sr]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gd(t){return t[pl]||null}var sp=[],vo=-1;function Fi(t){return{current:t}}function Qe(t){0>vo||(t.current=sp[vo],sp[vo]=null,vo--)}function He(t,e){vo++,sp[vo]=t.current,t.current=e}var Li={},Jt=Fi(Li),pn=Fi(!1),_s=Li;function jo(t,e){var n=t.type.contextTypes;if(!n)return Li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Fc(){Qe(pn),Qe(Jt)}function Uy(t,e,n){if(Jt.current!==Li)throw Error(J(168));He(Jt,e),He(pn,n)}function q_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,L6(t)||"Unknown",i));return ot({},n,r)}function Dc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Li,_s=Jt.current,He(Jt,t),He(pn,pn.current),!0}function zy(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=q_(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,Qe(pn),Qe(Jt),He(Jt,t)):Qe(pn),He(pn,n)}var Dr=null,md=!1,n0=!1;function Y_(t){Dr===null?Dr=[t]:Dr.push(t)}function QS(t){md=!0,Y_(t)}function Di(){if(!n0&&Dr!==null){n0=!0;var t=0,e=ze;try{var n=Dr;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,md=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(t+1)),w_(ag,Di),i}finally{ze=e,n0=!1}}return null}var _o=[],wo=0,Uc=null,zc=0,Fn=[],Dn=0,ws=null,Ur=1,zr="";function ss(t,e){_o[wo++]=zc,_o[wo++]=Uc,Uc=t,zc=e}function X_(t,e,n){Fn[Dn++]=Ur,Fn[Dn++]=zr,Fn[Dn++]=ws,ws=t;var r=Ur;t=zr;var i=32-or(r)-1;r&=~(1<<i),n+=1;var s=32-or(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Ur=1<<32-or(e)+i|n<<i|r,zr=s+t}else Ur=1<<s|n<<i|r,zr=t}function mg(t){t.return!==null&&(ss(t,1),X_(t,1,0))}function yg(t){for(;t===Uc;)Uc=_o[--wo],_o[wo]=null,zc=_o[--wo],_o[wo]=null;for(;t===ws;)ws=Fn[--Dn],Fn[Dn]=null,zr=Fn[--Dn],Fn[Dn]=null,Ur=Fn[--Dn],Fn[Dn]=null}var kn=null,xn=null,et=!1,sr=null;function Q_(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function By(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,xn=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Ur,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,xn=null,!0):!1;default:return!1}}function op(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ap(t){if(et){var e=xn;if(e){var n=e;if(!By(t,e)){if(op(t))throw Error(J(418));e=Pi(n.nextSibling);var r=kn;e&&By(t,e)?Q_(r,n):(t.flags=t.flags&-4097|2,et=!1,kn=t)}}else{if(op(t))throw Error(J(418));t.flags=t.flags&-4097|2,et=!1,kn=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function Yu(t){if(t!==kn)return!1;if(!et)return Gy(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!np(t.type,t.memoizedProps)),e&&(e=xn)){if(op(t))throw J_(),Error(J(418));for(;e;)Q_(t,e),e=Pi(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=kn?Pi(t.stateNode.nextSibling):null;return!0}function J_(){for(var t=xn;t;)t=Pi(t.nextSibling)}function Mo(){xn=kn=null,et=!1}function vg(t){sr===null?sr=[t]:sr.push(t)}var JS=Kr.ReactCurrentBatchConfig;function Ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var u=i.refs;l===null?delete u[s]:u[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Xu(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vy(t){var e=t._init;return e(t._payload)}function Z_(t){function e(C,x){if(t){var m=C.deletions;m===null?(C.deletions=[x],C.flags|=16):m.push(x)}}function n(C,x){if(!t)return null;for(;x!==null;)e(C,x),x=x.sibling;return null}function r(C,x){for(C=new Map;x!==null;)x.key!==null?C.set(x.key,x):C.set(x.index,x),x=x.sibling;return C}function i(C,x){return C=Ai(C,x),C.index=0,C.sibling=null,C}function s(C,x,m){return C.index=m,t?(m=C.alternate,m!==null?(m=m.index,m<x?(C.flags|=2,x):m):(C.flags|=2,x)):(C.flags|=1048576,x)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,x,m,k){return x===null||x.tag!==6?(x=u0(m,C.mode,k),x.return=C,x):(x=i(x,m),x.return=C,x)}function c(C,x,m,k){var R=m.type;return R===fo?p(C,x,m.props.children,k,m.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===gi&&Vy(R)===x.type)?(k=i(x,m.props),k.ref=Ra(C,x,m),k.return=C,k):(k=Cc(m.type,m.key,m.props,null,C.mode,k),k.ref=Ra(C,x,m),k.return=C,k)}function h(C,x,m,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==m.containerInfo||x.stateNode.implementation!==m.implementation?(x=c0(m,C.mode,k),x.return=C,x):(x=i(x,m.children||[]),x.return=C,x)}function p(C,x,m,k,R){return x===null||x.tag!==7?(x=vs(m,C.mode,k,R),x.return=C,x):(x=i(x,m),x.return=C,x)}function w(C,x,m){if(typeof x=="string"&&x!==""||typeof x=="number")return x=u0(""+x,C.mode,m),x.return=C,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uu:return m=Cc(x.type,x.key,x.props,null,C.mode,m),m.ref=Ra(C,null,x),m.return=C,m;case ho:return x=c0(x,C.mode,m),x.return=C,x;case gi:var k=x._init;return w(C,k(x._payload),m)}if(Ua(x)||Ca(x))return x=vs(x,C.mode,m,null),x.return=C,x;Xu(C,x)}return null}function y(C,x,m,k){var R=x!==null?x.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return R!==null?null:u(C,x,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Uu:return m.key===R?c(C,x,m,k):null;case ho:return m.key===R?h(C,x,m,k):null;case gi:return R=m._init,y(C,x,R(m._payload),k)}if(Ua(m)||Ca(m))return R!==null?null:p(C,x,m,k,null);Xu(C,m)}return null}function v(C,x,m,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return C=C.get(m)||null,u(x,C,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Uu:return C=C.get(k.key===null?m:k.key)||null,c(x,C,k,R);case ho:return C=C.get(k.key===null?m:k.key)||null,h(x,C,k,R);case gi:var N=k._init;return v(C,x,m,N(k._payload),R)}if(Ua(k)||Ca(k))return C=C.get(m)||null,p(x,C,k,R,null);Xu(x,k)}return null}function _(C,x,m,k){for(var R=null,N=null,O=x,A=x=0,U=null;O!==null&&A<m.length;A++){O.index>A?(U=O,O=null):U=O.sibling;var I=y(C,O,m[A],k);if(I===null){O===null&&(O=U);break}t&&O&&I.alternate===null&&e(C,O),x=s(I,x,A),N===null?R=I:N.sibling=I,N=I,O=U}if(A===m.length)return n(C,O),et&&ss(C,A),R;if(O===null){for(;A<m.length;A++)O=w(C,m[A],k),O!==null&&(x=s(O,x,A),N===null?R=O:N.sibling=O,N=O);return et&&ss(C,A),R}for(O=r(C,O);A<m.length;A++)U=v(O,C,A,m[A],k),U!==null&&(t&&U.alternate!==null&&O.delete(U.key===null?A:U.key),x=s(U,x,A),N===null?R=U:N.sibling=U,N=U);return t&&O.forEach(function(K){return e(C,K)}),et&&ss(C,A),R}function b(C,x,m,k){var R=Ca(m);if(typeof R!="function")throw Error(J(150));if(m=R.call(m),m==null)throw Error(J(151));for(var N=R=null,O=x,A=x=0,U=null,I=m.next();O!==null&&!I.done;A++,I=m.next()){O.index>A?(U=O,O=null):U=O.sibling;var K=y(C,O,I.value,k);if(K===null){O===null&&(O=U);break}t&&O&&K.alternate===null&&e(C,O),x=s(K,x,A),N===null?R=K:N.sibling=K,N=K,O=U}if(I.done)return n(C,O),et&&ss(C,A),R;if(O===null){for(;!I.done;A++,I=m.next())I=w(C,I.value,k),I!==null&&(x=s(I,x,A),N===null?R=I:N.sibling=I,N=I);return et&&ss(C,A),R}for(O=r(C,O);!I.done;A++,I=m.next())I=v(O,C,A,I.value,k),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?A:I.key),x=s(I,x,A),N===null?R=I:N.sibling=I,N=I);return t&&O.forEach(function(M){return e(C,M)}),et&&ss(C,A),R}function E(C,x,m,k){if(typeof m=="object"&&m!==null&&m.type===fo&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Uu:e:{for(var R=m.key,N=x;N!==null;){if(N.key===R){if(R=m.type,R===fo){if(N.tag===7){n(C,N.sibling),x=i(N,m.props.children),x.return=C,C=x;break e}}else if(N.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===gi&&Vy(R)===N.type){n(C,N.sibling),x=i(N,m.props),x.ref=Ra(C,N,m),x.return=C,C=x;break e}n(C,N);break}else e(C,N);N=N.sibling}m.type===fo?(x=vs(m.props.children,C.mode,k,m.key),x.return=C,C=x):(k=Cc(m.type,m.key,m.props,null,C.mode,k),k.ref=Ra(C,x,m),k.return=C,C=k)}return l(C);case ho:e:{for(N=m.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===m.containerInfo&&x.stateNode.implementation===m.implementation){n(C,x.sibling),x=i(x,m.children||[]),x.return=C,C=x;break e}else{n(C,x);break}else e(C,x);x=x.sibling}x=c0(m,C.mode,k),x.return=C,C=x}return l(C);case gi:return N=m._init,E(C,x,N(m._payload),k)}if(Ua(m))return _(C,x,m,k);if(Ca(m))return b(C,x,m,k);Xu(C,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,x!==null&&x.tag===6?(n(C,x.sibling),x=i(x,m),x.return=C,C=x):(n(C,x),x=u0(m,C.mode,k),x.return=C,C=x),l(C)):n(C,x)}return E}var Fo=Z_(!0),ew=Z_(!1),Bc=Fi(null),Gc=null,So=null,_g=null;function wg(){_g=So=Gc=null}function Sg(t){var e=Bc.current;Qe(Bc),t._currentValue=e}function lp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ro(t,e){Gc=t,_g=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Gn(t){var e=t._currentValue;if(_g!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(Gc===null)throw Error(J(308));So=t,Gc.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var ps=null;function xg(t){ps===null?ps=[t]:ps.push(t)}function tw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mi=!1;function kg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wr(t,n)}return i=r.interleaved,i===null?(e.next=e,xg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wr(t,n)}function vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lg(t,n)}}function $y(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vc(t,e,n,r){var i=t.updateQueue;mi=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,l===null?s=h:l.next=h,l=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==l&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(s!==null){var w=i.baseState;l=0,p=h=c=null,u=s;do{var y=u.lane,v=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=t,b=u;switch(y=e,v=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){w=_.call(v,w,y);break e}w=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,y=typeof _=="function"?_.call(v,w,y):_,y==null)break e;w=ot({},w,y);break e;case 2:mi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else v={eventTime:v,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=v,c=w):p=p.next=v,l|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(c=w),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xs|=l,t.lanes=l,t.memoizedState=w}}function Wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Fl={},Cr=Fi(Fl),gl=Fi(Fl),ml=Fi(Fl);function gs(t){if(t===Fl)throw Error(J(174));return t}function Cg(t,e){switch(He(ml,e),He(gl,t),He(Cr,Fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G0(e,t)}Qe(Cr),He(Cr,e)}function Do(){Qe(Cr),Qe(gl),Qe(ml)}function rw(t){gs(ml.current);var e=gs(Cr.current),n=G0(e,t.type);e!==n&&(He(gl,t),He(Cr,n))}function bg(t){gl.current===t&&(Qe(Cr),Qe(gl))}var it=Fi(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var r0=[];function Eg(){for(var t=0;t<r0.length;t++)r0[t]._workInProgressVersionPrimary=null;r0.length=0}var _c=Kr.ReactCurrentDispatcher,i0=Kr.ReactCurrentBatchConfig,Ss=0,st=null,kt=null,Ot=null,Wc=!1,Xa=!1,yl=0,ZS=0;function Yt(){throw Error(J(321))}function Pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function Tg(t,e,n,r,i,s){if(Ss=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_c.current=t===null||t.memoizedState===null?r8:i8,t=n(r,i),Xa){s=0;do{if(Xa=!1,yl=0,25<=s)throw Error(J(301));s+=1,Ot=kt=null,e.updateQueue=null,_c.current=s8,t=n(r,i)}while(Xa)}if(_c.current=Hc,e=kt!==null&&kt.next!==null,Ss=0,Ot=kt=st=null,Wc=!1,e)throw Error(J(300));return t}function Rg(){var t=yl!==0;return yl=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?st.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Vn(){if(kt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ot===null?st.memoizedState:Ot.next;if(e!==null)Ot=e,kt=t;else{if(t===null)throw Error(J(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?st.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function vl(t,e){return typeof e=="function"?e(t):e}function s0(t){var e=Vn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=l=null,c=null,h=s;do{var p=h.lane;if((Ss&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var w={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=w,l=r):c=c.next=w,st.lanes|=p,xs|=p}h=h.next}while(h!==null&&h!==s);c===null?l=r:c.next=u,ur(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,xs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function o0(t){var e=Vn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);ur(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function iw(){}function sw(t,e){var n=st,r=Vn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,fn=!0),r=r.queue,Ng(lw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,_l(9,aw.bind(null,n,r,i,e),void 0,null),It===null)throw Error(J(349));Ss&30||ow(n,e,i)}return i}function ow(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aw(t,e,n,r){e.value=n,e.getSnapshot=r,uw(e)&&cw(t)}function lw(t,e,n){return n(function(){uw(e)&&cw(t)})}function uw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function cw(t){var e=Wr(t,1);e!==null&&ar(e,t,1,-1)}function Hy(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:t},e.queue=t,t=t.dispatch=n8.bind(null,st,t),[e.memoizedState,t]}function _l(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dw(){return Vn().memoizedState}function wc(t,e,n,r){var i=wr();st.flags|=t,i.memoizedState=_l(1|e,n,void 0,r===void 0?null:r)}function yd(t,e,n,r){var i=Vn();r=r===void 0?null:r;var s=void 0;if(kt!==null){var l=kt.memoizedState;if(s=l.destroy,r!==null&&Pg(r,l.deps)){i.memoizedState=_l(e,n,s,r);return}}st.flags|=t,i.memoizedState=_l(1|e,n,s,r)}function Ky(t,e){return wc(8390656,8,t,e)}function Ng(t,e){return yd(2048,8,t,e)}function hw(t,e){return yd(4,2,t,e)}function fw(t,e){return yd(4,4,t,e)}function pw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gw(t,e,n){return n=n!=null?n.concat([t]):null,yd(4,4,pw.bind(null,e,t),n)}function Ag(){}function mw(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yw(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vw(t,e,n){return Ss&21?(ur(n,e)||(n=k_(),st.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function e8(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=i0.transition;i0.transition={};try{t(!1),e()}finally{ze=n,i0.transition=r}}function _w(){return Vn().memoizedState}function t8(t,e,n){var r=Ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ww(t))Sw(e,n);else if(n=tw(t,e,n,r),n!==null){var i=nn();ar(n,t,r,i),xw(n,e,r)}}function n8(t,e,n){var r=Ni(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ww(t))Sw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,u=s(l,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,l)){var c=e.interleaved;c===null?(i.next=i,xg(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=tw(t,e,i,r),n!==null&&(i=nn(),ar(n,t,r,i),xw(n,e,r))}}function ww(t){var e=t.alternate;return t===st||e!==null&&e===st}function Sw(t,e){Xa=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lg(t,n)}}var Hc={readContext:Gn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},r8={readContext:Gn,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:Ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wc(4194308,4,pw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wc(4194308,4,t,e)},useInsertionEffect:function(t,e){return wc(4,2,t,e)},useMemo:function(t,e){var n=wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=t8.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:Hy,useDebugValue:Ag,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=Hy(!1),e=t[0];return t=e8.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=wr();if(et){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),It===null)throw Error(J(349));Ss&30||ow(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ky(lw.bind(null,r,s,t),[t]),r.flags|=2048,_l(9,aw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wr(),e=It.identifierPrefix;if(et){var n=zr,r=Ur;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},i8={readContext:Gn,useCallback:mw,useContext:Gn,useEffect:Ng,useImperativeHandle:gw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:yw,useReducer:s0,useRef:dw,useState:function(){return s0(vl)},useDebugValue:Ag,useDeferredValue:function(t){var e=Vn();return vw(e,kt.memoizedState,t)},useTransition:function(){var t=s0(vl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:sw,useId:_w,unstable_isNewReconciler:!1},s8={readContext:Gn,useCallback:mw,useContext:Gn,useEffect:Ng,useImperativeHandle:gw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:yw,useReducer:o0,useRef:dw,useState:function(){return o0(vl)},useDebugValue:Ag,useDeferredValue:function(t){var e=Vn();return kt===null?e.memoizedState=t:vw(e,kt.memoizedState,t)},useTransition:function(){var t=o0(vl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:sw,useId:_w,unstable_isNewReconciler:!1};function tr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function up(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vd={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Ni(t),s=Br(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,i),e!==null&&(ar(e,t,i,r),vc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Ni(t),s=Br(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,i),e!==null&&(ar(e,t,i,r),vc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=Ni(t),i=Br(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ti(t,i,r),e!==null&&(ar(e,t,r,n),vc(e,t,r))}};function qy(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!dl(n,r)||!dl(i,s):!0}function kw(t,e,n){var r=!1,i=Li,s=e.contextType;return typeof s=="object"&&s!==null?s=Gn(s):(i=gn(e)?_s:Jt.current,r=e.contextTypes,s=(r=r!=null)?jo(t,i):Li),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Yy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vd.enqueueReplaceState(e,e.state,null)}function cp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gn(s):(s=gn(e)?_s:Jt.current,i.context=jo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(up(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vd.enqueueReplaceState(i,i.state,null),Vc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Uo(t,e){try{var n="",r=e;do n+=I6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function a0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o8=typeof WeakMap=="function"?WeakMap:Map;function Cw(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qc||(qc=!0,Sp=r),dp(t,e)},n}function bw(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dp(t,e),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Xy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=w8.bind(null,t,e,n),e.then(t,t))}function Qy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var a8=Kr.ReactCurrentOwner,fn=!1;function tn(t,e,n,r){e.child=t===null?ew(e,null,n,r):Fo(e,t.child,n,r)}function Zy(t,e,n,r,i){n=n.render;var s=e.ref;return Ro(e,i),r=Tg(t,e,n,r,s,i),n=Rg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(et&&n&&mg(e),e.flags|=1,tn(t,e,r,i),e.child)}function ev(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ug(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ew(t,e,s,r,i)):(t=Cc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(l,r)&&t.ref===e.ref)return Hr(t,e,i)}return e.flags|=1,t=Ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ew(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(dl(s,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,Hr(t,e,i)}return hp(t,e,n,r,i)}function Pw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(ko,wn),wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(ko,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,He(ko,wn),wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,He(ko,wn),wn|=r;return tn(t,e,i,n),e.child}function Tw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hp(t,e,n,r,i){var s=gn(n)?_s:Jt.current;return s=jo(e,s),Ro(e,i),n=Tg(t,e,n,r,s,i),r=Rg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(et&&r&&mg(e),e.flags|=1,tn(t,e,n,i),e.child)}function tv(t,e,n,r,i){if(gn(n)){var s=!0;Dc(e)}else s=!1;if(Ro(e,i),e.stateNode===null)Sc(t,e),kw(e,n,r),cp(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Gn(h):(h=gn(n)?_s:Jt.current,h=jo(e,h));var p=n.getDerivedStateFromProps,w=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Yy(e,l,r,h),mi=!1;var y=e.memoizedState;l.state=y,Vc(e,r,l,i),c=e.memoizedState,u!==r||y!==c||pn.current||mi?(typeof p=="function"&&(up(e,n,p,r),c=e.memoizedState),(u=mi||qy(e,n,u,r,y,c,h))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=h,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,nw(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:tr(e.type,u),l.props=h,w=e.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=gn(n)?_s:Jt.current,c=jo(e,c));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==w||y!==c)&&Yy(e,l,r,c),mi=!1,y=e.memoizedState,l.state=y,Vc(e,r,l,i);var _=e.memoizedState;u!==w||y!==_||pn.current||mi?(typeof v=="function"&&(up(e,n,v,r),_=e.memoizedState),(h=mi||qy(e,n,h,r,y,_,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,_,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,_,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),l.props=r,l.state=_,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fp(t,e,n,r,s,i)}function fp(t,e,n,r,i,s){Tw(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&zy(e,n,!1),Hr(t,e,s);r=e.stateNode,a8.current=e;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Fo(e,t.child,null,s),e.child=Fo(e,null,u,s)):tn(t,e,u,s),e.memoizedState=r.state,i&&zy(e,n,!0),e.child}function Rw(t){var e=t.stateNode;e.pendingContext?Uy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uy(t,e.context,!1),Cg(t,e.containerInfo)}function nv(t,e,n,r,i){return Mo(),vg(i),e.flags|=256,tn(t,e,n,r),e.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function gp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nw(t,e,n){var r=e.pendingProps,i=it.current,s=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(it,i&1),t===null)return ap(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Sd(l,r,0,null),t=vs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gp(n),e.memoizedState=pp,t):Og(e,l));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return l8(t,e,l,r,u,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ai(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Ai(u,s):(s=vs(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?gp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=pp,r}return s=t.child,t=s.sibling,r=Ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Og(t,e){return e=Sd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&vg(r),Fo(e,t.child,null,n),t=Og(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l8(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=a0(Error(J(422))),Qu(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sd({mode:"visible",children:r.children},i,0,null),s=vs(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fo(e,t.child,null,l),e.child.memoizedState=gp(l),e.memoizedState=pp,s);if(!(e.mode&1))return Qu(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(J(419)),r=a0(s,r,void 0),Qu(t,e,l,r)}if(u=(l&t.childLanes)!==0,fn||u){if(r=It,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wr(t,i),ar(r,t,i,-1))}return Dg(),r=a0(Error(J(421))),Qu(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=S8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xn=Pi(i.nextSibling),kn=e,et=!0,sr=null,t!==null&&(Fn[Dn++]=Ur,Fn[Dn++]=zr,Fn[Dn++]=ws,Ur=t.id,zr=t.overflow,ws=e),e=Og(e,r.children),e.flags|=4096,e)}function rv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lp(t.return,e,n)}function l0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Aw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rv(t,n,e);else if(t.tag===19)rv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),l0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$c(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}l0(e,!0,n,null,s);break;case"together":l0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function u8(t,e,n){switch(e.tag){case 3:Rw(e),Mo();break;case 5:rw(e);break;case 1:gn(e.type)&&Dc(e);break;case 4:Cg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(Bc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?Nw(t,e,n):(He(it,it.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);He(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Aw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,Pw(t,e,n)}return Hr(t,e,n)}var Ow,mp,Iw,Lw;Ow=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mp=function(){};Iw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gs(Cr.current);var s=null;switch(n){case"input":i=D0(t,i),r=D0(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=B0(t,i),r=B0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mc)}V0(n,r);var l;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(il.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(il.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Xe("scroll",t),s||u===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Lw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Na(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function c8(t,e,n){var r=e.pendingProps;switch(yg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return gn(e.type)&&Fc(),Xt(e),null;case 3:return r=e.stateNode,Do(),Qe(pn),Qe(Jt),Eg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(Cp(sr),sr=null))),mp(t,e),Xt(e),null;case 5:bg(e);var i=gs(ml.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Xt(e),null}if(t=gs(Cr.current),Yu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sr]=e,r[pl]=s,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(i=0;i<Ba.length;i++)Xe(Ba[i],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":hy(r,s),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",r);break;case"textarea":py(r,s),Xe("invalid",r)}V0(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];l==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&qu(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&qu(r.textContent,u,t),i=["children",""+u]):il.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Xe("scroll",r)}switch(n){case"input":zu(r),fy(r,s,!0);break;case"textarea":zu(r),gy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Sr]=e,t[pl]=r,Ow(t,e,!1,!1),e.stateNode=t;e:{switch(l=$0(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),i=r;break;case"iframe":case"object":case"embed":Xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ba.length;i++)Xe(Ba[i],t);i=r;break;case"source":Xe("error",t),i=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),i=r;break;case"details":Xe("toggle",t),i=r;break;case"input":hy(t,r),i=D0(t,r),Xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":py(t,r),i=B0(t,r),Xe("invalid",t);break;default:i=r}V0(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?d_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&u_(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sl(t,c):typeof c=="number"&&sl(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(il.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Xe("scroll",t):c!=null&&ng(t,s,c,l))}switch(n){case"input":zu(t),fy(t,r,!1);break;case"textarea":zu(t),gy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ii(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bo(t,!!r.multiple,s,!1):r.defaultValue!=null&&bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)Lw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=gs(ml.current),gs(Cr.current),Yu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(s=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:qu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Xt(e),null;case 13:if(Qe(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&xn!==null&&e.mode&1&&!(e.flags&128))J_(),Mo(),e.flags|=98560,s=!1;else if(s=Yu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Sr]=e}else Mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),s=!1}else sr!==null&&(Cp(sr),sr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?bt===0&&(bt=3):Dg())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Do(),mp(t,e),t===null&&hl(e.stateNode.containerInfo),Xt(e),null;case 10:return Sg(e.type._context),Xt(e),null;case 17:return gn(e.type)&&Fc(),Xt(e),null;case 19:if(Qe(it),s=e.memoizedState,s===null)return Xt(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Na(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=$c(t),l!==null){for(e.flags|=128,Na(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&ft()>zo&&(e.flags|=128,r=!0,Na(s,!1),e.lanes=4194304)}else{if(!r)if(t=$c(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!et)return Xt(e),null}else 2*ft()-s.renderingStartTime>zo&&n!==1073741824&&(e.flags|=128,r=!0,Na(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,n=it.current,He(it,r?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return Fg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function d8(t,e){switch(yg(e),e.tag){case 1:return gn(e.type)&&Fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),Qe(pn),Qe(Jt),Eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bg(e),null;case 13:if(Qe(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(it),null;case 4:return Do(),null;case 10:return Sg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Ju=!1,Qt=!1,h8=typeof WeakSet=="function"?WeakSet:Set,oe=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function yp(t,e,n){try{n()}catch(r){ut(t,e,r)}}var iv=!1;function f8(t,e){if(ep=Ic,t=U_(),gg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,h=0,p=0,w=t,y=null;t:for(;;){for(var v;w!==n||i!==0&&w.nodeType!==3||(u=l+i),w!==s||r!==0&&w.nodeType!==3||(c=l+r),w.nodeType===3&&(l+=w.nodeValue.length),(v=w.firstChild)!==null;)y=w,w=v;for(;;){if(w===t)break t;if(y===n&&++h===i&&(u=l),y===s&&++p===r&&(c=l),(v=w.nextSibling)!==null)break;w=y,y=w.parentNode}w=v}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tp={focusedElem:t,selectionRange:n},Ic=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,E=_.memoizedState,C=e.stateNode,x=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:tr(e.type,b),E);C.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(k){ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return _=iv,iv=!1,_}function Qa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yp(e,n,s)}i=i.next}while(i!==r)}}function _d(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jw(t){var e=t.alternate;e!==null&&(t.alternate=null,jw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[pl],delete e[ip],delete e[YS],delete e[XS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mw(t){return t.tag===5||t.tag===3||t.tag===4}function sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(r!==4&&(t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}function wp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wp(t,e,n),t=t.sibling;t!==null;)wp(t,e,n),t=t.sibling}var Dt=null,rr=!1;function ci(t,e,n){for(n=n.child;n!==null;)Fw(t,e,n),n=n.sibling}function Fw(t,e,n){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:Qt||xo(n,e);case 6:var r=Dt,i=rr;Dt=null,ci(t,e,n),Dt=r,rr=i,Dt!==null&&(rr?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(rr?(t=Dt,n=n.stateNode,t.nodeType===8?t0(t.parentNode,n):t.nodeType===1&&t0(t,n),ul(t)):t0(Dt,n.stateNode));break;case 4:r=Dt,i=rr,Dt=n.stateNode.containerInfo,rr=!0,ci(t,e,n),Dt=r,rr=i;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&yp(n,e,l),i=i.next}while(i!==r)}ci(t,e,n);break;case 1:if(!Qt&&(xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ut(n,e,u)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,ci(t,e,n),Qt=r):ci(t,e,n);break;default:ci(t,e,n)}}function ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h8),e.forEach(function(r){var i=x8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Dt=u.stateNode,rr=!1;break e;case 3:Dt=u.stateNode.containerInfo,rr=!0;break e;case 4:Dt=u.stateNode.containerInfo,rr=!0;break e}u=u.return}if(Dt===null)throw Error(J(160));Fw(s,l,i),Dt=null,rr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){ut(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dw(e,t),e=e.sibling}function Dw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),_r(t),r&4){try{Qa(3,t,t.return),_d(3,t)}catch(b){ut(t,t.return,b)}try{Qa(5,t,t.return)}catch(b){ut(t,t.return,b)}}break;case 1:Jn(e,t),_r(t),r&512&&n!==null&&xo(n,n.return);break;case 5:if(Jn(e,t),_r(t),r&512&&n!==null&&xo(n,n.return),t.flags&32){var i=t.stateNode;try{sl(i,"")}catch(b){ut(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&o_(i,s),$0(u,l);var h=$0(u,s);for(l=0;l<c.length;l+=2){var p=c[l],w=c[l+1];p==="style"?d_(i,w):p==="dangerouslySetInnerHTML"?u_(i,w):p==="children"?sl(i,w):ng(i,p,w,h)}switch(u){case"input":U0(i,s);break;case"textarea":a_(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?bo(i,!!s.multiple,v,!1):y!==!!s.multiple&&(s.defaultValue!=null?bo(i,!!s.multiple,s.defaultValue,!0):bo(i,!!s.multiple,s.multiple?[]:"",!1))}i[pl]=s}catch(b){ut(t,t.return,b)}}break;case 6:if(Jn(e,t),_r(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){ut(t,t.return,b)}}break;case 3:if(Jn(e,t),_r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ul(e.containerInfo)}catch(b){ut(t,t.return,b)}break;case 4:Jn(e,t),_r(t);break;case 13:Jn(e,t),_r(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jg=ft())),r&4&&ov(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(h=Qt)||p,Jn(e,t),Qt=h):Jn(e,t),_r(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(oe=t,p=t.child;p!==null;){for(w=oe=p;oe!==null;){switch(y=oe,v=y.child,y.tag){case 0:case 11:case 14:case 15:Qa(4,y,y.return);break;case 1:xo(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){ut(r,n,b)}}break;case 5:xo(y,y.return);break;case 22:if(y.memoizedState!==null){lv(w);continue}}v!==null?(v.return=y,oe=v):lv(w)}p=p.sibling}e:for(p=null,w=t;;){if(w.tag===5){if(p===null){p=w;try{i=w.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=w.stateNode,c=w.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=c_("display",l))}catch(b){ut(t,t.return,b)}}}else if(w.tag===6){if(p===null)try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(b){ut(t,t.return,b)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;p===w&&(p=null),w=w.return}p===w&&(p=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Jn(e,t),_r(t),r&4&&ov(t);break;case 21:break;default:Jn(e,t),_r(t)}}function _r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mw(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sl(i,""),r.flags&=-33);var s=sv(t);wp(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=sv(t);_p(t,u,l);break;default:throw Error(J(161))}}catch(c){ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p8(t,e,n){oe=t,Uw(t)}function Uw(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Ju;if(!l){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Qt;u=Ju;var h=Qt;if(Ju=l,(Qt=c)&&!h)for(oe=i;oe!==null;)l=oe,c=l.child,l.tag===22&&l.memoizedState!==null?uv(i):c!==null?(c.return=l,oe=c):uv(i);for(;s!==null;)oe=s,Uw(s),s=s.sibling;oe=i,Ju=u,Qt=h}av(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):av(t)}}function av(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||_d(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Wy(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wy(e,l,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var w=p.dehydrated;w!==null&&ul(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Qt||e.flags&512&&vp(e)}catch(y){ut(e,e.return,y)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function lv(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function uv(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_d(4,e)}catch(c){ut(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ut(e,i,c)}}var s=e.return;try{vp(e)}catch(c){ut(e,s,c)}break;case 5:var l=e.return;try{vp(e)}catch(c){ut(e,l,c)}}}catch(c){ut(e,e.return,c)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var g8=Math.ceil,Kc=Kr.ReactCurrentDispatcher,Ig=Kr.ReactCurrentOwner,Bn=Kr.ReactCurrentBatchConfig,Ie=0,It=null,yt=null,zt=0,wn=0,ko=Fi(0),bt=0,wl=null,xs=0,wd=0,Lg=0,Ja=null,hn=null,jg=0,zo=1/0,Mr=null,qc=!1,Sp=null,Ri=null,Zu=!1,xi=null,Yc=0,Za=0,xp=null,xc=-1,kc=0;function nn(){return Ie&6?ft():xc!==-1?xc:xc=ft()}function Ni(t){return t.mode&1?Ie&2&&zt!==0?zt&-zt:JS.transition!==null?(kc===0&&(kc=k_()),kc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:N_(t.type)),t):1}function ar(t,e,n,r){if(50<Za)throw Za=0,xp=null,Error(J(185));Ll(t,n,r),(!(Ie&2)||t!==It)&&(t===It&&(!(Ie&2)&&(wd|=n),bt===4&&_i(t,zt)),mn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(zo=ft()+500,md&&Di()))}function mn(t,e){var n=t.callbackNode;J6(t,e);var r=Oc(t,t===It?zt:0);if(r===0)n!==null&&vy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vy(n),e===1)t.tag===0?QS(cv.bind(null,t)):Y_(cv.bind(null,t)),KS(function(){!(Ie&6)&&Di()}),n=null;else{switch(C_(r)){case 1:n=ag;break;case 4:n=S_;break;case 16:n=Ac;break;case 536870912:n=x_;break;default:n=Ac}n=Kw(n,zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zw(t,e){if(xc=-1,kc=0,Ie&6)throw Error(J(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var r=Oc(t,t===It?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xc(t,r);else{e=r;var i=Ie;Ie|=2;var s=Gw();(It!==t||zt!==e)&&(Mr=null,zo=ft()+500,ys(t,e));do try{v8();break}catch(u){Bw(t,u)}while(!0);wg(),Kc.current=s,Ie=i,yt!==null?e=0:(It=null,zt=0,e=bt)}if(e!==0){if(e===2&&(i=Y0(t),i!==0&&(r=i,e=kp(t,i))),e===1)throw n=wl,ys(t,0),_i(t,r),mn(t,ft()),n;if(e===6)_i(t,r);else{if(i=t.current.alternate,!(r&30)&&!m8(i)&&(e=Xc(t,r),e===2&&(s=Y0(t),s!==0&&(r=s,e=kp(t,s))),e===1))throw n=wl,ys(t,0),_i(t,r),mn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:os(t,hn,Mr);break;case 3:if(_i(t,r),(r&130023424)===r&&(e=jg+500-ft(),10<e)){if(Oc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rp(os.bind(null,t,hn,Mr),e);break}os(t,hn,Mr);break;case 4:if(_i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-or(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g8(r/1960))-r,10<r){t.timeoutHandle=rp(os.bind(null,t,hn,Mr),r);break}os(t,hn,Mr);break;case 5:os(t,hn,Mr);break;default:throw Error(J(329))}}}return mn(t,ft()),t.callbackNode===n?zw.bind(null,t):null}function kp(t,e){var n=Ja;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=Xc(t,e),t!==2&&(e=hn,hn=n,e!==null&&Cp(e)),t}function Cp(t){hn===null?hn=t:hn.push.apply(hn,t)}function m8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _i(t,e){for(e&=~Lg,e&=~wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function cv(t){if(Ie&6)throw Error(J(327));No();var e=Oc(t,0);if(!(e&1))return mn(t,ft()),null;var n=Xc(t,e);if(t.tag!==0&&n===2){var r=Y0(t);r!==0&&(e=r,n=kp(t,r))}if(n===1)throw n=wl,ys(t,0),_i(t,e),mn(t,ft()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,hn,Mr),mn(t,ft()),null}function Mg(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(zo=ft()+500,md&&Di())}}function ks(t){xi!==null&&xi.tag===0&&!(Ie&6)&&No();var e=Ie;Ie|=1;var n=Bn.transition,r=ze;try{if(Bn.transition=null,ze=1,t)return t()}finally{ze=r,Bn.transition=n,Ie=e,!(Ie&6)&&Di()}}function Fg(){wn=ko.current,Qe(ko)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,HS(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fc();break;case 3:Do(),Qe(pn),Qe(Jt),Eg();break;case 5:bg(r);break;case 4:Do();break;case 13:Qe(it);break;case 19:Qe(it);break;case 10:Sg(r.type._context);break;case 22:case 23:Fg()}n=n.return}if(It=t,yt=t=Ai(t.current,null),zt=wn=e,bt=0,wl=null,Lg=wd=xs=0,hn=Ja=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}ps=null}return t}function Bw(t,e){do{var n=yt;try{if(wg(),_c.current=Hc,Wc){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wc=!1}if(Ss=0,Ot=kt=st=null,Xa=!1,yl=0,Ig.current=null,n===null||n.return===null){bt=1,wl=e,yt=null;break}e:{var s=t,l=n.return,u=n,c=e;if(e=zt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,w=p.tag;if(!(p.mode&1)&&(w===0||w===11||w===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=Qy(l);if(v!==null){v.flags&=-257,Jy(v,l,u,s,e),v.mode&1&&Xy(s,h,e),e=v,c=h;var _=e.updateQueue;if(_===null){var b=new Set;b.add(c),e.updateQueue=b}else _.add(c);break e}else{if(!(e&1)){Xy(s,h,e),Dg();break e}c=Error(J(426))}}else if(et&&u.mode&1){var E=Qy(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Jy(E,l,u,s,e),vg(Uo(c,u));break e}}s=c=Uo(c,u),bt!==4&&(bt=2),Ja===null?Ja=[s]:Ja.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=Cw(s,c,e);$y(s,C);break e;case 1:u=c;var x=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ri===null||!Ri.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=bw(s,u,e);$y(s,k);break e}}s=s.return}while(s!==null)}$w(n)}catch(R){e=R,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function Gw(){var t=Kc.current;return Kc.current=Hc,t===null?Hc:t}function Dg(){(bt===0||bt===3||bt===2)&&(bt=4),It===null||!(xs&268435455)&&!(wd&268435455)||_i(It,zt)}function Xc(t,e){var n=Ie;Ie|=2;var r=Gw();(It!==t||zt!==e)&&(Mr=null,ys(t,e));do try{y8();break}catch(i){Bw(t,i)}while(!0);if(wg(),Ie=n,Kc.current=r,yt!==null)throw Error(J(261));return It=null,zt=0,bt}function y8(){for(;yt!==null;)Vw(yt)}function v8(){for(;yt!==null&&!V6();)Vw(yt)}function Vw(t){var e=Hw(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?$w(t):yt=e,Ig.current=null}function $w(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=d8(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,yt=null;return}}else if(n=c8(n,e,wn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);bt===0&&(bt=5)}function os(t,e,n){var r=ze,i=Bn.transition;try{Bn.transition=null,ze=1,_8(t,e,n,r)}finally{Bn.transition=i,ze=r}return null}function _8(t,e,n,r){do No();while(xi!==null);if(Ie&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z6(t,s),t===It&&(yt=It=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zu||(Zu=!0,Kw(Ac,function(){return No(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bn.transition,Bn.transition=null;var l=ze;ze=1;var u=Ie;Ie|=4,Ig.current=null,f8(t,n),Dw(n,t),US(tp),Ic=!!ep,tp=ep=null,t.current=n,p8(n),$6(),Ie=u,ze=l,Bn.transition=s}else t.current=n;if(Zu&&(Zu=!1,xi=t,Yc=i),s=t.pendingLanes,s===0&&(Ri=null),K6(n.stateNode),mn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qc)throw qc=!1,t=Sp,Sp=null,t;return Yc&1&&t.tag!==0&&No(),s=t.pendingLanes,s&1?t===xp?Za++:(Za=0,xp=t):Za=0,Di(),null}function No(){if(xi!==null){var t=C_(Yc),e=Bn.transition,n=ze;try{if(Bn.transition=null,ze=16>t?16:t,xi===null)var r=!1;else{if(t=xi,xi=null,Yc=0,Ie&6)throw Error(J(331));var i=Ie;for(Ie|=4,oe=t.current;oe!==null;){var s=oe,l=s.child;if(oe.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(oe=h;oe!==null;){var p=oe;switch(p.tag){case 0:case 11:case 15:Qa(8,p,s)}var w=p.child;if(w!==null)w.return=p,oe=w;else for(;oe!==null;){p=oe;var y=p.sibling,v=p.return;if(jw(p),p===h){oe=null;break}if(y!==null){y.return=v,oe=y;break}oe=v}}}var _=s.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}oe=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,oe=l;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qa(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,oe=C;break e}oe=s.return}}var x=t.current;for(oe=x;oe!==null;){l=oe;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,oe=m;else e:for(l=x;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:_d(9,u)}}catch(R){ut(u,u.return,R)}if(u===l){oe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,oe=k;break e}oe=u.return}}if(Ie=i,Di(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(dd,t)}catch{}r=!0}return r}finally{ze=n,Bn.transition=e}}return!1}function dv(t,e,n){e=Uo(n,e),e=Cw(t,e,1),t=Ti(t,e,1),e=nn(),t!==null&&(Ll(t,1,e),mn(t,e))}function ut(t,e,n){if(t.tag===3)dv(t,t,n);else for(;e!==null;){if(e.tag===3){dv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){t=Uo(n,t),t=bw(e,t,1),e=Ti(e,t,1),t=nn(),e!==null&&(Ll(e,1,t),mn(e,t));break}}e=e.return}}function w8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(zt&n)===n&&(bt===4||bt===3&&(zt&130023424)===zt&&500>ft()-jg?ys(t,0):Lg|=n),mn(t,e)}function Ww(t,e){e===0&&(t.mode&1?(e=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):e=1);var n=nn();t=Wr(t,e),t!==null&&(Ll(t,e,n),mn(t,n))}function S8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ww(t,n)}function x8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),Ww(t,n)}var Hw;Hw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,u8(t,e,n);fn=!!(t.flags&131072)}else fn=!1,et&&e.flags&1048576&&X_(e,zc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sc(t,e),t=e.pendingProps;var i=jo(e,Jt.current);Ro(e,n),i=Tg(null,e,r,t,i,n);var s=Rg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(s=!0,Dc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kg(e),i.updater=vd,e.stateNode=i,i._reactInternals=e,cp(e,r,t,n),e=fp(null,e,r,!0,s,n)):(e.tag=0,et&&s&&mg(e),tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=C8(r),t=tr(r,t),i){case 0:e=hp(null,e,r,t,n);break e;case 1:e=tv(null,e,r,t,n);break e;case 11:e=Zy(null,e,r,t,n);break e;case 14:e=ev(null,e,r,tr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),hp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),tv(t,e,r,i,n);case 3:e:{if(Rw(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,nw(t,e),Vc(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Uo(Error(J(423)),e),e=nv(t,e,r,n,i);break e}else if(r!==i){i=Uo(Error(J(424)),e),e=nv(t,e,r,n,i);break e}else for(xn=Pi(e.stateNode.containerInfo.firstChild),kn=e,et=!0,sr=null,n=ew(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),r===i){e=Hr(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return rw(e),t===null&&ap(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,np(r,i)?l=null:s!==null&&np(r,s)&&(e.flags|=32),Tw(t,e),tn(t,e,l,n),e.child;case 6:return t===null&&ap(e),null;case 13:return Nw(t,e,n);case 4:return Cg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fo(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),Zy(t,e,r,i,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,He(Bc,r._currentValue),r._currentValue=l,s!==null)if(ur(s.value,l)){if(s.children===i.children&&!pn.current){e=Hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){l=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Br(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),lp(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(J(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),lp(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ro(e,n),i=Gn(i),r=r(i),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,i=tr(r,e.pendingProps),i=tr(r.type,i),ev(t,e,r,i,n);case 15:return Ew(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),Sc(t,e),e.tag=1,gn(r)?(t=!0,Dc(e)):t=!1,Ro(e,n),kw(e,r,i),cp(e,r,i,n),fp(null,e,r,!0,t,n);case 19:return Aw(t,e,n);case 22:return Pw(t,e,n)}throw Error(J(156,e.tag))};function Kw(t,e){return w_(t,e)}function k8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,r){return new k8(t,e,n,r)}function Ug(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C8(t){if(typeof t=="function")return Ug(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ig)return 11;if(t===sg)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cc(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Ug(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case fo:return vs(n.children,i,s,e);case rg:l=8,i|=8;break;case L0:return t=zn(12,n,e,i|2),t.elementType=L0,t.lanes=s,t;case j0:return t=zn(13,n,e,i),t.elementType=j0,t.lanes=s,t;case M0:return t=zn(19,n,e,i),t.elementType=M0,t.lanes=s,t;case r_:return Sd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t_:l=10;break e;case n_:l=9;break e;case ig:l=11;break e;case sg:l=14;break e;case gi:l=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=zn(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vs(t,e,n,r){return t=zn(7,t,r,e),t.lanes=n,t}function Sd(t,e,n,r){return t=zn(22,t,r,e),t.elementType=r_,t.lanes=n,t.stateNode={isHidden:!1},t}function u0(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function c0(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zg(t,e,n,r,i,s,l,u,c){return t=new b8(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kg(s),t}function E8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qw(t){if(!t)return Li;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(gn(n))return q_(t,n,e)}return e}function Yw(t,e,n,r,i,s,l,u,c){return t=zg(n,r,!0,t,i,s,l,u,c),t.context=qw(null),n=t.current,r=nn(),i=Ni(n),s=Br(r,i),s.callback=e??null,Ti(n,s,i),t.current.lanes=i,Ll(t,i,r),mn(t,r),t}function xd(t,e,n,r){var i=e.current,s=nn(),l=Ni(i);return n=qw(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(i,e,l),t!==null&&(ar(t,i,l,s),vc(t,i,l)),l}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bg(t,e){hv(t,e),(t=t.alternate)&&hv(t,e)}function P8(){return null}var Xw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gg(t){this._internalRoot=t}kd.prototype.render=Gg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));xd(t,e,null,null)};kd.prototype.unmount=Gg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ks(function(){xd(null,t,null,null)}),e[$r]=null}};function kd(t){this._internalRoot=t}kd.prototype.unstable_scheduleHydration=function(t){if(t){var e=P_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vi.length&&e!==0&&e<vi[n].priority;n++);vi.splice(n,0,t),n===0&&R_(t)}};function Vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fv(){}function T8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Qc(l);s.call(h)}}var l=Yw(e,r,t,0,null,!1,!1,"",fv);return t._reactRootContainer=l,t[$r]=l.current,hl(t.nodeType===8?t.parentNode:t),ks(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=Qc(c);u.call(h)}}var c=zg(t,0,!1,null,null,!1,!1,"",fv);return t._reactRootContainer=c,t[$r]=c.current,hl(t.nodeType===8?t.parentNode:t),ks(function(){xd(e,c,n,r)}),c}function bd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var u=i;i=function(){var c=Qc(l);u.call(c)}}xd(e,l,t,i)}else l=T8(n,e,t,i,r);return Qc(l)}b_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=za(e.pendingLanes);n!==0&&(lg(e,n|1),mn(e,ft()),!(Ie&6)&&(zo=ft()+500,Di()))}break;case 13:ks(function(){var r=Wr(t,1);if(r!==null){var i=nn();ar(r,t,1,i)}}),Bg(t,1)}};ug=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=nn();ar(e,t,134217728,n)}Bg(t,134217728)}};E_=function(t){if(t.tag===13){var e=Ni(t),n=Wr(t,e);if(n!==null){var r=nn();ar(n,t,e,r)}Bg(t,e)}};P_=function(){return ze};T_=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};H0=function(t,e,n){switch(e){case"input":if(U0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gd(r);if(!i)throw Error(J(90));s_(r),U0(r,i)}}}break;case"textarea":a_(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};p_=Mg;g_=ks;var R8={usingClientEntryPoint:!1,Events:[Ml,yo,gd,h_,f_,Mg]},Aa={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N8={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v_(t),t===null?null:t.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||P8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{dd=ec.inject(N8),kr=ec}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R8;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vg(e))throw Error(J(200));return E8(t,e,null,n)};bn.createRoot=function(t,e){if(!Vg(t))throw Error(J(299));var n=!1,r="",i=Xw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zg(t,1,!1,null,null,n,!1,r,i),t[$r]=e.current,hl(t.nodeType===8?t.parentNode:t),new Gg(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=v_(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return ks(t)};bn.hydrate=function(t,e,n){if(!Cd(e))throw Error(J(200));return bd(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Vg(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=Xw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Yw(e,null,t,1,n??null,i,!1,s,l),t[$r]=e.current,hl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kd(e)};bn.render=function(t,e,n){if(!Cd(e))throw Error(J(200));return bd(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!Cd(t))throw Error(J(40));return t._reactRootContainer?(ks(function(){bd(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};bn.unstable_batchedUpdates=Mg;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cd(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return bd(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(t){console.error(t)}}Qw(),Q2.exports=bn;var A8=Q2.exports,pv=A8;O0.createRoot=pv.createRoot,O0.hydrateRoot=pv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const gv="popstate";function O8(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:l,hash:u}=r.location;return bp("",{pathname:s,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jc(i)}return L8(e,n,null,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $g(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I8(){return Math.random().toString(36).substr(2,8)}function mv(t,e){return{usr:t.state,key:t.key,idx:e}}function bp(t,e,n,r){return n===void 0&&(n=null),Sl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:n,key:e&&e.key||r||I8()})}function Jc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function L8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,u=ki.Pop,c=null,h=p();h==null&&(h=0,l.replaceState(Sl({},l.state,{idx:h}),""));function p(){return(l.state||{idx:null}).idx}function w(){u=ki.Pop;let E=p(),C=E==null?null:E-h;h=E,c&&c({action:u,location:b.location,delta:C})}function y(E,C){u=ki.Push;let x=bp(b.location,E,C);h=p()+1;let m=mv(x,h),k=b.createHref(x);try{l.pushState(m,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(k)}s&&c&&c({action:u,location:b.location,delta:1})}function v(E,C){u=ki.Replace;let x=bp(b.location,E,C);h=p();let m=mv(x,h),k=b.createHref(x);l.replaceState(m,"",k),s&&c&&c({action:u,location:b.location,delta:0})}function _(E){let C=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof E=="string"?E:Jc(E);return x=x.replace(/ $/,"%20"),vt(C,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,C)}let b={get action(){return u},get location(){return t(i,l)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gv,w),c=E,()=>{i.removeEventListener(gv,w),c=null}},createHref(E){return e(i,E)},createURL:_,encodeLocation(E){let C=_(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(E){return l.go(E)}};return b}var yv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yv||(yv={}));function j8(t,e,n){return n===void 0&&(n="/"),M8(t,e,n)}function M8(t,e,n,r){let i=typeof e=="string"?Ko(e):e,s=Wg(i.pathname||"/",n);if(s==null)return null;let l=Jw(t);F8(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=Y8(s);u=H8(l[c],h)}return u}function Jw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,l,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};c.relativePath.startsWith("/")&&(vt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=Oi([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Jw(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:$8(h,s.index),routesMeta:p})};return t.forEach((s,l)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,l);else for(let c of Zw(s.path))i(s,l,c)}),e}function Zw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=Zw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...l),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function F8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D8=/^:[\w-]+$/,U8=3,z8=2,B8=1,G8=10,V8=-2,vv=t=>t==="*";function $8(t,e){let n=t.split("/"),r=n.length;return n.some(vv)&&(r+=V8),e&&(r+=z8),n.filter(i=>!vv(i)).reduce((i,s)=>i+(D8.test(s)?U8:s===""?B8:G8),r)}function W8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function H8(t,e,n){let{routesMeta:r}=t,i={},s="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",w=K8({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!w)return null;Object.assign(i,w.params),l.push({params:i,pathname:Oi([s,w.pathname]),pathnameBase:ex(Oi([s,w.pathnameBase])),route:y}),w.pathnameBase!=="/"&&(s=Oi([s,w.pathnameBase]))}return l}function K8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=q8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,w)=>{let{paramName:y,isOptional:v}=p;if(y==="*"){let b=u[w]||"";l=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const _=u[w];return v&&!_?h[y]=void 0:h[y]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:t}}function q8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$g(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Y8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $g(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const X8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q8=t=>X8.test(t);function J8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ko(t):t,s;if(n)if(Q8(n))s=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),$g(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?s=_v(n.substring(1),"/"):s=_v(n,e)}else s=e;return{pathname:s,search:tx(r),hash:nx(i)}}function _v(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function d0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e4(t,e){let n=Z8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t4(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ko(t):(i=Sl({},t),vt(!i.pathname||!i.pathname.includes("?"),d0("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),d0("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),d0("#","search","hash",i)));let s=t===""||i.pathname==="",l=s?"/":i.pathname,u;if(l==null)u=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),w-=1;i.pathname=y.join("/")}u=w>=0?e[w]:"/"}let c=J8(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const Oi=t=>t.join("/").replace(/\/\/+/g,"/"),ex=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n4=["post","put","patch","delete"];new Set(n4);const ix=["get",...n4];new Set(ix);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(this,arguments)}const Hg=W.createContext(null),sx=W.createContext(null),Es=W.createContext(null),Ed=W.createContext(null),Ps=W.createContext({outlet:null,matches:[],isDataRoute:!1}),r4=W.createContext(null);function ox(t,e){let{relative:n}=e===void 0?{}:e;Dl()||vt(!1);let{basename:r,navigator:i}=W.useContext(Es),{hash:s,pathname:l,search:u}=s4(t,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Oi([r,l])),i.createHref({pathname:c,search:u,hash:s})}function Dl(){return W.useContext(Ed)!=null}function Pd(){return Dl()||vt(!1),W.useContext(Ed).location}function i4(t){W.useContext(Es).static||W.useLayoutEffect(t)}function Kg(){let{isDataRoute:t}=W.useContext(Ps);return t?_x():ax()}function ax(){Dl()||vt(!1);let t=W.useContext(Hg),{basename:e,future:n,navigator:r}=W.useContext(Es),{matches:i}=W.useContext(Ps),{pathname:s}=Pd(),l=JSON.stringify(e4(i,n.v7_relativeSplatPath)),u=W.useRef(!1);return i4(()=>{u.current=!0}),W.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let w=t4(h,JSON.parse(l),s,p.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Oi([e,w.pathname])),(p.replace?r.replace:r.push)(w,p.state,p)},[e,r,l,s,t])}function s4(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=W.useContext(Es),{matches:i}=W.useContext(Ps),{pathname:s}=Pd(),l=JSON.stringify(e4(i,r.v7_relativeSplatPath));return W.useMemo(()=>t4(t,JSON.parse(l),s,n==="path"),[t,l,s,n])}function lx(t,e){return ux(t,e)}function ux(t,e,n,r){Dl()||vt(!1);let{navigator:i}=W.useContext(Es),{matches:s}=W.useContext(Ps),l=s[s.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let h=Pd(),p;if(e){var w;let E=typeof e=="string"?Ko(e):e;c==="/"||(w=E.pathname)!=null&&w.startsWith(c)||vt(!1),p=E}else p=h;let y=p.pathname||"/",v=y;if(c!=="/"){let E=c.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=j8(t,{pathname:v}),b=px(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Oi([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Oi([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return e&&b?W.createElement(Ed.Provider,{value:{location:xl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ki.Pop}},b):b}function cx(){let t=vx(),e=rx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,null)}const dx=W.createElement(cx,null);class hx extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(Ps.Provider,{value:this.props.routeContext},W.createElement(r4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fx(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(Hg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(Ps.Provider,{value:e},r)}function px(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=l.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);p>=0||vt(!1),l=l.slice(0,Math.min(l.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<l.length;p++){let w=l[p];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(h=p),w.route.id){let{loaderData:y,errors:v}=n,_=w.route.loader&&y[w.route.id]===void 0&&(!v||v[w.route.id]===void 0);if(w.route.lazy||_){c=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((p,w,y)=>{let v,_=!1,b=null,E=null;n&&(v=u&&w.route.id?u[w.route.id]:void 0,b=w.route.errorElement||dx,c&&(h<0&&y===0?(wx("route-fallback"),_=!0,E=null):h===y&&(_=!0,E=w.route.hydrateFallbackElement||null)));let C=e.concat(l.slice(0,y+1)),x=()=>{let m;return v?m=b:_?m=E:w.route.Component?m=W.createElement(w.route.Component,null):w.route.element?m=w.route.element:m=p,W.createElement(fx,{match:w,routeContext:{outlet:p,matches:C,isDataRoute:n!=null},children:m})};return n&&(w.route.ErrorBoundary||w.route.errorElement||y===0)?W.createElement(hx,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:x(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):x()},null)}var o4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(o4||{}),a4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(a4||{});function gx(t){let e=W.useContext(Hg);return e||vt(!1),e}function mx(t){let e=W.useContext(sx);return e||vt(!1),e}function yx(t){let e=W.useContext(Ps);return e||vt(!1),e}function l4(t){let e=yx(),n=e.matches[e.matches.length-1];return n.route.id||vt(!1),n.route.id}function vx(){var t;let e=W.useContext(r4),n=mx(),r=l4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _x(){let{router:t}=gx(o4.UseNavigateStable),e=l4(a4.UseNavigateStable),n=W.useRef(!1);return i4(()=>{n.current=!0}),W.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xl({fromRouteId:e},s)))},[t,e])}const wv={};function wx(t,e,n){wv[t]||(wv[t]=!0)}function Sx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function as(t){vt(!1)}function xx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ki.Pop,navigator:s,static:l=!1,future:u}=t;Dl()&&vt(!1);let c=e.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:c,navigator:s,static:l,future:xl({v7_relativeSplatPath:!1},u)}),[c,u,s,l]);typeof r=="string"&&(r=Ko(r));let{pathname:p="/",search:w="",hash:y="",state:v=null,key:_="default"}=r,b=W.useMemo(()=>{let E=Wg(p,c);return E==null?null:{location:{pathname:E,search:w,hash:y,state:v,key:_},navigationType:i}},[c,p,w,y,v,_,i]);return b==null?null:W.createElement(Es.Provider,{value:h},W.createElement(Ed.Provider,{children:n,value:b}))}function kx(t){let{children:e,location:n}=t;return lx(Ep(e),n)}new Promise(()=>{});function Ep(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let s=[...e,i];if(r.type===W.Fragment){n.push.apply(n,Ep(r.props.children,s));return}r.type!==as&&vt(!1),!r.props.index||!r.props.children||vt(!1);let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ep(r.props.children,s)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pp.apply(this,arguments)}function Cx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ex(t,e){return t.button===0&&(!e||e==="_self")&&!bx(t)}const Px=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tx="6";try{window.__reactRouterVersion=Tx}catch{}const Rx="startTransition",Sv=S6[Rx];function Nx(t){let{basename:e,children:n,future:r,window:i}=t,s=W.useRef();s.current==null&&(s.current=O8({window:i,v5Compat:!0}));let l=s.current,[u,c]=W.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=W.useCallback(w=>{h&&Sv?Sv(()=>c(w)):c(w)},[c,h]);return W.useLayoutEffect(()=>l.listen(p),[l,p]),W.useEffect(()=>Sx(r),[r]),W.createElement(xx,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const Ax=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Un=W.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:l,state:u,target:c,to:h,preventScrollReset:p,viewTransition:w}=e,y=Cx(e,Px),{basename:v}=W.useContext(Es),_,b=!1;if(typeof h=="string"&&Ox.test(h)&&(_=h,Ax))try{let m=new URL(window.location.href),k=h.startsWith("//")?new URL(m.protocol+h):new URL(h),R=Wg(k.pathname,v);k.origin===m.origin&&R!=null?h=R+k.search+k.hash:b=!0}catch{}let E=ox(h,{relative:i}),C=Ix(h,{replace:l,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:w});function x(m){r&&r(m),m.defaultPrevented||C(m)}return W.createElement("a",Pp({},y,{href:_||E,onClick:b||s?r:x,ref:n,target:c}))});var xv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xv||(xv={}));var kv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kv||(kv={}));function Ix(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:l,viewTransition:u}=e===void 0?{}:e,c=Kg(),h=Pd(),p=s4(t,{relative:l});return W.useCallback(w=>{if(Ex(w,n)){w.preventDefault();let y=r!==void 0?r:Jc(h)===Jc(p);c(t,{replace:y,state:i,preventScrollReset:s,relative:l,viewTransition:u})}},[h,c,p,r,i,n,t,s,l,u])}function Td(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lx(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(w){l(w)}}function c(p){try{h(r.throw(p))}catch(w){l(w)}}function h(p){p.done?s(p.value):i(p.value).then(u,c)}h((r=r.apply(t,e||[])).next())})}const jx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class qg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Mx extends qg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cv extends qg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bv extends qg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Tp||(Tp={}));class Fx{constructor(e,{headers:n={},customFetch:r,region:i=Tp.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=jx(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Lx(this,arguments,void 0,function*(n,r={}){var i;let s,l;try{const{headers:u,method:c,body:h,signal:p,timeout:w}=r;let y={},{region:v}=r;v||(v=this.region);const _=new URL(`${this.url}/${n}`);v&&v!=="any"&&(y["x-region"]=v,_.searchParams.set("forceFunctionRegion",v));let b;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",b=h):typeof h=="string"?(y["Content-Type"]="text/plain",b=h):typeof FormData<"u"&&h instanceof FormData?b=h:(y["Content-Type"]="application/json",b=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?b=JSON.stringify(h):b=h;let E=p;w&&(l=new AbortController,s=setTimeout(()=>l.abort(),w),p?(E=l.signal,p.addEventListener("abort",()=>l.abort())):E=l.signal);const C=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:b,signal:E}).catch(R=>{throw new Mx(R)}),x=C.headers.get("x-relay-error");if(x&&x==="true")throw new Cv(C);if(!C.ok)throw new bv(C);let m=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return m==="application/json"?k=yield C.json():m==="application/octet-stream"||m==="application/pdf"?k=yield C.blob():m==="text/event-stream"?k=C:m==="multipart/form-data"?k=yield C.formData():k=yield C.text(),{data:k,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof bv||u instanceof Cv?u.context:void 0}}finally{s&&clearTimeout(s)}})}}var Dx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Ux=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let l=null,u=null,c=null,h=s.status,p=s.statusText;if(s.ok){var w,y;if(n.method!=="HEAD"){var v;const C=await s.text();C===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((v=n.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=C:u=JSON.parse(C))}const b=(w=n.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),E=(y=s.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");b&&E&&E.length>1&&(c=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,c=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var _;const b=await s.text();try{l=JSON.parse(b),Array.isArray(l)&&s.status===404&&(u=[],l=null,h=200,p="OK")}catch{s.status===404&&b===""?(h=204,p="No Content"):l={message:b}}if(l&&n.isMaybeSingle&&(!(l==null||(_=l.details)===null||_===void 0)&&_.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new Dx(l)}return{error:l,data:u,count:c,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var l;let u="",c="",h="";const p=s==null?void 0:s.cause;if(p){var w,y,v,_;const C=(w=p==null?void 0:p.message)!==null&&w!==void 0?w:"",x=(y=p==null?void 0:p.code)!==null&&y!==void 0?y:"";u=`${(v=s==null?void 0:s.name)!==null&&v!==void 0?v:"FetchError"}: ${s==null?void 0:s.message}`,u+=`

Caused by: ${(_=p==null?void 0:p.name)!==null&&_!==void 0?_:"Error"}: ${C}`,x&&(u+=` (${x})`),p!=null&&p.stack&&(u+=`
${p.stack}`)}else{var b;u=(b=s==null?void 0:s.stack)!==null&&b!==void 0?b:""}const E=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(h="",c="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",c="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(c+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=s==null?void 0:s.name)!==null&&l!==void 0?l:"FetchError"}: ${s==null?void 0:s.message}`,details:u,hint:c,code:h},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},zx=class extends Ux{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${u};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ev=new RegExp("[,()]");var lo=class extends zx{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ev.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ev.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Bx=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:u,headers:c}=this.cloneRequestState();return u.searchParams.set("select",l),r&&c.append("Prefer",`count=${r}`),new lo({method:i,url:u,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);s.searchParams.set("columns",c.join(","))}}return new lo({method:i,url:s,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const l="POST",{url:u,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((p,w)=>p.concat(Object.keys(w)),[]);if(h.length>0){const p=[...new Set(h)].map(w=>`"${w}"`);u.searchParams.set("columns",p.join(","))}}return new lo({method:l,url:u,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new lo({method:r,url:i,headers:s,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new lo({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function Gx(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vx(t){var e=Gx(t,"string");return kl(e)=="symbol"?e:e+""}function $x(t,e,n){return(e=Vx(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pv(Object(n),!0).forEach(function(r){$x(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Wx=class u4{constructor(e,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=l;const u=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(c,h)=>{const p=new AbortController,w=setTimeout(()=>p.abort(),s),y=h==null?void 0:h.signal;if(y){if(y.aborted)return clearTimeout(w),u(c,h);const v=()=>{clearTimeout(w),p.abort()};return y.addEventListener("abort",v,{once:!0}),u(c,tc(tc({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(w),y.removeEventListener("abort",v)})}return u(c,tc(tc({},h),{},{signal:p.signal})).finally(()=>clearTimeout(w))}:this.fetch=u}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Bx(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new u4(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var l;let u;const c=new URL(`${this.url}/rpc/${e}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),w=r&&Object.values(n).some(p);w?(u="POST",h=n):r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([v,_])=>_!==void 0).map(([v,_])=>[v,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([v,_])=>{c.searchParams.append(v,_)})):(u="POST",h=n);const y=new Headers(this.headers);return w?y.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&y.set("Prefer",`count=${s}`),new lo({method:u,url:c,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class Hx{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Kx="2.97.0",qx=`realtime-js/${Kx}`,Yx="1.0.0",c4="2.0.0",Tv=c4,Rp=1e4,Xx=1e3,Qx=100;var yi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yi||(yi={}));var St;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(St||(St={}));var ir;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ir||(ir={}));var Np;(function(t){t.websocket="websocket"})(Np||(Np={}));var cs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cs||(cs={}));class Jx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,s;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(p).length===0?"":JSON.stringify(p);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+l.length+h.length+w.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let _=new DataView(v),b=0;_.setUint8(b++,this.KINDS.userBroadcastPush),_.setUint8(b++,c.length),_.setUint8(b++,u.length),_.setUint8(b++,l.length),_.setUint8(b++,h.length),_.setUint8(b++,w.length),_.setUint8(b++,n),Array.from(c,C=>_.setUint8(b++,C.charCodeAt(0))),Array.from(u,C=>_.setUint8(b++,C.charCodeAt(0))),Array.from(l,C=>_.setUint8(b++,C.charCodeAt(0))),Array.from(h,C=>_.setUint8(b++,C.charCodeAt(0))),Array.from(w,C=>_.setUint8(b++,C.charCodeAt(0)));var E=new Uint8Array(v.byteLength+r.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(r),v.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,l,u,c]=r;return n({join_ref:i,ref:s,topic:l,event:u,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let c=this.HEADER_LENGTH+4;const h=r.decode(e.slice(c,c+i));c=c+i;const p=r.decode(e.slice(c,c+s));c=c+s;const w=r.decode(e.slice(c,c+l));c=c+l;const y=e.slice(c,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(y)):y,_={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(_.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class d4{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(We||(We={}));const Rv=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,l)=>(s[l]=Zx(l,t,e,i),s),{}):{}},Zx=(t,e,n,r)=>{const i=e.find(u=>u.name===t),s=i==null?void 0:i.type,l=n[t];return s&&!r.includes(s)?h4(s,l):Ap(l)},h4=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return r9(e,n)}switch(t){case We.bool:return e9(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return t9(e);case We.json:case We.jsonb:return n9(e);case We.timestamp:return i9(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return Ap(e);default:return Ap(e)}},Ap=t=>t,e9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t9=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},n9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},r9=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const l=t.slice(1,n);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(u=>h4(e,u))}return t},i9=t=>typeof t=="string"?t.replace(" ","T"):t,f4=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class h0{constructor(e,n,r={},i=Rp){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Nv||(Nv={}));class el{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=el.syncState(this.state,i,s,l),this.pendingDiffs.forEach(c=>{this.state=el.syncDiff(this.state,c,s,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=el.syncDiff(this.state,i,s,l),u())}),this.onJoin((i,s,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:l})}),this.onLeave((i,s,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),l=this.transformState(n),u={},c={};return this.map(s,(h,p)=>{l[h]||(c[h]=p)}),this.map(l,(h,p)=>{const w=s[h];if(w){const y=p.map(E=>E.presence_ref),v=w.map(E=>E.presence_ref),_=p.filter(E=>v.indexOf(E.presence_ref)<0),b=w.filter(E=>y.indexOf(E.presence_ref)<0);_.length>0&&(u[h]=_),b.length>0&&(c[h]=b)}else u[h]=p}),this.syncDiff(s,{joins:u,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,c)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),p.length>0){const w=e[u].map(v=>v.presence_ref),y=p.filter(v=>w.indexOf(v.presence_ref)<0);e[u].unshift(...y)}r(u,p,c)}),this.map(l,(u,c)=>{let h=e[u];if(!h)return;const p=c.map(w=>w.presence_ref);h=h.filter(w=>p.indexOf(w.presence_ref)<0),e[u]=h,i(u,h,c),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Av;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Av||(Av={}));var tl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(tl||(tl={}));var Fr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fr||(Fr={}));class Co{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new h0(this,ir.join,this.params,this.timeout),this.rejoinTimer=new d4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ir.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new el(this),this.broadcastEndpointURL=f4(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==St.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[tl.PRESENCE]&&this.bindings[tl.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,w={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Fr.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Fr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e==null||e(Fr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(_=b==null?void 0:b.length)!==null&&_!==void 0?_:0,C=[];for(let x=0;x<E;x++){const m=b[x],{filter:{event:k,schema:R,table:N,filter:O}}=m,A=v&&v[x];if(A&&A.event===k&&Co.isFilterValueEqual(A.schema,R)&&Co.isFilterValueEqual(A.table,N)&&Co.isFilterValueEqual(A.filter,O))C.push(Object.assign(Object.assign({},m),{id:A.id}));else{this.unsubscribe(),this.state=St.errored,e==null||e(Fr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Fr.SUBSCRIBED);return}}).receive("error",v=>{this.state=St.errored,e==null||e(Fr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Fr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===St.joined&&e===tl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let c=u.statusText;try{const h=await u.json();c=h.error||h.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,u,c;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ir.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new h0(this,ir.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=St.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new h0(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:p}=ir;if(r&&[u,c,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var _,b,E;return((_=v.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(b=v.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(y,r)):(s=this.bindings[l])===null||s===void 0||s.filter(v=>{var _,b,E,C,x,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const k=v.id,R=(_=v.filter)===null||_===void 0?void 0:_.event;return k&&((b=n.ids)===null||b===void 0?void 0:b.includes(k))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const k=(x=(C=v==null?void 0:v.filter)===null||C===void 0?void 0:C.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return k==="*"||k===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const _=y.data,{schema:b,table:E,commit_timestamp:C,type:x,errors:m}=_;y=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:C,eventType:x,new:{},old:{},errors:m}),this._getPayloadRecords(_))}v.callback(y,r)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Co.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ir.close,{},e)}_onError(e){this._on(ir.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Rv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Rv(e.columns,e.old_record)),n}}const f0=()=>{},nc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s9=[1e3,2e3,5e3,1e4],o9=1e4,a9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l9{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rp,this.transport=null,this.heartbeatIntervalMs=nc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=f0,this.ref=0,this.reconnectTimer=null,this.vsn=Tv,this.logger=f0,this.conn=null,this.sendBuffer=[],this.serializer=new Jx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Np.websocket}`,this.httpEndpoint=f4(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yi.connecting:return cs.Connecting;case yi.open:return cs.Open;case yi.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Co(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Xx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},nc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:l}=n,u=l?`(${l})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),s),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,s,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===yi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===yi.open||this.conn.readyState===yi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ir.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([a9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:qx};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(ir.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new d4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,l,u,c,h,p,w,y,v;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Rp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:nc.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:f0,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Tv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:_=>s9[_-1]||o9,this.vsn){case Yx:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(_,b)=>b(JSON.stringify(_)),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:(_,b)=>b(JSON.parse(_));break;case c4:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Cl=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function u9(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function c9(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function d9(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:l}){const u=u9(t.baseUrl,r,i),c=await c9(t.auth),h=await e(u,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...c,...l},body:s?JSON.stringify(s):void 0}),p=await h.text(),w=(h.headers.get("content-type")||"").includes("application/json"),y=w&&p?JSON.parse(p):p;if(!h.ok){const v=w?y:void 0,_=v==null?void 0:v.error;throw new Cl((_==null?void 0:_.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function rc(t){return t.join("")}var h9=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:rc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rc(t.namespace)}`}),!0}catch(e){if(e instanceof Cl&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Cl&&n.status===409)return;throw n}}};function Js(t){return t.join("")}var f9=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Js(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Cl&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Cl&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},p9=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=d9({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new h9(this.client,e),this.tableOps=new f9(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Rd=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Nd(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var ic=class extends Rd{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},p4=class extends Rd{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const g9=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Op=t=>{if(Array.isArray(t))return t.map(n=>Op(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Op(r)}),e},y9=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function v9(t,e){if(bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _9(t){var e=v9(t,"string");return bl(e)=="symbol"?e:e+""}function w9(t,e,n){return(e=_9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ov(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ov(Object(n),!0).forEach(function(r){w9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Iv=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},S9=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,s=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new ic(Iv(l),s,u,r))}).catch(()=>{if(r==="vectors"){const l=s+"";e(new ic(i.statusText||`HTTP ${s} error`,s,l,r))}else{const l=s+"";e(new ic(i.statusText||`HTTP ${s} error`,s,l,r))}});else{const l=s+"";e(new ic(i.statusText||`HTTP ${s} error`,s,l,r))}}else e(new p4(Iv(t),t,r))},x9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?fe(fe({},i),n):(m9(r)?(i.headers=fe({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),fe(fe({},i),n))};async function Oa(t,e,n,r,i,s,l){return new Promise((u,c)=>{t(n,x9(e,r,i,s)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>S9(h,c,r,l))})}function g4(t="storage"){return{get:async(e,n,r,i)=>Oa(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,s)=>Oa(e,"POST",n,i,s,r,t),put:async(e,n,r,i,s)=>Oa(e,"PUT",n,i,s,r,t),head:async(e,n,r,i)=>Oa(e,"HEAD",n,fe(fe({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,s)=>Oa(e,"DELETE",n,i,s,r,t)}}const k9=g4("storage"),{get:El,post:nr,put:Ip,head:C9,remove:Yg}=k9,Sn=g4("vectors");var qo=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=g9(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=fe(fe({},this.headers),{},{[t]:e}),this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Nd(n))return{data:null,error:n};throw n}}},b9=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Nd(e))return{data:null,error:e};throw e}}};let m4;m4=Symbol.toStringTag;var E9=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[m4]="BlobDownloadBuilder",this.promise=null}asStream(){return new b9(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Nd(e))return{data:null,error:e};throw e}}};const P9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T9=class extends qo{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let s;const l=fe(fe({},Lv),r);let u=fe(fe({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),c&&s.append("metadata",i.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),c&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(c))):(s=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=fe(fe({},u),r.headers));const h=i._removeEmptyFolders(e),p=i._getFinalPath(h),w=await(t=="PUT"?Ip:nr)(i.fetch,`${i.url}/object/${p}`,s,fe({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:w.Id,fullPath:w.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),l=i._getFinalPath(s),u=new URL(i.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),i.handleOperation(async()=>{let c;const h=fe({upsert:Lv.upsert},r),p=fe(fe({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",h.cacheControl)):(c=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:s,fullPath:(await Ip(i.fetch,u.toString(),c,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=fe({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await nr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+s.url),u=l.searchParams.get("token");if(!u)throw new Rd("No token returned by API");return{signedUrl:l.toString(),path:t,token:u}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await nr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await nr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),s=await nr(r.fetch,`${r.url}/object/sign/${i}`,fe({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await nr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>fe(fe({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${s}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),u=()=>El(this.fetch,`${this.url}/${r}/${l}${s}`,{headers:this.headers,noResolveJson:!0},n);return new E9(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Op(await El(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await C9(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Nd(r)&&r instanceof p4){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Yg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=fe(fe(fe({},P9),e),{},{prefix:t||""});return await nr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=fe({},t);return await nr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const R9="2.97.0",Ul={"X-Client-Info":`storage-js/${R9}`};var N9=class extends qo{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),l=fe(fe({},Ul),e);super(s,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await El(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await El(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await nr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Ip(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await nr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},A9=class extends qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Ul),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await nr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await El(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!y9(t))throw new Rd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new p9({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const l=i[s];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},O9=class extends qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Ul),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Sn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Sn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},I9=class extends qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Ul),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},L9=class extends qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Ul),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Sn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},j9=class extends L9{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new M9(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},M9=class extends O9{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new F9(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},F9=class extends I9{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},D9=class extends N9{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new T9(this.url,this.headers,t,this.fetch)}get vectors(){return new j9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new A9(this.url+"/iceberg",this.headers,this.fetch)}};const y4="2.97.0",uo=30*1e3,Lp=3,p0=Lp*uo,U9="http://localhost:9999",z9="supabase.auth.token",B9={"X-Client-Info":`gotrue-js/${y4}`},jp="X-Supabase-Api-Version",v4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V9=10*60*1e3;class Pl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $9 extends Pl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function W9(t){return ue(t)&&t.name==="AuthApiError"}class ds extends Pl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class qr extends Pl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class _n extends qr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g0(t){return ue(t)&&t.name==="AuthSessionMissingError"}class Zs extends qr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sc extends qr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oc extends qr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H9(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class jv extends qr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K9 extends qr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Mp extends qr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function m0(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class Mv extends qr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Fp extends qr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fv=` 	
\r=`.split(""),q9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Fv.length;e+=1)t[Fv[e].charCodeAt(0)]=-2;for(let e=0;e<Zc.length;e+=1)t[Zc[e].charCodeAt(0)]=e;return t})();function Dv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Zc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Zc[r]),e.queuedBits-=6}}function _4(t,e,n){const r=q9[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Uv(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=l=>{Q9(l,r,n)};for(let l=0;l<t.length;l+=1)_4(t.charCodeAt(l),i,s);return e.join("")}function Y9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function X9(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Y9(r,e)}}function Q9(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ao(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)_4(t.charCodeAt(i),n,r);return new Uint8Array(e)}function J9(t){const e=[];return X9(t,n=>e.push(n)),new Uint8Array(e)}function ms(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Dv(i,n,r)),Dv(null,n,r),e.join("")}function Z9(t){return Math.round(Date.now()/1e3)+t}function e7(){return Symbol("auth-callback")}const Ft=()=>typeof window<"u"&&typeof document<"u",ns={tested:!1,writable:!1},w4=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function t7(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const S4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),n7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",co=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},rs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mt=async(t,e)=>{await t.removeItem(e)};class Ad{constructor(){this.promise=new Ad.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ad.promiseConstructor=Promise;function ac(t){const e=t.split(".");if(e.length!==3)throw new Fp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!G9.test(e[r]))throw new Fp("JWT not in base64url format");return{header:JSON.parse(Uv(e[0])),payload:JSON.parse(Uv(e[1])),signature:Ao(e[2]),raw:{header:e[0],payload:e[1]}}}async function r7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function i7(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await t(s);if(!e(s,null,l)){r(l);return}}catch(l){if(!e(s,l)){i(l);return}}})()})}function s7(t){return("0"+t.toString(16)).substr(-2)}function o7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,s7).join("")}async function a7(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function l7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await a7(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function eo(t,e,n=!1){const r=o7();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await co(t,`${e}-code-verifier`,i);const s=await l7(r);return[s,r===s?"plain":"s256"]}const u7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c7(t){const e=t.headers.get(jp);if(!e||!e.match(u7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function d7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function h7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const f7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function to(t){if(!f7.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function y0(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function p7(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function zv(t){return JSON.parse(JSON.stringify(t))}const ls=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g7=[502,503,504];async function Bv(t){var e;if(!n7(t))throw new Mp(ls(t),0);if(g7.includes(t.status))throw new Mp(ls(t),t.status);let n;try{n=await t.json()}catch(s){throw new ds(ls(s),s)}let r;const i=c7(t);if(i&&i.getTime()>=v4["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Mv(ls(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new _n}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new Mv(ls(n),t.status,n.weak_password.reasons);throw new $9(ls(n),t.status||500,r)}const m7=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function pe(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[jp]||(s[jp]=v4["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await y7(t,e,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function y7(t,e,n,r,i,s){const l=m7(e,r,i,s);let u;try{u=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Mp(ls(c),0)}if(u.ok||await Bv(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Bv(c)}}function Zn(t){var e;let n=null;w7(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Z9(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Gv(t){const e=Zn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function v7(t){return{data:t,error:null}}function _7(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,l=Td(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Vv(t){return t}function w7(t){return t.access_token&&t.refresh_token&&t.expires_in}const v0=["global","local","others"];class S7{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=S4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=v0[0]){if(v0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${v0.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wi})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Td(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:_7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wi})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},p=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Vv});if(p.error)throw p.error;const w=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);h[`${E}Page`]=b}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},w),h),error:null}}catch(h){if(ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){to(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wi})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){to(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wi})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){to(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wi})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){to(e.userId);try{const{data:n,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){to(e.userId),to(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},p=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Vv});if(p.error)throw p.error;const w=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);h[`${E}Page`]=b}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},w),h),error:null}}catch(h){if(ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function $v(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const no={debug:!!(globalThis&&w4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class x4 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wv extends x4{}async function x7(t,e,n){no.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;e>0&&setTimeout(()=>{r.abort(),no.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){no.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{no.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw no.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Wv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(no.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}catch(i){throw(i==null?void 0:i.name)==="AbortError"?new Wv(`Acquiring an exclusive Navigator LockManager lock "${t}" timed out waiting ${e}ms`):i}}function k7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function k4(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function C7(t){return parseInt(t,16)}function b7(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function E7(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:l,notBefore:u,requestId:c,resources:h,scheme:p,uri:w,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=k4(t.address),_=p?`${p}://${r}`:r,b=t.statement?`${t.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${v}

${b}`;let C=`URI: ${w}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),h){let x=`
Resources:`;for(const m of h){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);x+=`
- ${m}`}C+=x}return`${E}
${C}`}class mt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class ed extends mt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function P7({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(C4(l)){if(s.rp.id!==l)return new mt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function T7({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(C4(r)){if(n.rpId!==r)return new mt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class R7{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const N7=new R7;function A7(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Td(t,["challenge","user","excludeCredentials"]),s=Ao(e).buffer,l=Object.assign(Object.assign({},n),{id:Ao(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:s,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Ao(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function O7(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Td(t,["challenge","allowCredentials"]),i=Ao(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Ao(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function I7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ms(new Uint8Array(t.response.attestationObject)),clientDataJSON:ms(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function L7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ms(new Uint8Array(i.authenticatorData)),clientDataJSON:ms(new Uint8Array(i.clientDataJSON)),signature:ms(new Uint8Array(i.signature)),userHandle:i.userHandle?ms(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function C4(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Hv(){var t,e;return!!(Ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function j7(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:P7({error:e,options:t})}}}async function M7(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:T7({error:e,options:t})}}}const F7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},D7={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function td(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const l=i[s];if(l!==void 0)if(Array.isArray(l))r[s]=l;else if(n(l))r[s]=l;else if(e(l)){const u=r[s];e(u)?r[s]=td(u,l):r[s]=td(l)}else r[s]=l}return r}function U7(t,e){return td(F7,t,e||{})}function z7(t,e){return td(D7,t,e||{})}class B7{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){var l;try{const{data:u,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:c};const h=i??N7.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const w=r;if(w)p.name=`${p.id}:${w}`;else{const v=(await this.client.getUser()).data.user,_=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${_}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=U7(u.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:w,error:y}=await j7({publicKey:p,signal:h});return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:y}}case"request":{const p=z7(u.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:w,error:y}=await M7(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:y}}}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new ds("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Pl("rpId is required for WebAuthn authentication")};try{if(!Hv())return{data:null,error:new ds("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new ds("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Pl("rpId is required for WebAuthn registration")};try{if(!Hv())return{data:null,error:new ds("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var w;return(w=p.data)===null||w===void 0?void 0:w.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:c,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new ds("Unexpected error in register",l)}}}}k7();const G7={url:U9,storageKey:z9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Kv(t,e,n){return await n()}const ro={};class Tl{get jwks(){var e,n;return(n=(e=ro[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ro[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},G7),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Tl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ft()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new S7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=S4(s.fetch),this.lock=s.lock||Kv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ft()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=x7:this.lock=Kv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new B7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:w4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$v(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$v(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}s.skipAutoInitialize||this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${y4}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ft()&&(n=t7(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ft()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),H9(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?this._returnResult({error:n}):this._returnResult({error:new ds("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Zn}),{data:l,error:u}=s;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:p,password:w,options:y}=e;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await eo(this.storage,this.storageKey)),s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:w,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:_},xform:Zn})}else if("phone"in e){const{phone:p,password:w,options:y}=e;s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:w,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Zn})}else throw new sc("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u||!l)return await Mt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:l,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Gv})}else if("phone"in e){const{phone:s,password:l,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Gv})}else throw new sc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Zs;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,l,u,c,h,p,w,y;let v,_;if("message"in e)v=e.message,_=e.signature;else{const{chain:b,wallet:E,statement:C,options:x}=e;let m;if(Ft())if(typeof E=="object")m=E;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")m=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=E}const k=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),R=await m.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=k4(R[0]);let O=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const U=await m.request({method:"eth_chainId"});O=C7(U)}const A={domain:k.host,address:N,statement:C,uri:k.href,version:"1",chainId:O,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=x==null?void 0:x.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=E7(A),_=await m.request({method:"personal_sign",params:[b7(v),N]})}try{const{data:b,error:E}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:_},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Zn});if(E)throw E;if(!b||!b.session||!b.user){const C=new Zs;return this._returnResult({data:{user:null,session:null},error:C})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:E})}catch(b){if(ue(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var n,r,i,s,l,u,c,h,p,w,y,v;let _,b;if("message"in e)_=e.message,b=e.signature;else{const{chain:E,wallet:C,statement:x,options:m}=e;let k;if(Ft())if(typeof C=="object")k=C;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))k=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=C}const R=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const N=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),x?{statement:x}:null));let O;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")O=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)O=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)_=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),b=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${R.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=m==null?void 0:m.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((h=m==null?void 0:m.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((w=(p=m==null?void 0:m.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||w===void 0)&&w.length?["Resources",...m.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const N=await k.signMessage(new TextEncoder().encode(_),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=N}}try{const{data:E,error:C}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ms(b)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Zn});if(C)throw C;if(!E||!E.session||!E.user){const x=new Zs;return this._returnResult({data:{user:null,session:null},error:x})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(ue(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await rs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new K9;const{data:s,error:l}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Zn});if(await Mt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const u=new Zs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:l})}catch(s){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:l}=e,u=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zn}),{data:c,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c||!c.session||!c.user){const p=new Zs;return this._returnResult({data:{user:null,session:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:h})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,l;try{if("email"in e){const{email:u,options:c}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await eo(this.storage,this.storageKey));const{error:w}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:p}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new sc("You must provide either an email or phone number.")}catch(u){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Zn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,l;try{let u=null,c=null;this.flowType==="pkce"&&([u,c]=await eo(this.storage,this.storageKey));const h=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:c}),headers:this.headers,xform:v7});return!((s=h.data)===null||s===void 0)&&s.url&&Ft()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new _n;const{error:i}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:l}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:l,error:u}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new sc("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<p0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await rs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=y0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=p7(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wi}):await this._useSession(async n=>{var r,i,s;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _n}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:wi})})}catch(n){if(ue(n))return g0(n)&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new _n;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await eo(this.storage,this.storageKey));const{data:h,error:p}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:wi});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _n;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:l}=ac(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new _n;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ft())throw new oc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jv("No code detected.");const{data:x,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=e;if(!s||!u||!l||!h)throw new oc("No session defined in URL");const p=Math.round(Date.now()/1e3),w=parseInt(u);let y=p+w;c&&(y=parseInt(c));const v=y-p;v*1e3<=uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${w}s`);const _=y-w;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,y,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,y,p);const{data:b,error:E}=await this._getUser(s);if(E)throw E;const C={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:w,expires_at:y,refresh_token:l,token_type:h,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await rs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s&&!g0(s))return this._returnResult({error:s});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(W9(u)&&(u.status===404||u.status===401||u.status===403)||g0(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=e7(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await eo(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var l,u,c,h,p;const{data:w,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=w.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Ft()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ue(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:h,nonce:p}=e,w=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zn}),{data:y,error:v}=w;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Zs}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(i){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)throw l;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await i7(async i=>(i>0&&await r7(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zn})),(i,s)=>{const l=200*Math.pow(2,i);return s&&m0(s)&&Date.now()+l-r<uo})}catch(r){if(this._debug(n,"error",r),ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ft()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await rs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await co(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:y0()}else if(i&&!i.user&&!i.user){const l=await rs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Mt(this.storage,this.storageKey+"-user"),await co(this.storage,this.storageKey,i)):i.user=y0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<p0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${p0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),m0(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new _n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ad;const{data:s,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!s.session)throw new _n;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),ue(s)){const l={data:null,error:s};return m0(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){s.push(c)}});if(await Promise.all(l),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Mt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await co(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=zv(i);await co(this.storage,this.storageKey,s)}else{const i=zv(n);await co(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mt(this.storage,this.storageKey),await Mt(this.storage,this.storageKey+"-code-verifier"),await Mt(this.storage,this.storageKey+"-user"),this.userStorage&&await Mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),uo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${uo}ms, refresh threshold is ${Lp} ticks`),i<=Lp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof x4)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,l]=await eo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:h}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?I7(e.webauthn.credential_response):L7(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:c}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:c}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const l=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:A7(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:O7(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,s;if(e)try{const{payload:v}=ac(e);let _=null;v.aal&&(_=v.aal);let b=_;const{data:{user:E},error:C}=await this.getUser(e);if(C)return this._returnResult({data:null,error:C});((r=(n=E==null?void 0:E.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const m=v.amr||[];return{data:{currentLevel:_,nextLevel:b,currentAuthenticationMethods:m},error:null}}catch(v){if(ue(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=ac(l.access_token);let h=null;c.aal&&(h=c.aal);let p=h;((s=(i=l.user.factors)===null||i===void 0?void 0:i.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=c.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new _n})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new _n});const l=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new _n});const l=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new _n})})}catch(e){if(ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new _n})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+V9>i)return r;const{data:s,error:l}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:_}=await this.getSession();if(_||!v.session)return this._returnResult({data:null,error:_});r=v.session.access_token}const{header:i,payload:s,signature:l,raw:{header:u,payload:c}}=ac(r);n!=null&&n.allowExpired||d7(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:l},error:null}}const p=h7(i.alg),w=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,w,l,J9(`${u}.${c}`)))throw new Fp("Invalid JWT signature");return{data:{claims:s,header:i,signature:l},error:null}}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}}Tl.nextInstanceID={};const V7=Tl,$7="2.97.0";let Ga="";typeof Deno<"u"?Ga="deno":typeof document<"u"?Ga="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ga="react-native":Ga="node";const W7={"X-Client-Info":`supabase-js-${Ga}/${$7}`},H7={headers:W7},K7={schema:"public"},q7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y7={};function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function X7(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q7(t){var e=X7(t,"string");return Rl(e)=="symbol"?e:e+""}function J7(t,e,n){return(e=Q7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qv(Object(n),!0).forEach(function(r){J7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Z7=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ek=()=>Headers,tk=(t,e,n)=>{const r=Z7(n),i=ek();return async(s,l)=>{var u;const c=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(s,lt(lt({},l),{},{headers:h}))}};function nk(t){return t.endsWith("/")?t:t+"/"}function rk(t,e){var n,r;const{db:i,auth:s,realtime:l,global:u}=t,{db:c,auth:h,realtime:p,global:w}=e,y={db:lt(lt({},c),i),auth:lt(lt({},h),s),realtime:lt(lt({},p),l),storage:{},global:lt(lt(lt({},w),u),{},{headers:lt(lt({},(n=w==null?void 0:w.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function ik(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nk(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var sk=class extends V7{constructor(t){super(t)}},ok=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=ik(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:K7,realtime:Y7,auth:lt(lt({},q7),{},{storageKey:l}),global:H7},c=rk(n??{},u);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(p,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=c.auth)!==null&&h!==void 0?h:{},this.headers,c.global.fetch)}this.fetch=tk(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new Wx(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new D9(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Fx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:l,lock:u,debug:c,throwOnError:h},p,w){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sk({url:this.authUrl.href,headers:lt(lt({},y),p),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:u,debug:c,throwOnError:h,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new l9(this.realtimeUrl.href,lt(lt({},t),{},{params:lt(lt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ak=(t,e,n)=>new ok(t,e,n);function lk(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}lk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uk="https://gctgqshdjedqqrnnwprp.supabase.co",ck="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdjdGdxc2hkamVkcXFybm53cHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3OTAwNjIsImV4cCI6MjA4NzM2NjA2Mn0.OIYXlSn8SN8bPkVuyKobcxfxJ6vUUBC35SDxZb7V4Hk",nl=ak(uk,ck),b4=W.createContext(void 0);function dk({children:t}){const[e,n]=W.useState(null),[r,i]=W.useState(null),[s,l]=W.useState(!0);W.useEffect(()=>{nl.auth.getSession().then(({data:{session:p}})=>{n(p),i((p==null?void 0:p.user)??null),l(!1)});const{data:{subscription:h}}=nl.auth.onAuthStateChange((p,w)=>{n(w),i((w==null?void 0:w.user)??null),l(!1)});return()=>h.unsubscribe()},[]);const c={session:e,user:r,loading:s,signOut:async()=>{await nl.auth.signOut()}};return P.jsx(b4.Provider,{value:c,children:t})}function hk(){const t=W.useContext(b4);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}var E4={exports:{}},Od={},nd={},ke={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof sy<"u"?sy:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const r=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(ke);var at={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ke;class n{constructor(k=[1,0,0,1,0,0]){this.dirty=!1,this.m=k&&k.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(k){k.m[0]=this.m[0],k.m[1]=this.m[1],k.m[2]=this.m[2],k.m[3]=this.m[3],k.m[4]=this.m[4],k.m[5]=this.m[5]}point(k){const R=this.m;return{x:R[0]*k.x+R[2]*k.y+R[4],y:R[1]*k.x+R[3]*k.y+R[5]}}translate(k,R){return this.m[4]+=this.m[0]*k+this.m[2]*R,this.m[5]+=this.m[1]*k+this.m[3]*R,this}scale(k,R){return this.m[0]*=k,this.m[1]*=k,this.m[2]*=R,this.m[3]*=R,this}rotate(k){const R=Math.cos(k),N=Math.sin(k),O=this.m[0]*R+this.m[2]*N,A=this.m[1]*R+this.m[3]*N,U=this.m[0]*-N+this.m[2]*R,I=this.m[1]*-N+this.m[3]*R;return this.m[0]=O,this.m[1]=A,this.m[2]=U,this.m[3]=I,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(k,R){const N=this.m[0]+this.m[2]*R,O=this.m[1]+this.m[3]*R,A=this.m[2]+this.m[0]*k,U=this.m[3]+this.m[1]*k;return this.m[0]=N,this.m[1]=O,this.m[2]=A,this.m[3]=U,this}multiply(k){const R=this.m[0]*k.m[0]+this.m[2]*k.m[1],N=this.m[1]*k.m[0]+this.m[3]*k.m[1],O=this.m[0]*k.m[2]+this.m[2]*k.m[3],A=this.m[1]*k.m[2]+this.m[3]*k.m[3],U=this.m[0]*k.m[4]+this.m[2]*k.m[5]+this.m[4],I=this.m[1]*k.m[4]+this.m[3]*k.m[5]+this.m[5];return this.m[0]=R,this.m[1]=N,this.m[2]=O,this.m[3]=A,this.m[4]=U,this.m[5]=I,this}invert(){const k=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),R=this.m[3]*k,N=-this.m[1]*k,O=-this.m[2]*k,A=this.m[0]*k,U=k*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),I=k*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=R,this.m[1]=N,this.m[2]=O,this.m[3]=A,this.m[4]=U,this.m[5]=I,this}getMatrix(){return this.m}decompose(){const k=this.m[0],R=this.m[1],N=this.m[2],O=this.m[3],A=this.m[4],U=this.m[5],I=k*O-R*N,K={x:A,y:U,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(k!=0||R!=0){const M=Math.sqrt(k*k+R*R);K.rotation=R>0?Math.acos(k/M):-Math.acos(k/M),K.scaleX=M,K.scaleY=I/M,K.skewX=(k*N+R*O)/I,K.skewY=0}else if(N!=0||O!=0){const M=Math.sqrt(N*N+O*O);K.rotation=Math.PI/2-(O>0?Math.acos(-N/M):-Math.acos(N/M)),K.scaleX=I/M,K.scaleY=M,K.skewX=0,K.skewY=(k*N+R*O)/I}return K.rotation=t.Util._getRotation(K.rotation),K}}t.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",l="[object Boolean]",u=Math.PI/180,c=180/Math.PI,h="#",p="",w="0",y="Konva warning: ",v="Konva error: ",_="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)};t.Util={_isElement(m){return!!(m&&m.nodeType==1)},_isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject(m){return!!m&&m.constructor===Object},_isArray(m){return Object.prototype.toString.call(m)===r},_isNumber(m){return Object.prototype.toString.call(m)===i&&!isNaN(m)&&isFinite(m)},_isString(m){return Object.prototype.toString.call(m)===s},_isBoolean(m){return Object.prototype.toString.call(m)===l},isObject(m){return m instanceof Object},isValidSelector(m){if(typeof m!="string")return!1;const k=m[0];return k==="#"||k==="."||k===k.toUpperCase()},_sign(m){return m===0||m>0?1:-1},requestAnimFrame(m){C.push(m),C.length===1&&x(function(){const k=C;C=[],k.forEach(function(R){R()})})},createCanvasElement(){const m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement(){return document.createElement("img")},_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,k){const R=t.Util.createImageElement();R.onload=function(){k(R)},R.src=m},_rgbToHex(m,k,R){return((1<<24)+(m<<16)+(k<<8)+R).toString(16).slice(1)},_hexToRgb(m){m=m.replace(h,p);const k=parseInt(m,16);return{r:k>>16&255,g:k>>8&255,b:k&255}},getRandomColor(){let m=(Math.random()*16777215<<0).toString(16);for(;m.length<6;)m=w+m;return h+m},getRGB(m){let k;return m in b?(k=b[m],{r:k[0],g:k[1],b:k[2]}):m[0]===h?this._hexToRgb(m.substring(1)):m.substr(0,4)===_?(k=E.exec(m.replace(/ /g,"")),{r:parseInt(k[1],10),g:parseInt(k[2],10),b:parseInt(k[3],10)}):{r:0,g:0,b:0}},colorToRGBA(m){return m=m||"black",t.Util._namedColorToRBA(m)||t.Util._hex3ColorToRGBA(m)||t.Util._hex4ColorToRGBA(m)||t.Util._hex6ColorToRGBA(m)||t.Util._hex8ColorToRGBA(m)||t.Util._rgbColorToRGBA(m)||t.Util._rgbaColorToRGBA(m)||t.Util._hslColorToRGBA(m)},_namedColorToRBA(m){const k=b[m.toLowerCase()];return k?{r:k[0],g:k[1],b:k[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];const k=m.split(/ *, */).map(Number);return{r:k[0],g:k[1],b:k[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];const k=m.split(/ *, */).map((R,N)=>R.slice(-1)==="%"?N===3?parseInt(R)/100:parseInt(R)/100*255:Number(R));return{r:k[0],g:k[1],b:k[2],a:k[3]}}},_hex8ColorToRGBA(m){if(m[0]==="#"&&m.length===9)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:parseInt(m.slice(7,9),16)/255}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex4ColorToRGBA(m){if(m[0]==="#"&&m.length===5)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:parseInt(m[4]+m[4],16)/255}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[k,...R]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),N=Number(R[0])/360,O=Number(R[1])/100,A=Number(R[2])/100;let U,I,K;if(O===0)return K=A*255,{r:Math.round(K),g:Math.round(K),b:Math.round(K),a:1};A<.5?U=A*(1+O):U=A+O-A*O;const M=2*A-U,V=[0,0,0];for(let z=0;z<3;z++)I=N+1/3*-(z-1),I<0&&I++,I>1&&I--,6*I<1?K=M+(U-M)*6*I:2*I<1?K=U:3*I<2?K=M+(U-M)*(2/3-I)*6:K=M,V[z]=K*255;return{r:Math.round(V[0]),g:Math.round(V[1]),b:Math.round(V[2]),a:1}}},haveIntersection(m,k){return!(k.x>m.x+m.width||k.x+k.width<m.x||k.y>m.y+m.height||k.y+k.height<m.y)},cloneObject(m){const k={};for(const R in m)this._isPlainObject(m[R])?k[R]=this.cloneObject(m[R]):this._isArray(m[R])?k[R]=this.cloneArray(m[R]):k[R]=m[R];return k},cloneArray(m){return m.slice(0)},degToRad(m){return m*u},radToDeg(m){return m*c},_degToRad(m){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(m)},_radToDeg(m){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(m)},_getRotation(m){return e.Konva.angleDeg?t.Util.radToDeg(m):m},_capitalize(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw(m){throw new Error(v+m)},error(m){console.error(v+m)},warn(m){e.Konva.showWarnings&&console.warn(y+m)},each(m,k){for(const R in m)k(R,m[R])},_inRange(m,k,R){return k<=m&&m<R},_getProjectionToSegment(m,k,R,N,O,A){let U,I,K;const M=(m-R)*(m-R)+(k-N)*(k-N);if(M==0)U=m,I=k,K=(O-R)*(O-R)+(A-N)*(A-N);else{const V=((O-m)*(R-m)+(A-k)*(N-k))/M;V<0?(U=m,I=k,K=(m-O)*(m-O)+(k-A)*(k-A)):V>1?(U=R,I=N,K=(R-O)*(R-O)+(N-A)*(N-A)):(U=m+V*(R-m),I=k+V*(N-k),K=(U-O)*(U-O)+(I-A)*(I-A))}return[U,I,K]},_getProjectionToLine(m,k,R){const N=t.Util.cloneObject(m);let O=Number.MAX_VALUE;return k.forEach(function(A,U){if(!R&&U===k.length-1)return;const I=k[(U+1)%k.length],K=t.Util._getProjectionToSegment(A.x,A.y,I.x,I.y,m.x,m.y),M=K[0],V=K[1],z=K[2];z<O&&(N.x=M,N.y=V,O=z)}),N},_prepareArrayForTween(m,k,R){const N=[],O=[];if(m.length>k.length){const U=k;k=m,m=U}for(let U=0;U<m.length;U+=2)N.push({x:m[U],y:m[U+1]});for(let U=0;U<k.length;U+=2)O.push({x:k[U],y:k[U+1]});const A=[];return O.forEach(function(U){const I=t.Util._getProjectionToLine(U,N,R);A.push(I.x),A.push(I.y)}),A},_prepareToStringify(m){let k;m.visitedByCircularReferenceRemoval=!0;for(const R in m)if(m.hasOwnProperty(R)&&m[R]&&typeof m[R]=="object"){if(k=Object.getOwnPropertyDescriptor(m,R),m[R].visitedByCircularReferenceRemoval||t.Util._isElement(m[R]))if(k.configurable)delete m[R];else return null;else if(t.Util._prepareToStringify(m[R])===null)if(k.configurable)delete m[R];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,k){for(const R in k)m[R]=k[R];return m},_getFirstPointerId(m){return m.touches?m.changedTouches[0].identifier:m.pointerId||999},releaseCanvas(...m){e.Konva.releaseCanvasOnDestroy&&m.forEach(k=>{k.width=0,k.height=0})},drawRoundedRectPath(m,k,R,N){let O=0,A=0,U=0,I=0;typeof N=="number"?O=A=U=I=Math.min(N,k/2,R/2):(O=Math.min(N[0]||0,k/2,R/2),A=Math.min(N[1]||0,k/2,R/2),I=Math.min(N[2]||0,k/2,R/2),U=Math.min(N[3]||0,k/2,R/2)),m.moveTo(O,0),m.lineTo(k-A,0),m.arc(k-A,A,A,Math.PI*3/2,0,!1),m.lineTo(k,R-I),m.arc(k-I,R-I,I,0,Math.PI/2,!1),m.lineTo(U,R),m.arc(U,R-U,U,Math.PI/2,Math.PI,!1),m.lineTo(0,O),m.arc(O,O,O,Math.PI,Math.PI*3/2,!1)}}})(at);var tt={},lr={},Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.HitContext=Gr.SceneContext=Gr.Context=void 0;const P4=at,fk=ke;function pk(t){const e=[],n=t.length,r=P4.Util;for(let i=0;i<n;i++){let s=t[i];r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s)}return e}const Yv=",",gk="(",mk=")",yk="([",vk="])",_k=";",wk="()",Sk="=",Xv=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],xk=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],kk=100;class Id{constructor(e){this.canvas=e,fk.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let r=this.traceArr,i=r.length,s="",l,u,c,h;for(l=0;l<i;l++)u=r[l],c=u.method,c?(h=u.args,s+=c,e?s+=wk:P4.Util._isArray(h[0])?s+=yk+h.join(Yv)+vk:(n&&(h=h.map(p=>typeof p=="number"?Math.floor(p):p)),s+=gk+h.join(Yv)+mk)):(s+=u.property,e||(s+=Sk+u.val)),s+=_k;return s}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,r;n.push(e),r=n.length,r>=kk&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,l){this._context.arc(e,n,r,i,s,l)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,l){this._context.bezierCurveTo(e,n,r,i,s,l)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,l){return this._context.createRadialGradient(e,n,r,i,s,l)}drawImage(e,n,r,i,s,l,u,c,h){const p=arguments,w=this._context;p.length===3?w.drawImage(e,n,r):p.length===5?w.drawImage(e,n,r,i,s):p.length===9&&w.drawImage(e,n,r,i,s,l,u,c,h)}ellipse(e,n,r,i,s,l,u,c){this._context.ellipse(e,n,r,i,s,l,u,c)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}roundRect(e,n,r,i,s){this._context.roundRect(e,n,r,i,s)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,l){this._context.setTransform(e,n,r,i,s,l)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,l){this._context.transform(e,n,r,i,s,l)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=Xv.length,r=this.setAttr,i,s;const l=function(u){let c=e[u],h;e[u]=function(){return s=pk(Array.prototype.slice.call(arguments,0)),h=c.apply(e,arguments),e._trace({method:u,args:s}),h}};for(i=0;i<n;i++)l(Xv[i]);e.setAttr=function(){r.apply(e,arguments);const u=arguments[0];let c=arguments[1];(u==="shadowOffsetX"||u==="shadowOffsetY"||u==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:u,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Gr.Context=Id;xk.forEach(function(t){Object.defineProperty(Id.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Ck extends Id{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const l=e.getFillRadialGradientColorStops();if(l&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):l&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(let l=0;l<i.length;l+=2)s.addColorStop(i[l],i[l+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i;const s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",l=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,u=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},c=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),p=c.x*h,w=c.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",l*Math.min(Math.abs(p),Math.abs(w))),this.setAttr("shadowOffsetX",u.x*p),this.setAttr("shadowOffsetY",u.y*w)}}Gr.SceneContext=Ck;class bk extends Id{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}Gr.HitContext=bk;Object.defineProperty(lr,"__esModule",{value:!0});lr.HitCanvas=lr.SceneCanvas=lr.Canvas=void 0;const rd=at,T4=Gr,R4=ke;let lc;function Ek(){if(lc)return lc;const t=rd.Util.createCanvasElement(),e=t.getContext("2d");return lc=function(){const n=R4.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),rd.Util.releaseCanvas(t),lc}class Xg{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(e||{}).pixelRatio||R4.Konva.pixelRatio||Ek();this.pixelRatio=r,this._canvas=rd.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return rd.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}lr.Canvas=Xg;class Pk extends Xg{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new T4.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}lr.SceneCanvas=Pk;class Tk extends Xg{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new T4.HitContext(this),this.setSize(e.width,e.height)}}lr.HitCanvas=Tk;var Ld={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ke,n=at;t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];t.DD._dragElements.forEach((s,l)=>{const{node:u}=s,c=u.getStage();c.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const h=c._changedPointerPositions.find(p=>p.id===s.pointerId);if(h){if(s.dragStatus!=="dragging"){const p=u.dragDistance();if(Math.max(Math.abs(h.x-s.startPointerPos.x),Math.abs(h.y-s.startPointerPos.y))<p||(u.startDrag({evt:r}),!u.isDragging()))return}u._setDragPosition(r,s),i.push(u)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];t.DD._dragElements.forEach(s=>{const{node:l}=s,u=l.getStage();if(r&&u.setPointersPositions(r),!u._changedPointerPositions.find(p=>p.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;h&&i.indexOf(h)===-1&&i.push(h)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Ld);var Ee={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.RGBComponent=Rk;ge.alphaComponent=Nk;ge.getNumberValidator=Ak;ge.getNumberOrArrayOfNumbersValidator=Ok;ge.getNumberOrAutoValidator=Ik;ge.getStringValidator=Lk;ge.getStringOrGradientValidator=jk;ge.getFunctionValidator=Mk;ge.getNumberArrayValidator=Fk;ge.getBooleanValidator=Dk;ge.getComponentValidator=Uk;const Yr=ke,ct=at;function Xr(t){return ct.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ct.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Rk(t){return t>255?255:t<0?0:Math.round(t)}function Nk(t){return t>1?1:t<1e-4?1e-4:t}function Ak(){if(Yr.Konva.isUnminified)return function(t,e){return ct.Util._isNumber(t)||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Ok(t){if(Yr.Konva.isUnminified)return function(e,n){let r=ct.Util._isNumber(e),i=ct.Util._isArray(e)&&e.length==t;return!r&&!i&&ct.Util.warn(Xr(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Ik(){if(Yr.Konva.isUnminified)return function(t,e){return ct.Util._isNumber(t)||t==="auto"||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Lk(){if(Yr.Konva.isUnminified)return function(t,e){return ct.Util._isString(t)||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function jk(){if(Yr.Konva.isUnminified)return function(t,e){const n=ct.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Mk(){if(Yr.Konva.isUnminified)return function(t,e){return ct.Util._isFunction(t)||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function Fk(){if(Yr.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(ct.Util._isArray(t)?t.forEach(function(r){ct.Util._isNumber(r)||ct.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Dk(){if(Yr.Konva.isUnminified)return function(t,e){return t===!0||t===!1||ct.Util.warn(Xr(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Uk(t){if(Yr.Konva.isUnminified)return function(e,n){return e==null||ct.Util.isObject(e)||ct.Util.warn(Xr(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=at,n=ge,r="get",i="set";t.Factory={addGetterSetter(s,l,u,c,h){t.Factory.addGetter(s,l,u),t.Factory.addSetter(s,l,c,h),t.Factory.addOverloadedGetterSetter(s,l)},addGetter(s,l,u){const c=r+e.Util._capitalize(l);s.prototype[c]=s.prototype[c]||function(){const h=this.attrs[l];return h===void 0?u:h}},addSetter(s,l,u,c){const h=i+e.Util._capitalize(l);s.prototype[h]||t.Factory.overWriteSetter(s,l,u,c)},overWriteSetter(s,l,u,c){const h=i+e.Util._capitalize(l);s.prototype[h]=function(p){return u&&p!==void 0&&p!==null&&(p=u.call(this,p,l)),this._setAttr(l,p),c&&c.call(this),this}},addComponentsGetterSetter(s,l,u,c,h){const p=u.length,w=e.Util._capitalize,y=r+w(l),v=i+w(l);s.prototype[y]=function(){const b={};for(let E=0;E<p;E++){const C=u[E];b[C]=this.getAttr(l+w(C))}return b};const _=(0,n.getComponentValidator)(u);s.prototype[v]=function(b){const E=this.attrs[l];c&&(b=c.call(this,b,l)),_&&_.call(this,b,l);for(const C in b)b.hasOwnProperty(C)&&this._setAttr(l+w(C),b[C]);return b||u.forEach(C=>{this._setAttr(l+w(C),void 0)}),this._fireChangeEvent(l,E,b),h&&h.call(this),this},t.Factory.addOverloadedGetterSetter(s,l)},addOverloadedGetterSetter(s,l){const u=e.Util._capitalize(l),c=i+u,h=r+u;s.prototype[l]=function(){return arguments.length?(this[c](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(s,l,u,c){e.Util.error("Adding deprecated "+l);const h=r+e.Util._capitalize(l),p=l+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[h]=function(){e.Util.error(p);const w=this.attrs[l];return w===void 0?u:w},t.Factory.addSetter(s,l,c,function(){e.Util.error(p)}),t.Factory.addOverloadedGetterSetter(s,l)},backCompat(s,l){e.Util.each(l,function(u,c){const h=s.prototype[c],p=r+e.Util._capitalize(u),w=i+e.Util._capitalize(u);function y(){h.apply(this,arguments),e.Util.error('"'+u+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}s.prototype[u]=y,s.prototype[p]=y,s.prototype[w]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(Ee);Object.defineProperty(tt,"__esModule",{value:!0});tt.Node=void 0;const io=lr,Mn=Ld,zl=Ee,di=ke,Te=at,pt=ge,bc="absoluteOpacity",uc="allEventListeners",jr="absoluteTransform",Qv="absoluteScale",is="canvas",zk="Change",Bk="children",Gk="konva",Dp="listening",Vk="mouseenter",$k="mouseleave",Wk="pointerenter",Hk="pointerleave",Kk="touchenter",qk="touchleave",Jv="set",Zv="Shape",Ec=" ",e2="stage",pi="transform",Yk="Stage",Up="visible",Xk=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ec);let Qk=1;class ye{constructor(e){this._id=Qk++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===pi||e===jr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let r=this._cache.get(e);return(r===void 0||(e===pi||e===jr)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(Ec);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(is)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===jr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(is)){const{scene:e,filter:n,hit:r,buffer:i}=this._cache.get(is);Te.Util.releaseCanvas(e,n,r,i),this._cache.delete(is)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),l=n.pixelRatio,u=n.x===void 0?Math.floor(r.x):n.x,c=n.y===void 0?Math.floor(r.y):n.y,h=n.offset||0,p=n.drawBorder||!1,w=n.hitCanvasPixelRatio||1;if(!i||!s){Te.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(r.x)-u)>.5?1:0,v=Math.abs(Math.round(r.y)-c)>.5?1:0;i+=h*2+y,s+=h*2+v,u-=h,c-=h;const _=new io.SceneCanvas({pixelRatio:l,width:i,height:s}),b=new io.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),E=new io.HitCanvas({pixelRatio:w,width:i,height:s}),C=_.getContext(),x=E.getContext(),m=new io.SceneCanvas({width:_.width/_.pixelRatio+Math.abs(u),height:_.height/_.pixelRatio+Math.abs(c),pixelRatio:_.pixelRatio}),k=m.getContext();return E.isCache=!0,_.isCache=!0,this._cache.delete(is),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),C.save(),x.save(),k.save(),C.translate(-u,-c),x.translate(-u,-c),k.translate(-u,-c),m.x=u,m.y=c,this._isUnderCache=!0,this._clearSelfAndDescendantCache(bc),this._clearSelfAndDescendantCache(Qv),this.drawScene(_,this,m),this.drawHit(E,this),this._isUnderCache=!1,C.restore(),x.restore(),p&&(C.save(),C.beginPath(),C.rect(0,0,i,s),C.closePath(),C.setAttr("strokeStyle","red"),C.setAttr("lineWidth",5),C.stroke(),C.restore()),this._cache.set(is,{scene:_,filter:b,hit:E,buffer:m,x:u,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(is)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let i=1/0,s=1/0,l=-1/0,u=-1/0;const c=this.getAbsoluteTransform(n);return r.forEach(function(h){const p=c.point(h);i===void 0&&(i=l=p.x,s=u=p.y),i=Math.min(i,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y)}),{x:i,y:s,width:l-i,height:u-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),l,u,c,h;if(e){if(!this._filterUpToDate){const p=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(l=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/p,r.getHeight()/p),u=s.getImageData(0,0,i.getWidth(),i.getHeight()),c=0;c<l;c++){if(h=e[c],typeof h!="function"){Te.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,u),s.putImageData(u,0,0)}}catch(w){Te.Util.error("Unable to apply filter. "+w.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(uc),arguments.length===3)return this._delegate.apply(this,arguments);const r=e.split(Ec);for(let i=0;i<r.length;i++){const l=r[i].split("."),u=l[0],c=l[1]||"";this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:c,handler:n})}return this}off(e,n){let r=(e||"").split(Ec),i=r.length,s,l,u,c,h,p;if(this._cache&&this._cache.delete(uc),!e)for(l in this.eventListeners)this._off(l);for(s=0;s<i;s++)if(u=r[s],c=u.split("."),h=c[0],p=c[1],h)this.eventListeners[h]&&this._off(h,p,n);else for(l in this.eventListeners)this._off(l,p,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){const i=this;this.on(e,function(s){const l=s.target.findAncestors(n,!0,i);for(let u=0;u<l.length;u++)s=Te.Util.cloneObject(s),s.currentTarget=l[u],r.call(l[u],s)})}remove(){return this.isDragging()&&this.stopDrag(),Mn.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(jr),this._clearSelfAndDescendantCache(bc),this._clearSelfAndDescendantCache(Qv),this._clearSelfAndDescendantCache(e2),this._clearSelfAndDescendantCache(Up),this._clearSelfAndDescendantCache(Dp)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+Te.Util._capitalize(e);return Te.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,r;if(!e)return this;for(n in e)n!==Bk&&(r=Jv+Te.Util._capitalize(n),Te.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Dp,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(Up,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const r=this.getLayer();let i=!1;Mn.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===r)&&(i=!0)});const s=!n&&!di.Konva.hitOnDragEnabled&&(i||di.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,r=0,i,s,l,u;function c(p){for(i=[],s=p.length,l=0;l<s;l++)u=p[l],r++,u.nodeType!==Zv&&(i=i.concat(u.getChildren().slice())),u._id===n._id&&(l=s);i.length>0&&i[0].getDepth()<=e&&c(i)}const h=this.getStage();return n.nodeType!==Yk&&h&&c(h.getChildren()),r}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(pi),this._clearSelfAndDescendantCache(jr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);const i=this.getAbsoluteTransform(e).getMatrix(),s=new Te.Transform,l=this.offset();return s.m=i.slice(),s.translate(l.x,l.y),s.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(pi);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(pi),this._clearSelfAndDescendantCache(jr),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){let r=[],i=this.getParent(),s,l;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,l=0;l<s;l++)e(r[l])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Te.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Te.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Te.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Te.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(bc,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,r,i,s,l;const u={attrs:{},className:this.getClassName()};for(n in e)r=e[n],l=Te.Util.isObject(r)&&!Te.Util._isPlainObject(r)&&!Te.Util._isArray(r),!l&&(i=typeof this[n]=="function"&&this[n],delete e[n],s=i?i.call(this):null,e[n]=r,s!==r&&(u.attrs[n]=r));return Te.Util._prepareToStringify(u)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){const i=[];n&&this._isMatch(e)&&i.push(this);let s=this.parent;for(;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],Te.Util.isValidSelector(s)||(Te.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Te.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Te.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(e2,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(jr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new Te.Transform,this._eachAncestorReverse(function(r){const i=r.transformsEnabled();i==="all"?n.multiply(r.getTransform()):i==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),n;{n=this._cache.get(jr)||new Te.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,l=this.attrs.offsetX||0,u=this.attrs.offsetY||0;n.translate(i-l,s-u)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(pi,this._getTransform)}_getTransform(){var e,n;const r=this._cache.get(pi)||new Te.Transform;r.reset();const i=this.x(),s=this.y(),l=di.Konva.getAngle(this.rotation()),u=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,h=this.attrs.skewX||0,p=this.attrs.skewY||0,w=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),l!==0&&r.rotate(l),(h!==0||p!==0)&&r.skew(h,p),(u!==1||c!==1)&&r.scale(u,c),(w!==0||y!==0)&&r.translate(-1*w,-1*y),r.dirty=!1,r}clone(e){let n=Te.Util.cloneObject(this.attrs),r,i,s,l,u;for(r in e)n[r]=e[r];const c=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,l=0;l<s;l++)u=i[l],u.name.indexOf(Gk)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(u));return c}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),l=e.pixelRatio||1,u=new io.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:l}),c=u.getContext(),h=new io.SceneCanvas({width:u.width/u.pixelRatio+Math.abs(i),height:u.height/u.pixelRatio+Math.abs(s),pixelRatio:u.pixelRatio});return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(i||s)&&c.translate(-1*i,-1*s),this.drawScene(u,void 0,h),c.restore(),u}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,Te.Util._urlToImage(this.toDataURL(e),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),i==null||i(s)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():di.Konva.dragDistance}_off(e,n,r){let i=this.eventListeners[e],s,l,u;for(s=0;s<i.length;s++)if(l=i[s].name,u=i[s].handler,(l!=="konva"||n==="konva")&&(!n||l===n)&&(!r||r===u)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+zk,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){const n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){const r=this[Jv+Te.Util._capitalize(e)];return Te.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(di.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){const r=this.attrs[e];r===n&&!Te.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){let i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===Zv&&(n.target=this);const i=[Vk,$k,Wk,Hk,Kk,qk];if(!(i.indexOf(e)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,n);const l=i.indexOf(e)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,i;const s=(n=this._cache.get(uc))!==null&&n!==void 0?n:{};let l=s==null?void 0:s[e];if(l===void 0){l=[];let u=Object.getPrototypeOf(this);for(;u;){const c=(i=(r=u.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];l.push(...c),u=Object.getPrototypeOf(u)}s[e]=l,this._cache.set(uc,s)}return l}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(let s=0;s<r.length;s++)r[s].handler.call(this,n);const i=this.eventListeners[e];if(i)for(let s=0;s<i.length;s++)i[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(!r)return;const s=r._getPointerById(n)||r._changedPointerPositions[0]||i;Mn.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Mn.DD._dragElements.has(this._id)||this._createDragElement(e);const r=Mn.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let i={x:r.x-n.offset.x,y:r.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const l=s.call(this,i,e);l?i=l:Te.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(e){const n=Mn.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Mn.DD._endDragBefore(e),Mn.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Mn.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||di.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let i=!1;Mn.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Mn.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&Mn.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Te.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Te.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let r=ye.prototype.getClassName.call(e),i=e.children,s,l,u;n&&(e.attrs.container=n),di.Konva[r]||(Te.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const c=di.Konva[r];if(s=new c(e.attrs),i)for(l=i.length,u=0;u<l;u++)s.add(ye._createNode(i[u]));return s}}tt.Node=ye;ye.prototype.nodeType="Node";ye.prototype._attrsAffectingSize=[];ye.prototype.eventListeners={};ye.prototype.on.call(ye.prototype,Xk,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(pi),this._clearSelfAndDescendantCache(jr)});ye.prototype.on.call(ye.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Up)});ye.prototype.on.call(ye.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Dp)});ye.prototype.on.call(ye.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(bc)});const Ve=zl.Factory.addGetterSetter;Ve(ye,"zIndex");Ve(ye,"absolutePosition");Ve(ye,"position");Ve(ye,"x",0,(0,pt.getNumberValidator)());Ve(ye,"y",0,(0,pt.getNumberValidator)());Ve(ye,"globalCompositeOperation","source-over",(0,pt.getStringValidator)());Ve(ye,"opacity",1,(0,pt.getNumberValidator)());Ve(ye,"name","",(0,pt.getStringValidator)());Ve(ye,"id","",(0,pt.getStringValidator)());Ve(ye,"rotation",0,(0,pt.getNumberValidator)());zl.Factory.addComponentsGetterSetter(ye,"scale",["x","y"]);Ve(ye,"scaleX",1,(0,pt.getNumberValidator)());Ve(ye,"scaleY",1,(0,pt.getNumberValidator)());zl.Factory.addComponentsGetterSetter(ye,"skew",["x","y"]);Ve(ye,"skewX",0,(0,pt.getNumberValidator)());Ve(ye,"skewY",0,(0,pt.getNumberValidator)());zl.Factory.addComponentsGetterSetter(ye,"offset",["x","y"]);Ve(ye,"offsetX",0,(0,pt.getNumberValidator)());Ve(ye,"offsetY",0,(0,pt.getNumberValidator)());Ve(ye,"dragDistance",void 0,(0,pt.getNumberValidator)());Ve(ye,"width",0,(0,pt.getNumberValidator)());Ve(ye,"height",0,(0,pt.getNumberValidator)());Ve(ye,"listening",!0,(0,pt.getBooleanValidator)());Ve(ye,"preventDefault",!0,(0,pt.getBooleanValidator)());Ve(ye,"filters",void 0,function(t){return this._filterUpToDate=!1,t});Ve(ye,"visible",!0,(0,pt.getBooleanValidator)());Ve(ye,"transformsEnabled","all",(0,pt.getStringValidator)());Ve(ye,"size");Ve(ye,"dragBoundFunc");Ve(ye,"draggable",!1,(0,pt.getBooleanValidator)());zl.Factory.backCompat(ye,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.Container=void 0;const Yo=Ee,_0=tt,jd=ge;class Rs extends _0.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let r=0;r<e.length;r++)this.add(e[r]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){const e=_0.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=_0.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){const i=this.getLayer(),s=e||i&&i.getCanvas(),l=s&&s.getContext(),u=this._getCanvasCache(),c=u&&u.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(c){l.save();const p=this.getAbsoluteTransform(n).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),l=this._getCanvasCache();if(l&&l.hit){s.save();const c=this.getAbsoluteTransform(n).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r,i){var s;const l=n&&n.getContext(),u=this.clipWidth(),c=this.clipHeight(),h=this.clipFunc(),p=typeof u=="number"&&typeof c=="number"||h,w=r===this;if(p){l.save();const v=this.getAbsoluteTransform(r);let _=v.getMatrix();l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.beginPath();let b;if(h)b=h.call(this,l,this);else{const E=this.clipX(),C=this.clipY();l.rect(E||0,C||0,u,c)}l.clip.apply(l,b),_=v.copy().invert().getMatrix(),l.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!w&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[e](n,r,i)}),y&&l.restore(),p&&l.restore()}getClientRect(e={}){var n;const r=e.skipTransform,i=e.relativeTo;let s,l,u,c,h={x:1/0,y:1/0,width:0,height:0};const p=this;(n=this.children)===null||n===void 0||n.forEach(function(v){if(!v.visible())return;const _=v.getClientRect({relativeTo:p,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(s===void 0?(s=_.x,l=_.y,u=_.x+_.width,c=_.y+_.height):(s=Math.min(s,_.x),l=Math.min(l,_.y),u=Math.max(u,_.x+_.width),c=Math.max(c,_.y+_.height)))});const w=this.find("Shape");let y=!1;for(let v=0;v<w.length;v++)if(w[v]._isVisible(this)){y=!0;break}return y&&s!==void 0?h={x:s,y:l,width:u-s,height:c-l}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,i)}}Ts.Container=Rs;Yo.Factory.addComponentsGetterSetter(Rs,"clip",["x","y","width","height"]);Yo.Factory.addGetterSetter(Rs,"clipX",void 0,(0,jd.getNumberValidator)());Yo.Factory.addGetterSetter(Rs,"clipY",void 0,(0,jd.getNumberValidator)());Yo.Factory.addGetterSetter(Rs,"clipWidth",void 0,(0,jd.getNumberValidator)());Yo.Factory.addGetterSetter(Rs,"clipHeight",void 0,(0,jd.getNumberValidator)());Yo.Factory.addGetterSetter(Rs,"clipFunc");var N4={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.getCapturedShape=Zk;Ui.createEvent=Qg;Ui.hasPointerCapture=eC;Ui.setPointerCapture=tC;Ui.releaseCapture=O4;const Jk=ke,Nl=new Map,A4=Jk.Konva._global.PointerEvent!==void 0;function Zk(t){return Nl.get(t)}function Qg(t){return{evt:t,pointerId:t.pointerId}}function eC(t,e){return Nl.get(t)===e}function tC(t,e){O4(t),e.getStage()&&(Nl.set(t,e),A4&&e._fire("gotpointercapture",Qg(new PointerEvent("gotpointercapture"))))}function O4(t,e){const n=Nl.get(t);if(!n)return;const r=n.getStage();r&&r.content,Nl.delete(t),A4&&n._fire("lostpointercapture",Qg(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=at,n=Ee,r=Ts,i=ke,s=lr,l=Ld,u=ke,c=Ui,h="Stage",p="string",w="px",y="mouseout",v="mouseleave",_="mouseover",b="mouseenter",E="mousemove",C="mousedown",x="mouseup",m="pointermove",k="pointerdown",R="pointerup",N="pointercancel",O="lostpointercapture",A="pointerout",U="pointerleave",I="pointerover",K="pointerenter",M="contextmenu",V="touchstart",z="touchend",Y="touchmove",te="touchcancel",ee="wheel",F=5,q=[[b,"_pointerenter"],[C,"_pointerdown"],[E,"_pointermove"],[x,"_pointerup"],[v,"_pointerleave"],[V,"_pointerdown"],[Y,"_pointermove"],[z,"_pointerup"],[te,"_pointercancel"],[_,"_pointerover"],[ee,"_wheel"],[M,"_contextmenu"],[k,"_pointerdown"],[m,"_pointermove"],[R,"_pointerup"],[N,"_pointercancel"],[U,"_pointerleave"],[O,"_lostpointercapture"]],$={mouse:{[A]:y,[U]:v,[I]:_,[K]:b,[m]:E,[k]:C,[R]:x,[N]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[U]:"touchleave",[I]:"touchover",[K]:"touchenter",[m]:Y,[k]:V,[R]:z,[N]:te,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[U]:U,[I]:I,[K]:K,[m]:m,[k]:k,[R]:R,[N]:N,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=Re=>Re.indexOf("pointer")>=0?"pointer":Re.indexOf("touch")>=0?"touch":"mouse",ne=Re=>{const L=Q(Re);if(L==="pointer")return i.Konva.pointerEventsEnabled&&$.pointer;if(L==="touch")return $.touch;if(L==="mouse")return $.mouse};function me(Re={}){return(Re.clipFunc||Re.clipWidth||Re.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Re}const Fe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class Ue extends r.Container{constructor(L){super(me(L)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{me(this.attrs)}),this._checkVisibility()}_validateAdd(L){const X=L.getType()==="Layer",ae=L.getType()==="FastLayer";X||ae||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const L=this.visible()?"":"none";this.content.style.display=L}setContainer(L){if(typeof L===p){let X;if(L.charAt(0)==="."){const ae=L.slice(1);L=document.getElementsByClassName(ae)[0]}else L.charAt(0)!=="#"?X=L:X=L.slice(1),L=document.getElementById(X);if(!L)throw"Can not find container in document with id "+X}return this._setAttr("container",L),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),L.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const L=this.children,X=L.length;for(let ae=0;ae<X;ae++)L[ae].clear();return this}clone(L){return L||(L={}),L.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,L)}destroy(){super.destroy();const L=this.content;L&&e.Util._isInDocument(L)&&this.container().removeChild(L);const X=t.stages.indexOf(this);return X>-1&&t.stages.splice(X,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const L=this._pointerPositions[0]||this._changedPointerPositions[0];return L?{x:L.x,y:L.y}:(e.Util.warn(Fe),null)}_getPointerById(L){return this._pointerPositions.find(X=>X.id===L)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(L){L=L||{},L.x=L.x||0,L.y=L.y||0,L.width=L.width||this.width(),L.height=L.height||this.height();const X=new s.SceneCanvas({width:L.width,height:L.height,pixelRatio:L.pixelRatio||1}),ae=X.getContext()._context,de=this.children;return(L.x||L.y)&&ae.translate(-1*L.x,-1*L.y),de.forEach(function(ce){if(!ce.isVisible())return;const we=ce._toKonvaCanvas(L);ae.drawImage(we._canvas,L.x,L.y,we.getWidth()/we.getPixelRatio(),we.getHeight()/we.getPixelRatio())}),X}getIntersection(L){if(!L)return null;const X=this.children,ae=X.length,de=ae-1;for(let ce=de;ce>=0;ce--){const we=X[ce].getIntersection(L);if(we)return we}return null}_resizeDOM(){const L=this.width(),X=this.height();this.content&&(this.content.style.width=L+w,this.content.style.height=X+w),this.bufferCanvas.setSize(L,X),this.bufferHitCanvas.setSize(L,X),this.children.forEach(ae=>{ae.setSize({width:L,height:X}),ae.draw()})}add(L,...X){if(arguments.length>1){for(let de=0;de<arguments.length;de++)this.add(arguments[de]);return this}super.add(L);const ae=this.children.length;return ae>F&&e.Util.warn("The stage has "+ae+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),L.setSize({width:this.width(),height:this.height()}),L.draw(),i.Konva.isBrowser&&this.content.appendChild(L.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(L){return c.hasPointerCapture(L,this)}setPointerCapture(L){c.setPointerCapture(L,this)}releaseCapture(L){c.releaseCapture(L,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&q.forEach(([L,X])=>{this.content.addEventListener(L,ae=>{this[X](ae)},{passive:!1})})}_pointerenter(L){this.setPointersPositions(L);const X=ne(L.type);X&&this._fire(X.pointerenter,{evt:L,target:this,currentTarget:this})}_pointerover(L){this.setPointersPositions(L);const X=ne(L.type);X&&this._fire(X.pointerover,{evt:L,target:this,currentTarget:this})}_getTargetShape(L){let X=this[L+"targetShape"];return X&&!X.getStage()&&(X=null),X}_pointerleave(L){const X=ne(L.type),ae=Q(L.type);if(!X)return;this.setPointersPositions(L);const de=this._getTargetShape(ae),ce=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;de&&ce?(de._fireAndBubble(X.pointerout,{evt:L}),de._fireAndBubble(X.pointerleave,{evt:L}),this._fire(X.pointerleave,{evt:L,target:this,currentTarget:this}),this[ae+"targetShape"]=null):ce&&(this._fire(X.pointerleave,{evt:L,target:this,currentTarget:this}),this._fire(X.pointerout,{evt:L,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(L){const X=ne(L.type),ae=Q(L.type);if(!X)return;this.setPointersPositions(L);let de=!1;this._changedPointerPositions.forEach(ce=>{const we=this.getIntersection(ce);if(l.DD.justDragged=!1,i.Konva["_"+ae+"ListenClick"]=!0,!we||!we.isListening()){this[ae+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&we.setPointerCapture(ce.id),this[ae+"ClickStartShape"]=we,we._fireAndBubble(X.pointerdown,{evt:L,pointerId:ce.id}),de=!0;const Oe=L.type.indexOf("touch")>=0;we.preventDefault()&&L.cancelable&&Oe&&L.preventDefault()}),de||this._fire(X.pointerdown,{evt:L,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(L){const X=ne(L.type),ae=Q(L.type);if(!X||(i.Konva.isDragging()&&l.DD.node.preventDefault()&&L.cancelable&&L.preventDefault(),this.setPointersPositions(L),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ce={};let we=!1;const Oe=this._getTargetShape(ae);this._changedPointerPositions.forEach(Vt=>{const Ce=c.getCapturedShape(Vt.id)||this.getIntersection(Vt),Pn=Vt.id,Wn={evt:L,pointerId:Pn},Zr=Oe!==Ce;if(Zr&&Oe&&(Oe._fireAndBubble(X.pointerout,{...Wn},Ce),Oe._fireAndBubble(X.pointerleave,{...Wn},Ce)),Ce){if(ce[Ce._id])return;ce[Ce._id]=!0}Ce&&Ce.isListening()?(we=!0,Zr&&(Ce._fireAndBubble(X.pointerover,{...Wn},Oe),Ce._fireAndBubble(X.pointerenter,{...Wn},Oe),this[ae+"targetShape"]=Ce),Ce._fireAndBubble(X.pointermove,{...Wn})):Oe&&(this._fire(X.pointerover,{evt:L,target:this,currentTarget:this,pointerId:Pn}),this[ae+"targetShape"]=null)}),we||this._fire(X.pointermove,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(L){const X=ne(L.type),ae=Q(L.type);if(!X)return;this.setPointersPositions(L);const de=this[ae+"ClickStartShape"],ce=this[ae+"ClickEndShape"],we={};let Oe=!1;this._changedPointerPositions.forEach(Vt=>{const Ce=c.getCapturedShape(Vt.id)||this.getIntersection(Vt);if(Ce){if(Ce.releaseCapture(Vt.id),we[Ce._id])return;we[Ce._id]=!0}const Pn=Vt.id,Wn={evt:L,pointerId:Pn};let Zr=!1;i.Konva["_"+ae+"InDblClickWindow"]?(Zr=!0,clearTimeout(this[ae+"DblTimeout"])):l.DD.justDragged||(i.Konva["_"+ae+"InDblClickWindow"]=!0,clearTimeout(this[ae+"DblTimeout"])),this[ae+"DblTimeout"]=setTimeout(function(){i.Konva["_"+ae+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),Ce&&Ce.isListening()?(Oe=!0,this[ae+"ClickEndShape"]=Ce,Ce._fireAndBubble(X.pointerup,{...Wn}),i.Konva["_"+ae+"ListenClick"]&&de&&de===Ce&&(Ce._fireAndBubble(X.pointerclick,{...Wn}),Zr&&ce&&ce===Ce&&Ce._fireAndBubble(X.pointerdblclick,{...Wn}))):(this[ae+"ClickEndShape"]=null,i.Konva["_"+ae+"ListenClick"]&&this._fire(X.pointerclick,{evt:L,target:this,currentTarget:this,pointerId:Pn}),Zr&&this._fire(X.pointerdblclick,{evt:L,target:this,currentTarget:this,pointerId:Pn}))}),Oe||this._fire(X.pointerup,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+ae+"ListenClick"]=!1,L.cancelable&&ae!=="touch"&&ae!=="pointer"&&L.preventDefault()}_contextmenu(L){this.setPointersPositions(L);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(M,{evt:L}):this._fire(M,{evt:L,target:this,currentTarget:this})}_wheel(L){this.setPointersPositions(L);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(ee,{evt:L}):this._fire(ee,{evt:L,target:this,currentTarget:this})}_pointercancel(L){this.setPointersPositions(L);const X=c.getCapturedShape(L.pointerId)||this.getIntersection(this.getPointerPosition());X&&X._fireAndBubble(R,c.createEvent(L)),c.releaseCapture(L.pointerId)}_lostpointercapture(L){c.releaseCapture(L.pointerId)}setPointersPositions(L){const X=this._getContentPosition();let ae=null,de=null;L=L||window.event,L.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(L.touches,ce=>{this._pointerPositions.push({id:ce.identifier,x:(ce.clientX-X.left)/X.scaleX,y:(ce.clientY-X.top)/X.scaleY})}),Array.prototype.forEach.call(L.changedTouches||L.touches,ce=>{this._changedPointerPositions.push({id:ce.identifier,x:(ce.clientX-X.left)/X.scaleX,y:(ce.clientY-X.top)/X.scaleY})})):(ae=(L.clientX-X.left)/X.scaleX,de=(L.clientY-X.top)/X.scaleY,this.pointerPos={x:ae,y:de},this._pointerPositions=[{x:ae,y:de,id:e.Util._getFirstPointerId(L)}],this._changedPointerPositions=[{x:ae,y:de,id:e.Util._getFirstPointerId(L)}])}_setPointerPosition(L){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(L)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const L=this.content.getBoundingClientRect();return{top:L.top,left:L.left,scaleX:L.width/this.content.clientWidth||1,scaleY:L.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const L=this.container();if(!L)throw"Stage has no container. A container is required.";L.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),L.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(L){L.batchDraw()}),this}}t.Stage=Ue,Ue.prototype.nodeType=h,(0,u._registerNode)(Ue),n.Factory.addGetterSetter(Ue,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(Re=>{Re.batchDraw()})})})(N4);var Bl={},Et={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ke,n=at,r=Ee,i=tt,s=ge,l=ke,u=Ui,c="hasShadow",h="shadowRGBA",p="patternImage",w="linearGradient",y="radialGradient";let v;function _(){return v||(v=n.Util.createCanvasElement().getContext("2d"),v)}t.shapes={};function b(U){const I=this.attrs.fillRule;I?U.fill(I):U.fill()}function E(U){U.stroke()}function C(U){const I=this.attrs.fillRule;I?U.fill(I):U.fill()}function x(U){U.stroke()}function m(){this._clearCache(c)}function k(){this._clearCache(h)}function R(){this._clearCache(p)}function N(){this._clearCache(w)}function O(){this._clearCache(y)}class A extends i.Node{constructor(I){super(I);let K;for(;K=n.Util.getRandomColor(),!(K&&!(K in t.shapes)););this.colorKey=K,t.shapes[K]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const K=_().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(K&&K.setTransform){const M=new n.Transform;M.translate(this.fillPatternX(),this.fillPatternY()),M.rotate(e.Konva.getAngle(this.fillPatternRotation())),M.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),M.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const V=M.getMatrix(),z=typeof DOMMatrix>"u"?{a:V[0],b:V[1],c:V[2],d:V[3],e:V[4],f:V[5]}:new DOMMatrix(V);K.setTransform(z)}return K}}_getLinearGradient(){return this._getCache(w,this.__getLinearGradient)}__getLinearGradient(){const I=this.fillLinearGradientColorStops();if(I){const K=_(),M=this.fillLinearGradientStartPoint(),V=this.fillLinearGradientEndPoint(),z=K.createLinearGradient(M.x,M.y,V.x,V.y);for(let Y=0;Y<I.length;Y+=2)z.addColorStop(I[Y],I[Y+1]);return z}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const I=this.fillRadialGradientColorStops();if(I){const K=_(),M=this.fillRadialGradientStartPoint(),V=this.fillRadialGradientEndPoint(),z=K.createRadialGradient(M.x,M.y,this.fillRadialGradientStartRadius(),V.x,V.y,this.fillRadialGradientEndRadius());for(let Y=0;Y<I.length;Y+=2)z.addColorStop(I[Y],I[Y+1]);return z}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const I=n.Util.colorToRGBA(this.shadowColor());if(I)return"rgba("+I.r+","+I.g+","+I.b+","+I.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const I=this.hitStrokeWidth();return I==="auto"?this.hasStroke():this.strokeEnabled()&&!!I}intersects(I){const K=this.getStage();if(!K)return!1;const M=K.bufferHitCanvas;return M.getContext().clear(),this.drawHit(M,void 0,!0),M.context.getImageData(Math.round(I.x),Math.round(I.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(I){var K;if(!((K=this.attrs.perfectDrawEnabled)!==null&&K!==void 0?K:!0))return!1;const V=I||this.hasFill(),z=this.hasStroke(),Y=this.getAbsoluteOpacity()!==1;if(V&&z&&Y)return!0;const te=this.hasShadow(),ee=this.shadowForStrokeEnabled();return!!(V&&z&&te&&ee)}setStrokeHitEnabled(I){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),I?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const I=this.size();return{x:this._centroid?-I.width/2:0,y:this._centroid?-I.height/2:0,width:I.width,height:I.height}}getClientRect(I={}){let K=!1,M=this.getParent();for(;M;){if(M.isCached()){K=!0;break}M=M.getParent()}const V=I.skipTransform,z=I.relativeTo||K&&this.getStage()||void 0,Y=this.getSelfRect(),ee=!I.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,F=Y.width+ee,q=Y.height+ee,$=!I.skipShadow&&this.hasShadow(),Q=$?this.shadowOffsetX():0,ne=$?this.shadowOffsetY():0,me=F+Math.abs(Q),Fe=q+Math.abs(ne),Ue=$&&this.shadowBlur()||0,Re=me+Ue*2,L=Fe+Ue*2,X={width:Re,height:L,x:-(ee/2+Ue)+Math.min(Q,0)+Y.x,y:-(ee/2+Ue)+Math.min(ne,0)+Y.y};return V?X:this._transformedRect(X,z)}drawScene(I,K,M){const V=this.getLayer(),z=I||V.getCanvas(),Y=z.getContext(),te=this._getCanvasCache(),ee=this.getSceneFunc(),F=this.hasShadow();let q;const $=K===this;if(!this.isVisible()&&!$)return this;if(te){Y.save();const Q=this.getAbsoluteTransform(K).getMatrix();return Y.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!ee)return this;if(Y.save(),this._useBufferCanvas()){q=this.getStage();const Q=M||q.bufferCanvas,ne=Q.getContext();ne.clear(),ne.save(),ne._applyLineJoin(this);const me=this.getAbsoluteTransform(K).getMatrix();ne.transform(me[0],me[1],me[2],me[3],me[4],me[5]),ee.call(this,ne,this),ne.restore();const Fe=Q.pixelRatio;F&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(Q._canvas,Q.x||0,Q.y||0,Q.width/Fe,Q.height/Fe)}else{if(Y._applyLineJoin(this),!$){const Q=this.getAbsoluteTransform(K).getMatrix();Y.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}F&&Y._applyShadow(this),ee.call(this,Y,this)}return Y.restore(),this}drawHit(I,K,M=!1){if(!this.shouldDrawHit(K,M))return this;const V=this.getLayer(),z=I||V.hitCanvas,Y=z&&z.getContext(),te=this.hitFunc()||this.sceneFunc(),ee=this._getCanvasCache(),F=ee&&ee.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){Y.save();const $=this.getAbsoluteTransform(K).getMatrix();return Y.transform($[0],$[1],$[2],$[3],$[4],$[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!te)return this;if(Y.save(),Y._applyLineJoin(this),!(this===K)){const $=this.getAbsoluteTransform(K).getMatrix();Y.transform($[0],$[1],$[2],$[3],$[4],$[5])}return te.call(this,Y,this),Y.restore(),this}drawHitFromCache(I=0){const K=this._getCanvasCache(),M=this._getCachedSceneCanvas(),V=K.hit,z=V.getContext(),Y=V.getWidth(),te=V.getHeight();z.clear(),z.drawImage(M._canvas,0,0,Y,te);try{const ee=z.getImageData(0,0,Y,te),F=ee.data,q=F.length,$=n.Util._hexToRgb(this.colorKey);for(let Q=0;Q<q;Q+=4)F[Q+3]>I?(F[Q]=$.r,F[Q+1]=$.g,F[Q+2]=$.b,F[Q+3]=255):F[Q+3]=0;z.putImageData(ee,0,0)}catch(ee){n.Util.error("Unable to draw hit graph from cached scene canvas. "+ee.message)}return this}hasPointerCapture(I){return u.hasPointerCapture(I,this)}setPointerCapture(I){u.setPointerCapture(I,this)}releaseCapture(I){u.releaseCapture(I,this)}}t.Shape=A,A.prototype._fillFunc=b,A.prototype._strokeFunc=E,A.prototype._fillFuncHit=C,A.prototype._strokeFuncHit=x,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,l._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",k),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",R),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",N),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",O),r.Factory.addGetterSetter(A,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(A,"lineJoin"),r.Factory.addGetterSetter(A,"lineCap"),r.Factory.addGetterSetter(A,"sceneFunc"),r.Factory.addGetterSetter(A,"hitFunc"),r.Factory.addGetterSetter(A,"dash"),r.Factory.addGetterSetter(A,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(A,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternImage"),r.Factory.addGetterSetter(A,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(A,"fillEnabled",!0),r.Factory.addGetterSetter(A,"strokeEnabled",!0),r.Factory.addGetterSetter(A,"shadowEnabled",!0),r.Factory.addGetterSetter(A,"dashEnabled",!0),r.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(A,"fillPriority","color"),r.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(A,"fillPatternRotation",0),r.Factory.addGetterSetter(A,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Et);Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Layer=void 0;const Ir=at,w0=Ts,so=tt,Jg=Ee,t2=lr,nC=ge,rC=Et,iC=ke,sC="#",oC="beforeDraw",aC="draw",I4=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],lC=I4.length;let Xo=class extends w0.Container{constructor(e){super(e),this.canvas=new t2.SceneCanvas,this.hitCanvas=new t2.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){so.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!so.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(so.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(so.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return so.Node.prototype.remove.call(this),e&&e.parentNode&&Ir.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&Ir.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),so.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Ir.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Ir.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Ir.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let i=0;i<lC;i++){const s=I4[i],l=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),u=l.shape;if(u)return u;if(r=!!l.antialiased,!l.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=Ir.Util._rgbToHex(r[0],r[1],r[2]),l=rC.shapes[sC+s];return l?{shape:l}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n,r){const i=this.getLayer(),s=e||i&&i.getCanvas();return this._fire(oC,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),w0.Container.prototype.drawScene.call(this,s,n,r),this._fire(aC,{node:this}),this}drawHit(e,n){const r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),w0.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Ir.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Ir.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Ir.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Bl.Layer=Xo;Xo.prototype.nodeType="Layer";(0,iC._registerNode)(Xo);Jg.Factory.addGetterSetter(Xo,"imageSmoothingEnabled",!0);Jg.Factory.addGetterSetter(Xo,"clearBeforeDraw",!0);Jg.Factory.addGetterSetter(Xo,"hitGraphEnabled",!0,(0,nC.getBooleanValidator)());var Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.FastLayer=void 0;const uC=at,cC=Bl,dC=ke;class Zg extends cC.Layer{constructor(e){super(e),this.listening(!1),uC.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Md.FastLayer=Zg;Zg.prototype.nodeType="FastLayer";(0,dC._registerNode)(Zg);var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.Group=void 0;const hC=at,fC=Ts,pC=ke;let em=class extends fC.Container{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&hC.Util.throw("You may only add groups and shapes to groups.")}};Qo.Group=em;em.prototype.nodeType="Group";(0,pC._registerNode)(em);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.Animation=void 0;const S0=ke,n2=at,x0=function(){return S0.glob.performance&&S0.glob.performance.now?function(){return S0.glob.performance.now()}:function(){return new Date().getTime()}}();class xr{constructor(e,n){this.id=xr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:x0(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=xr.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=x0(),xr._addAnimation(this),this}stop(){return xr._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],s=i.layers,l=i.func;i._updateFrameObject(x0());const u=s.length;let c;if(l?c=l.call(i,i.frame)!==!1:c=!0,!!c)for(let h=0;h<u;h++){const p=s[h];p._id!==void 0&&(e[p._id]=p)}}for(const r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=xr;e.animations.length?(e._runFrames(),n2.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,n2.Util.requestAnimFrame(this._animationLoop))}}Jo.Animation=xr;xr.animations=[];xr.animIdCounter=0;xr.animRunning=!1;var L4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=at,n=Jo,r=tt,i=ke,s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=1,u=2,c=3,h=["fill","stroke","shadowColor"];let p=0;class w{constructor(_,b,E,C,x,m,k){this.prop=_,this.propFunc=b,this.begin=C,this._pos=C,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=k,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=E,this._change=x-this.begin,this.pause()}fire(_){const b=this[_];b&&b()}setTime(_){_>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_,this.update())}getTime(){return this._time}setPosition(_){this.prevPos=this._pos,this.propFunc(_),this._pos=_}getPosition(_){return _===void 0&&(_=this._time),this.func(_,this.begin,this._change,this.duration)}play(){this.state=u,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_){this.pause(),this._time=_,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const _=this.getTimer()-this._startTime;this.state===u?this.setTime(_):this.state===c&&this.setTime(this.duration-_)}pause(){this.state=l,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(_){const b=this,E=_.node,C=E._id,x=_.easing||t.Easings.Linear,m=!!_.yoyo;let k,R;typeof _.duration>"u"?k=.3:_.duration===0?k=.001:k=_.duration,this.node=E,this._id=p++;const N=E.getLayer()||(E instanceof i.Konva.Stage?E.getLayers():null);N||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){b.tween.onEnterFrame()},N),this.tween=new w(R,function(O){b._tweenFunc(O)},x,0,1,k*1e3,m),this._addListeners(),y.attrs[C]||(y.attrs[C]={}),y.attrs[C][this._id]||(y.attrs[C][this._id]={}),y.tweens[C]||(y.tweens[C]={});for(R in _)s[R]===void 0&&this._addAttr(R,_[R]);this.reset(),this.onFinish=_.onFinish,this.onReset=_.onReset,this.onUpdate=_.onUpdate}_addAttr(_,b){const E=this.node,C=E._id;let x,m,k,R,N;const O=y.tweens[C][_];O&&delete y.attrs[C][O][_];let A=E.getAttr(_);if(e.Util._isArray(b))if(x=[],m=Math.max(b.length,A.length),_==="points"&&b.length!==A.length&&(b.length>A.length?(R=A,A=e.Util._prepareArrayForTween(A,b,E.closed())):(k=b,b=e.Util._prepareArrayForTween(b,A,E.closed()))),_.indexOf("fill")===0)for(let U=0;U<m;U++)if(U%2===0)x.push(b[U]-A[U]);else{const I=e.Util.colorToRGBA(A[U]);N=e.Util.colorToRGBA(b[U]),A[U]=I,x.push({r:N.r-I.r,g:N.g-I.g,b:N.b-I.b,a:N.a-I.a})}else for(let U=0;U<m;U++)x.push(b[U]-A[U]);else h.indexOf(_)!==-1?(A=e.Util.colorToRGBA(A),N=e.Util.colorToRGBA(b),x={r:N.r-A.r,g:N.g-A.g,b:N.b-A.b,a:N.a-A.a}):x=b-A;y.attrs[C][this._id][_]={start:A,diff:x,end:b,trueEnd:k,trueStart:R},y.tweens[C][_]=this._id}_tweenFunc(_){const b=this.node,E=y.attrs[b._id][this._id];let C,x,m,k,R,N,O,A;for(C in E){if(x=E[C],m=x.start,k=x.diff,A=x.end,e.Util._isArray(m))if(R=[],O=Math.max(m.length,A.length),C.indexOf("fill")===0)for(N=0;N<O;N++)N%2===0?R.push((m[N]||0)+k[N]*_):R.push("rgba("+Math.round(m[N].r+k[N].r*_)+","+Math.round(m[N].g+k[N].g*_)+","+Math.round(m[N].b+k[N].b*_)+","+(m[N].a+k[N].a*_)+")");else for(N=0;N<O;N++)R.push((m[N]||0)+k[N]*_);else h.indexOf(C)!==-1?R="rgba("+Math.round(m.r+k.r*_)+","+Math.round(m.g+k.g*_)+","+Math.round(m.b+k.b*_)+","+(m.a+k.a*_)+")":R=m+k*_;b.setAttr(C,R)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueEnd&&_.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueStart&&_.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_){return this.tween.seek(_*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const _=this.node._id,b=this._id,E=y.tweens[_];this.pause(),this.anim&&this.anim.stop();for(const C in E)delete y.tweens[_][C];delete y.attrs[_][b],y.tweens[_]&&(Object.keys(y.tweens[_]).length===0&&delete y.tweens[_],Object.keys(y.attrs[_]).length===0&&delete y.attrs[_])}}t.Tween=y,y.attrs={},y.tweens={},r.Node.prototype.to=function(v){const _=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),_&&_()},new y(v).play()},t.Easings={BackEaseIn(v,_,b,E){return b*(v/=E)*v*((1.70158+1)*v-1.70158)+_},BackEaseOut(v,_,b,E){return b*((v=v/E-1)*v*((1.70158+1)*v+1.70158)+1)+_},BackEaseInOut(v,_,b,E){let C=1.70158;return(v/=E/2)<1?b/2*(v*v*(((C*=1.525)+1)*v-C))+_:b/2*((v-=2)*v*(((C*=1.525)+1)*v+C)+2)+_},ElasticEaseIn(v,_,b,E,C,x){let m=0;return v===0?_:(v/=E)===1?_+b:(x||(x=E*.3),!C||C<Math.abs(b)?(C=b,m=x/4):m=x/(2*Math.PI)*Math.asin(b/C),-(C*Math.pow(2,10*(v-=1))*Math.sin((v*E-m)*(2*Math.PI)/x))+_)},ElasticEaseOut(v,_,b,E,C,x){let m=0;return v===0?_:(v/=E)===1?_+b:(x||(x=E*.3),!C||C<Math.abs(b)?(C=b,m=x/4):m=x/(2*Math.PI)*Math.asin(b/C),C*Math.pow(2,-10*v)*Math.sin((v*E-m)*(2*Math.PI)/x)+b+_)},ElasticEaseInOut(v,_,b,E,C,x){let m=0;return v===0?_:(v/=E/2)===2?_+b:(x||(x=E*(.3*1.5)),!C||C<Math.abs(b)?(C=b,m=x/4):m=x/(2*Math.PI)*Math.asin(b/C),v<1?-.5*(C*Math.pow(2,10*(v-=1))*Math.sin((v*E-m)*(2*Math.PI)/x))+_:C*Math.pow(2,-10*(v-=1))*Math.sin((v*E-m)*(2*Math.PI)/x)*.5+b+_)},BounceEaseOut(v,_,b,E){return(v/=E)<1/2.75?b*(7.5625*v*v)+_:v<2/2.75?b*(7.5625*(v-=1.5/2.75)*v+.75)+_:v<2.5/2.75?b*(7.5625*(v-=2.25/2.75)*v+.9375)+_:b*(7.5625*(v-=2.625/2.75)*v+.984375)+_},BounceEaseIn(v,_,b,E){return b-t.Easings.BounceEaseOut(E-v,0,b,E)+_},BounceEaseInOut(v,_,b,E){return v<E/2?t.Easings.BounceEaseIn(v*2,0,b,E)*.5+_:t.Easings.BounceEaseOut(v*2-E,0,b,E)*.5+b*.5+_},EaseIn(v,_,b,E){return b*(v/=E)*v+_},EaseOut(v,_,b,E){return-b*(v/=E)*(v-2)+_},EaseInOut(v,_,b,E){return(v/=E/2)<1?b/2*v*v+_:-b/2*(--v*(v-2)-1)+_},StrongEaseIn(v,_,b,E){return b*(v/=E)*v*v*v*v+_},StrongEaseOut(v,_,b,E){return b*((v=v/E-1)*v*v*v*v+1)+_},StrongEaseInOut(v,_,b,E){return(v/=E/2)<1?b/2*v*v*v*v*v+_:b/2*((v-=2)*v*v*v*v+2)+_},Linear(v,_,b,E){return b*v/E+_}}})(L4);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ke,n=at,r=tt,i=Ts,s=N4,l=Bl,u=Md,c=Qo,h=Ld,p=Et,w=Jo,y=L4,v=Gr,_=lr;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:u.FastLayer,Group:c.Group,DD:h.DD,Shape:p.Shape,shapes:p.shapes,Animation:w.Animation,Tween:y.Tween,Easings:y.Easings,Context:v.Context,Canvas:_.Canvas}),t.default=t.Konva})(nd);var Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.Arc=void 0;const Dd=Ee,gC=Et,r2=ke,Ud=ge,mC=ke;class Qr extends gC.Shape{_sceneFunc(e){const n=r2.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=r2.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),l=1,u=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),c=Math.sin(Math.min(i,Math.PI/2)),h=s*(s>0?e:n),p=l*n,w=u*(u>0?e:n),y=c*(c>0?n:e);return{x:h,y:r?-1*y:w,width:p-h,height:y-w}}}Fd.Arc=Qr;Qr.prototype._centroid=!0;Qr.prototype.className="Arc";Qr.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,mC._registerNode)(Qr);Dd.Factory.addGetterSetter(Qr,"innerRadius",0,(0,Ud.getNumberValidator)());Dd.Factory.addGetterSetter(Qr,"outerRadius",0,(0,Ud.getNumberValidator)());Dd.Factory.addGetterSetter(Qr,"angle",0,(0,Ud.getNumberValidator)());Dd.Factory.addGetterSetter(Qr,"clockwise",!1,(0,Ud.getBooleanValidator)());var zd={},Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.Line=void 0;const Bd=Ee,yC=ke,vC=Et,j4=ge;function zp(t,e,n,r,i,s,l){const u=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),c=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),h=l*u/(u+c),p=l*c/(u+c),w=n-h*(i-t),y=r-h*(s-e),v=n+p*(i-t),_=r+p*(s-e);return[w,y,v,_]}function i2(t,e){const n=t.length,r=[];for(let i=2;i<n-2;i+=2){const s=zp(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e);isNaN(s[0])||(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]))}return r}let zi=class extends vC.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),r=n.length,i=this.tension(),s=this.closed(),l=this.bezier();if(!r)return;let u=0;if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){const c=this.getTensionPoints(),h=c.length;for(u=s?0:4,s||e.quadraticCurveTo(c[0],c[1],c[2],c[3]);u<h-2;)e.bezierCurveTo(c[u++],c[u++],c[u++],c[u++],c[u++],c[u++]);s||e.quadraticCurveTo(c[h-2],c[h-1],n[r-2],n[r-1])}else if(l)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():i2(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,r=this.tension(),i=zp(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=zp(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),l=i2(e,r);return[i[2],i[3]].concat(l).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],r=e[0],i=e[1],s=e[1],l,u;for(let c=0;c<e.length/2;c++)l=e[c*2],u=e[c*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,u),s=Math.max(s,u);return{x:n,y:i,width:r-n,height:s-i}}};Gl.Line=zi;zi.prototype.className="Line";zi.prototype._attrsAffectingSize=["points","bezier","tension"];(0,yC._registerNode)(zi);Bd.Factory.addGetterSetter(zi,"closed",!1);Bd.Factory.addGetterSetter(zi,"bezier",!1);Bd.Factory.addGetterSetter(zi,"tension",0,(0,j4.getNumberValidator)());Bd.Factory.addGetterSetter(zi,"points",[],(0,j4.getNumberArrayValidator)());var Zo={},M4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(l,u,c)=>{let h,p;const y=c/2;h=0;for(let v=0;v<20;v++)p=y*t.tValues[20][v]+y,h+=t.cValues[20][v]*r(l,u,p);return y*h};t.getCubicArcLength=e;const n=(l,u,c)=>{c===void 0&&(c=1);const h=l[0]-2*l[1]+l[2],p=u[0]-2*u[1]+u[2],w=2*l[1]-2*l[0],y=2*u[1]-2*u[0],v=4*(h*h+p*p),_=4*(h*w+p*y),b=w*w+y*y;if(v===0)return c*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(u[2]-u[0],2));const E=_/(2*v),C=b/v,x=c+E,m=C-E*E,k=x*x+m>0?Math.sqrt(x*x+m):0,R=E*E+m>0?Math.sqrt(E*E+m):0,N=E+Math.sqrt(E*E+m)!==0?m*Math.log(Math.abs((x+k)/(E+R))):0;return Math.sqrt(v)/2*(x*k-E*R+N)};t.getQuadraticArcLength=n;function r(l,u,c){const h=i(1,c,l),p=i(1,c,u),w=h*h+p*p;return Math.sqrt(w)}const i=(l,u,c)=>{const h=c.length-1;let p,w;if(h===0)return 0;if(l===0){w=0;for(let y=0;y<=h;y++)w+=t.binomialCoefficients[h][y]*Math.pow(1-u,h-y)*Math.pow(u,y)*c[y];return w}else{p=new Array(h);for(let y=0;y<h;y++)p[y]=h*(c[y+1]-c[y]);return i(l-1,u,p)}},s=(l,u,c)=>{let h=1,p=l/u,w=(l-c(p))/u,y=0;for(;h>.001;){const v=c(p+w),_=Math.abs(l-v)/u;if(_<h)h=_,p+=w;else{const b=c(p-w),E=Math.abs(l-b)/u;E<h?(h=E,p-=w):w/=2}if(y++,y>500)break}return p};t.t2length=s})(M4);Object.defineProperty(Zo,"__esModule",{value:!0});Zo.Path=void 0;const _C=Ee,wC=ke,SC=Et,oo=M4;class xt extends SC.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=xt.parsePathData(this.data()),this.pathLength=xt.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let r=!1;for(let i=0;i<n.length;i++){const s=n[i].command,l=n[i].points;switch(s){case"L":e.lineTo(l[0],l[1]);break;case"M":e.moveTo(l[0],l[1]);break;case"C":e.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"Q":e.quadraticCurveTo(l[0],l[1],l[2],l[3]);break;case"A":const u=l[0],c=l[1],h=l[2],p=l[3],w=l[4],y=l[5],v=l[6],_=l[7],b=h>p?h:p,E=h>p?1:h/p,C=h>p?p/h:1;e.translate(u,c),e.rotate(v),e.scale(E,C),e.arc(0,0,b,w,w+y,1-_),e.scale(1/E,1/C),e.rotate(-v),e.translate(-u,-c);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(c){if(c.command==="A"){const h=c.points[4],p=c.points[5],w=c.points[4]+p;let y=Math.PI/180;if(Math.abs(h-w)<y&&(y=Math.abs(h-w)),p<0)for(let v=h-y;v>w;v-=y){const _=xt.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}else for(let v=h+y;v<w;v+=y){const _=xt.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}}else if(c.command==="C")for(let h=0;h<=1;h+=.01){const p=xt.getPointOnCubicBezier(h,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(p.x,p.y)}else e=e.concat(c.points)});let n=e[0],r=e[0],i=e[1],s=e[1],l,u;for(let c=0;c<e.length/2;c++)l=e[c*2],u=e[c*2+1],isNaN(l)||(n=Math.min(n,l),r=Math.max(r,l)),isNaN(u)||(i=Math.min(i,u),s=Math.max(s,u));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){return xt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPathLength(e){let n=0;for(let r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let r,i=0,s=n.length;if(!s)return null;for(;i<s&&e>n[i].pathLength;)e-=n[i].pathLength,++i;if(i===s)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return n[i].command==="M"?(r=n[i].points.slice(0,2),{x:r[0],y:r[1]}):{x:n[i].start.x,y:n[i].start.y};const l=n[i],u=l.points;switch(l.command){case"L":return xt.getPointOnLine(e,l.start.x,l.start.y,u[0],u[1]);case"C":return xt.getPointOnCubicBezier((0,oo.t2length)(e,xt.getPathLength(n),b=>(0,oo.getCubicArcLength)([l.start.x,u[0],u[2],u[4]],[l.start.y,u[1],u[3],u[5]],b)),l.start.x,l.start.y,u[0],u[1],u[2],u[3],u[4],u[5]);case"Q":return xt.getPointOnQuadraticBezier((0,oo.t2length)(e,xt.getPathLength(n),b=>(0,oo.getQuadraticArcLength)([l.start.x,u[0],u[2]],[l.start.y,u[1],u[3]],b)),l.start.x,l.start.y,u[0],u[1],u[2],u[3]);case"A":const c=u[0],h=u[1],p=u[2],w=u[3],y=u[5],v=u[6];let _=u[4];return _+=y*e/l.pathLength,xt.getPointOnEllipticalArc(c,h,p,w,_,v)}return null}static getPointOnLine(e,n,r,i,s,l,u){l=l??n,u=u??r;const c=this.getLineLength(n,r,i,s);if(c<1e-10)return{x:n,y:r};if(i===n)return{x:l,y:u+(s>r?e:-e)};const h=(s-r)/(i-n),p=Math.sqrt(e*e/(1+h*h))*(i<n?-1:1),w=h*p;if(Math.abs(u-r-h*(l-n))<1e-10)return{x:l+p,y:u+w};const y=((l-n)*(i-n)+(u-r)*(s-r))/(c*c),v=n+y*(i-n),_=r+y*(s-r),b=this.getLineLength(l,u,v,_),E=Math.sqrt(e*e-b*b),C=Math.sqrt(E*E/(1+h*h))*(i<n?-1:1),x=h*C;return{x:v+C,y:_+x}}static getPointOnCubicBezier(e,n,r,i,s,l,u,c,h){function p(E){return E*E*E}function w(E){return 3*E*E*(1-E)}function y(E){return 3*E*(1-E)*(1-E)}function v(E){return(1-E)*(1-E)*(1-E)}const _=c*p(e)+l*w(e)+i*y(e)+n*v(e),b=h*p(e)+u*w(e)+s*y(e)+r*v(e);return{x:_,y:b}}static getPointOnQuadraticBezier(e,n,r,i,s,l,u){function c(v){return v*v}function h(v){return 2*v*(1-v)}function p(v){return(1-v)*(1-v)}const w=l*c(e)+i*h(e)+n*p(e),y=u*c(e)+s*h(e)+r*p(e);return{x:w,y}}static getPointOnEllipticalArc(e,n,r,i,s,l){const u=Math.cos(l),c=Math.sin(l),h={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(h.x*u-h.y*c),y:n+(h.x*c+h.y*u)}}static parsePathData(e){if(!e)return[];let n=e;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let w=0;w<r.length;w++)n=n.replace(new RegExp(r[w],"g"),"|"+r[w]);const i=n.split("|"),s=[],l=[];let u=0,c=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(let w=1;w<i.length;w++){let y=i[w],v=y.charAt(0);for(y=y.slice(1),l.length=0;p=h.exec(y);)l.push(p[0]);const _=[];for(let b=0,E=l.length;b<E;b++){if(l[b]==="00"){_.push(0,0);continue}const C=parseFloat(l[b]);isNaN(C)?_.push(0):_.push(C)}for(;_.length>0&&!isNaN(_[0]);){let b="",E=[];const C=u,x=c;let m,k,R,N,O,A,U,I,K,M;switch(v){case"l":u+=_.shift(),c+=_.shift(),b="L",E.push(u,c);break;case"L":u=_.shift(),c=_.shift(),E.push(u,c);break;case"m":const V=_.shift(),z=_.shift();if(u+=V,c+=z,b="M",s.length>2&&s[s.length-1].command==="z"){for(let Y=s.length-2;Y>=0;Y--)if(s[Y].command==="M"){u=s[Y].points[0]+V,c=s[Y].points[1]+z;break}}E.push(u,c),v="l";break;case"M":u=_.shift(),c=_.shift(),b="M",E.push(u,c),v="L";break;case"h":u+=_.shift(),b="L",E.push(u,c);break;case"H":u=_.shift(),b="L",E.push(u,c);break;case"v":c+=_.shift(),b="L",E.push(u,c);break;case"V":c=_.shift(),b="L",E.push(u,c);break;case"C":E.push(_.shift(),_.shift(),_.shift(),_.shift()),u=_.shift(),c=_.shift(),E.push(u,c);break;case"c":E.push(u+_.shift(),c+_.shift(),u+_.shift(),c+_.shift()),u+=_.shift(),c+=_.shift(),b="C",E.push(u,c);break;case"S":k=u,R=c,m=s[s.length-1],m.command==="C"&&(k=u+(u-m.points[2]),R=c+(c-m.points[3])),E.push(k,R,_.shift(),_.shift()),u=_.shift(),c=_.shift(),b="C",E.push(u,c);break;case"s":k=u,R=c,m=s[s.length-1],m.command==="C"&&(k=u+(u-m.points[2]),R=c+(c-m.points[3])),E.push(k,R,u+_.shift(),c+_.shift()),u+=_.shift(),c+=_.shift(),b="C",E.push(u,c);break;case"Q":E.push(_.shift(),_.shift()),u=_.shift(),c=_.shift(),E.push(u,c);break;case"q":E.push(u+_.shift(),c+_.shift()),u+=_.shift(),c+=_.shift(),b="Q",E.push(u,c);break;case"T":k=u,R=c,m=s[s.length-1],m.command==="Q"&&(k=u+(u-m.points[0]),R=c+(c-m.points[1])),u=_.shift(),c=_.shift(),b="Q",E.push(k,R,u,c);break;case"t":k=u,R=c,m=s[s.length-1],m.command==="Q"&&(k=u+(u-m.points[0]),R=c+(c-m.points[1])),u+=_.shift(),c+=_.shift(),b="Q",E.push(k,R,u,c);break;case"A":N=_.shift(),O=_.shift(),A=_.shift(),U=_.shift(),I=_.shift(),K=u,M=c,u=_.shift(),c=_.shift(),b="A",E=this.convertEndpointToCenterParameterization(K,M,u,c,U,I,N,O,A);break;case"a":N=_.shift(),O=_.shift(),A=_.shift(),U=_.shift(),I=_.shift(),K=u,M=c,u+=_.shift(),c+=_.shift(),b="A",E=this.convertEndpointToCenterParameterization(K,M,u,c,U,I,N,O,A);break}s.push({command:b||v,points:E,start:{x:C,y:x},pathLength:this.calcLength(C,x,b||v,E)})}(v==="z"||v==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,n,r,i){let s,l,u,c;const h=xt;switch(r){case"L":return h.getLineLength(e,n,i[0],i[1]);case"C":return(0,oo.getCubicArcLength)([e,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,oo.getQuadraticArcLength)([e,i[0],i[2]],[n,i[1],i[3]],1);case"A":s=0;const p=i[4],w=i[5],y=i[4]+w;let v=Math.PI/180;if(Math.abs(p-y)<v&&(v=Math.abs(p-y)),l=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),w<0)for(c=p-v;c>y;c-=v)u=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),s+=h.getLineLength(l.x,l.y,u.x,u.y),l=u;else for(c=p+v;c<y;c+=v)u=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),s+=h.getLineLength(l.x,l.y,u.x,u.y),l=u;return u=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],y,0),s+=h.getLineLength(l.x,l.y,u.x,u.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,l,u,c,h){const p=h*(Math.PI/180),w=Math.cos(p)*(e-r)/2+Math.sin(p)*(n-i)/2,y=-1*Math.sin(p)*(e-r)/2+Math.cos(p)*(n-i)/2,v=w*w/(u*u)+y*y/(c*c);v>1&&(u*=Math.sqrt(v),c*=Math.sqrt(v));let _=Math.sqrt((u*u*(c*c)-u*u*(y*y)-c*c*(w*w))/(u*u*(y*y)+c*c*(w*w)));s===l&&(_*=-1),isNaN(_)&&(_=0);const b=_*u*y/c,E=_*-c*w/u,C=(e+r)/2+Math.cos(p)*b-Math.sin(p)*E,x=(n+i)/2+Math.sin(p)*b+Math.cos(p)*E,m=function(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])},k=function(I,K){return(I[0]*K[0]+I[1]*K[1])/(m(I)*m(K))},R=function(I,K){return(I[0]*K[1]<I[1]*K[0]?-1:1)*Math.acos(k(I,K))},N=R([1,0],[(w-b)/u,(y-E)/c]),O=[(w-b)/u,(y-E)/c],A=[(-1*w-b)/u,(-1*y-E)/c];let U=R(O,A);return k(O,A)<=-1&&(U=Math.PI),k(O,A)>=1&&(U=0),l===0&&U>0&&(U=U-2*Math.PI),l===1&&U<0&&(U=U+2*Math.PI),[C,x,u,c,N,U,p,l]}}Zo.Path=xt;xt.prototype.className="Path";xt.prototype._attrsAffectingSize=["data"];(0,wC._registerNode)(xt);_C.Factory.addGetterSetter(xt,"data");Object.defineProperty(zd,"__esModule",{value:!0});zd.Arrow=void 0;const Gd=Ee,xC=Gl,F4=ge,kC=ke,s2=Zo;class Ns extends xC.Line{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,r=this.points();let i=r;const s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());const l=this.pointerLength(),u=r.length;let c,h;if(s){const y=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[u-2],r[u-1]],v=s2.Path.calcLength(i[i.length-4],i[i.length-3],"C",y),_=s2.Path.getPointOnQuadraticBezier(Math.min(1,1-l/v),y[0],y[1],y[2],y[3],y[4],y[5]);c=r[u-2]-_.x,h=r[u-1]-_.y}else c=r[u-2]-r[u-4],h=r[u-1]-r[u-3];const p=(Math.atan2(h,c)+n)%n,w=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[u-2],r[u-1]),e.rotate(p),e.moveTo(0,0),e.lineTo(-l,w/2),e.lineTo(-l,-w/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(c=(i[0]+i[2])/2-r[0],h=(i[1]+i[3])/2-r[1]):(c=r[2]-r[0],h=r[3]-r[1]),e.rotate((Math.atan2(-h,-c)+n)%n),e.moveTo(0,0),e.lineTo(-l,w/2),e.lineTo(-l,-w/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}zd.Arrow=Ns;Ns.prototype.className="Arrow";(0,kC._registerNode)(Ns);Gd.Factory.addGetterSetter(Ns,"pointerLength",10,(0,F4.getNumberValidator)());Gd.Factory.addGetterSetter(Ns,"pointerWidth",10,(0,F4.getNumberValidator)());Gd.Factory.addGetterSetter(Ns,"pointerAtBeginning",!1);Gd.Factory.addGetterSetter(Ns,"pointerAtEnding",!0);var Vd={};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.Circle=void 0;const CC=Ee,bC=Et,EC=ge,PC=ke;class ea extends bC.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Vd.Circle=ea;ea.prototype._centroid=!0;ea.prototype.className="Circle";ea.prototype._attrsAffectingSize=["radius"];(0,PC._registerNode)(ea);CC.Factory.addGetterSetter(ea,"radius",0,(0,EC.getNumberValidator)());var $d={};Object.defineProperty($d,"__esModule",{value:!0});$d.Ellipse=void 0;const tm=Ee,TC=Et,D4=ge,RC=ke;class Bi extends TC.Shape{_sceneFunc(e){const n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}$d.Ellipse=Bi;Bi.prototype.className="Ellipse";Bi.prototype._centroid=!0;Bi.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,RC._registerNode)(Bi);tm.Factory.addComponentsGetterSetter(Bi,"radius",["x","y"]);tm.Factory.addGetterSetter(Bi,"radiusX",0,(0,D4.getNumberValidator)());tm.Factory.addGetterSetter(Bi,"radiusY",0,(0,D4.getNumberValidator)());var Wd={};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.Image=void 0;const k0=at,As=Ee,NC=Et,AC=ke,Vl=ge;class $n extends NC.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let l;if(s){const u=this.attrs.cropWidth,c=this.attrs.cropHeight;u&&c?l=[s,this.cropX(),this.cropY(),u,c,0,0,n,r]:l=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?k0.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,l))}_hitFunc(e){const n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?k0.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){const i=k0.Util.createImageElement();i.onload=function(){const s=new $n({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}}Wd.Image=$n;$n.prototype.className="Image";(0,AC._registerNode)($n);As.Factory.addGetterSetter($n,"cornerRadius",0,(0,Vl.getNumberOrArrayOfNumbersValidator)(4));As.Factory.addGetterSetter($n,"image");As.Factory.addComponentsGetterSetter($n,"crop",["x","y","width","height"]);As.Factory.addGetterSetter($n,"cropX",0,(0,Vl.getNumberValidator)());As.Factory.addGetterSetter($n,"cropY",0,(0,Vl.getNumberValidator)());As.Factory.addGetterSetter($n,"cropWidth",0,(0,Vl.getNumberValidator)());As.Factory.addGetterSetter($n,"cropHeight",0,(0,Vl.getNumberValidator)());var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.Tag=Bo.Label=void 0;const Hd=Ee,OC=Et,IC=Qo,nm=ge,U4=ke,z4=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],LC="Change.konva",jC="none",Bp="up",Gp="right",Vp="down",$p="left",MC=z4.length;class rm extends IC.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,r;const i=function(){n._sync()};for(r=0;r<MC;r++)e.on(z4[r]+LC,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),r,i,s,l,u,c,h;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),l=n.pointerWidth(),h=n.pointerHeight(),u=0,c=0,s){case Bp:u=r/2,c=-1*h;break;case Gp:u=r+l,c=i/2;break;case Vp:u=r/2,c=i+h;break;case $p:u=-1*l,c=i/2;break}n.setAttrs({x:-1*u,y:-1*c,width:r,height:i}),e.setAttrs({x:-1*u,y:-1*c})}}}Bo.Label=rm;rm.prototype.className="Label";(0,U4._registerNode)(rm);class Os extends OC.Shape{_sceneFunc(e){const n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),l=this.pointerHeight(),u=this.cornerRadius();let c=0,h=0,p=0,w=0;typeof u=="number"?c=h=p=w=Math.min(u,n/2,r/2):(c=Math.min(u[0]||0,n/2,r/2),h=Math.min(u[1]||0,n/2,r/2),w=Math.min(u[2]||0,n/2,r/2),p=Math.min(u[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(c,0),i===Bp&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*l),e.lineTo((n+s)/2,0)),e.lineTo(n-h,0),e.arc(n-h,h,h,Math.PI*3/2,0,!1),i===Gp&&(e.lineTo(n,(r-l)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+l)/2)),e.lineTo(n,r-w),e.arc(n-w,r-w,w,0,Math.PI/2,!1),i===Vp&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+l),e.lineTo((n-s)/2,r)),e.lineTo(p,r),e.arc(p,r-p,p,Math.PI/2,Math.PI,!1),i===$p&&(e.lineTo(0,(r+l)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-l)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),l=this.width(),u=this.height();return s===Bp?(n-=i,u+=i):s===Vp?u+=i:s===$p?(e-=r*1.5,l+=r):s===Gp&&(l+=r*1.5),{x:e,y:n,width:l,height:u}}}Bo.Tag=Os;Os.prototype.className="Tag";(0,U4._registerNode)(Os);Hd.Factory.addGetterSetter(Os,"pointerDirection",jC);Hd.Factory.addGetterSetter(Os,"pointerWidth",0,(0,nm.getNumberValidator)());Hd.Factory.addGetterSetter(Os,"pointerHeight",0,(0,nm.getNumberValidator)());Hd.Factory.addGetterSetter(Os,"cornerRadius",0,(0,nm.getNumberOrArrayOfNumbersValidator)(4));var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.Rect=void 0;const FC=Ee,DC=Et,UC=ke,zC=at,BC=ge;let Kd=class extends DC.Shape{_sceneFunc(e){const n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?zC.Util.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};$l.Rect=Kd;Kd.prototype.className="Rect";(0,UC._registerNode)(Kd);FC.Factory.addGetterSetter(Kd,"cornerRadius",0,(0,BC.getNumberOrArrayOfNumbersValidator)(4));var qd={};Object.defineProperty(qd,"__esModule",{value:!0});qd.RegularPolygon=void 0;const B4=Ee,GC=Et,G4=ge,VC=ke;class Is extends GC.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();let n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(l=>{n=Math.min(n,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),s=Math.max(s,l.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}qd.RegularPolygon=Is;Is.prototype.className="RegularPolygon";Is.prototype._centroid=!0;Is.prototype._attrsAffectingSize=["radius"];(0,VC._registerNode)(Is);B4.Factory.addGetterSetter(Is,"radius",0,(0,G4.getNumberValidator)());B4.Factory.addGetterSetter(Is,"sides",0,(0,G4.getNumberValidator)());var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.Ring=void 0;const V4=Ee,$C=Et,$4=ge,WC=ke,o2=Math.PI*2;class Ls extends $C.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,o2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),o2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Yd.Ring=Ls;Ls.prototype.className="Ring";Ls.prototype._centroid=!0;Ls.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,WC._registerNode)(Ls);V4.Factory.addGetterSetter(Ls,"innerRadius",0,(0,$4.getNumberValidator)());V4.Factory.addGetterSetter(Ls,"outerRadius",0,(0,$4.getNumberValidator)());var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.Sprite=void 0;const js=Ee,HC=Et,KC=Jo,W4=ge,qC=ke;class br extends HC.Shape{constructor(e){super(e),this._updated=!0,this.anim=new KC.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),u=s[i+0],c=s[i+1],h=s[i+2],p=s[i+3],w=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,h,p),e.closePath(),e.fillStrokeShape(this)),w)if(l){const y=l[n],v=r*2;e.drawImage(w,u,c,h,p,y[v+0],y[v+1],h,p)}else e.drawImage(w,u,c,h,p,0,0,h,p)}_hitFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),u=s[i+2],c=s[i+3];if(e.beginPath(),l){const h=l[n],p=r*2;e.rect(h[p+0],h[p+1],u,c)}else e.rect(0,0,u,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Xd.Sprite=br;br.prototype.className="Sprite";(0,qC._registerNode)(br);js.Factory.addGetterSetter(br,"animation");js.Factory.addGetterSetter(br,"animations");js.Factory.addGetterSetter(br,"frameOffsets");js.Factory.addGetterSetter(br,"image");js.Factory.addGetterSetter(br,"frameIndex",0,(0,W4.getNumberValidator)());js.Factory.addGetterSetter(br,"frameRate",17,(0,W4.getNumberValidator)());js.Factory.backCompat(br,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.Star=void 0;const im=Ee,YC=Et,sm=ge,XC=ke;class Gi extends YC.Shape{_sceneFunc(e){const n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(let s=1;s<i*2;s++){const l=s%2===0?r:n,u=l*Math.sin(s*Math.PI/i),c=-1*l*Math.cos(s*Math.PI/i);e.lineTo(u,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Qd.Star=Gi;Gi.prototype.className="Star";Gi.prototype._centroid=!0;Gi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,XC._registerNode)(Gi);im.Factory.addGetterSetter(Gi,"numPoints",5,(0,sm.getNumberValidator)());im.Factory.addGetterSetter(Gi,"innerRadius",0,(0,sm.getNumberValidator)());im.Factory.addGetterSetter(Gi,"outerRadius",0,(0,sm.getNumberValidator)());var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.Text=void 0;ta.stringToArray=us;const Wp=at,Zt=Ee,QC=Et,C0=ke,Vi=ge,JC=ke;function us(t){return[...t].reduce((e,n,r,i)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const s=i[r+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(n+s),i[r+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(i[r+1]||""))?e.push(n+i[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const ao="auto",ZC="center",H4="inherit",Ia="justify",eb="Change.konva",tb="2d",a2="-",K4="left",nb="text",rb="Text",ib="top",sb="bottom",l2="middle",q4="normal",ob="px ",cc=" ",ab="right",u2="rtl",lb="word",ub="char",c2="none",b0="",Y4=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],cb=Y4.length;function db(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}let dc;function E0(){return dc||(dc=Wp.Util.createCanvasElement().getContext(tb),dc)}function hb(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function fb(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function pb(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let dt=class extends QC.Shape{constructor(e){super(pb(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<cb;n++)this.on(Y4[n]+eb,this._setTextData);this._setTextData()}_sceneFunc(e){const n=this.textArr,r=n.length;if(!this.text())return;let i=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,u=this.verticalAlign(),c=this.direction(),h=0,p=this.align(),w=this.getWidth(),y=this.letterSpacing(),v=this.fill(),_=this.textDecoration(),b=_.indexOf("underline")!==-1,E=_.indexOf("line-through")!==-1,C;c=c===H4?e.direction:c;let x=l/2,m=l2;if(C0.Konva._fixTextRendering){const k=this.measureSize("M");m="alphabetic",x=(k.fontBoundingBoxAscent-k.fontBoundingBoxDescent)/2+l/2}for(c===u2&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",m),e.setAttr("textAlign",K4),u===l2?h=(this.getHeight()-r*l-i*2)/2:u===sb&&(h=this.getHeight()-r*l-i*2),e.translate(i,h+i),C=0;C<r;C++){let k=0,R=0;const N=n[C],O=N.text,A=N.width,U=N.lastInParagraph;if(e.save(),p===ab?k+=w-A-i*2:p===ZC&&(k+=(w-A-i*2)/2),b){e.save(),e.beginPath();const I=C0.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),K=k,M=x+R+I;e.moveTo(K,M);const V=p===Ia&&!U?w-i*2:A;e.lineTo(K+Math.round(V),M),e.lineWidth=s/15;const z=this._getLinearGradient();e.strokeStyle=z||v,e.stroke(),e.restore()}if(E){e.save(),e.beginPath();const I=C0.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(k,x+R+I);const K=p===Ia&&!U?w-i*2:A;e.lineTo(k+Math.round(K),x+R+I),e.lineWidth=s/15;const M=this._getLinearGradient();e.strokeStyle=M||v,e.stroke(),e.restore()}if(c!==u2&&(y!==0||p===Ia)){const I=O.split(" ").length-1,K=us(O);for(let M=0;M<K.length;M++){const V=K[M];V===" "&&!U&&p===Ia&&(k+=(w-i*2-A)/I),this._partialTextX=k,this._partialTextY=x+R,this._partialText=V,e.fillStrokeShape(this),k+=this.measureSize(V).width+y}}else y!==0&&e.setAttr("letterSpacing",`${y}px`),this._partialTextX=k,this._partialTextY=x+R,this._partialText=O,e.fillStrokeShape(this);e.restore(),r>1&&(x+=l)}}_hitFunc(e){const n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=Wp.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(nb,n),this}getWidth(){return this.attrs.width===ao||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===ao||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Wp.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,i,s,l,u,c,h,p,w,y;let v=E0(),_=this.fontSize(),b;v.save(),v.font=this._getContextFont(),b=v.measureText(e),v.restore();const E=_/100;return{actualBoundingBoxAscent:(n=b.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*E,actualBoundingBoxDescent:(r=b.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=b.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*E,actualBoundingBoxRight:(s=b.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*E,alphabeticBaseline:(l=b.alphabeticBaseline)!==null&&l!==void 0?l:0,emHeightAscent:(u=b.emHeightAscent)!==null&&u!==void 0?u:100*E,emHeightDescent:(c=b.emHeightDescent)!==null&&c!==void 0?c:-20*E,fontBoundingBoxAscent:(h=b.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*E,fontBoundingBoxDescent:(p=b.fontBoundingBoxDescent)!==null&&p!==void 0?p:21*E,hangingBaseline:(w=b.hangingBaseline)!==null&&w!==void 0?w:72.80000305175781*E,ideographicBaseline:(y=b.ideographicBaseline)!==null&&y!==void 0?y:-21*E,width:b.width,height:_}}_getContextFont(){return this.fontStyle()+cc+this.fontVariant()+cc+(this.fontSize()+ob)+db(this.fontFamily())}_addTextLine(e){this.align()===Ia&&(e=e.trim());const r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),r=e.length;return E0().measureText(e).width+n*r}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,l=this.attrs.height,u=s!==ao&&s!==void 0,c=l!==ao&&l!==void 0,h=this.padding(),p=s-h*2,w=l-h*2,y=0,v=this.wrap(),_=v!==c2,b=v!==ub&&_,E=this.ellipsis();this.textArr=[],E0().font=this._getContextFont();const C=E?this._getTextWidth(b0):0;for(let x=0,m=e.length;x<m;++x){let k=e[x],R=this._getTextWidth(k);if(u&&R>p)for(;k.length>0;){let N=0,O=us(k).length,A="",U=0;for(;N<O;){const I=N+O>>>1,K=us(k),M=K.slice(0,I+1).join(""),V=this._getTextWidth(M);(E&&c&&y+i>w?V+C:V)<=p?(N=I+1,A=M,U=V):O=I}if(A){if(b){const M=us(k),V=us(A),z=M[V.length],Y=z===cc||z===a2;let te;if(Y&&U<=p)te=V.length;else{const ee=V.lastIndexOf(cc),F=V.lastIndexOf(a2);te=Math.max(ee,F)+1}te>0&&(N=te,A=M.slice(0,N).join(""),U=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),r=Math.max(r,U),y+=i,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(k=us(k).slice(N).join("").trimLeft(),k.length>0&&(R=this._getTextWidth(k),R<=p)){this._addTextLine(k),y+=i,r=Math.max(r,R);break}}else break}else this._addTextLine(k),y+=i,r=Math.max(r,R),this._shouldHandleEllipsis(y)&&x<m-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&y+i>w)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){const n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==ao&&i!==void 0,l=this.padding(),u=i-l*2;return!(this.wrap()!==c2)||s&&e+r>u}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==ao&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),l=this.textArr[this.textArr.length-1];!l||!s||(n&&(this._getTextWidth(l.text+b0)<i||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+b0))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};ta.Text=dt;dt.prototype._fillFunc=hb;dt.prototype._strokeFunc=fb;dt.prototype.className=rb;dt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,JC._registerNode)(dt);Zt.Factory.overWriteSetter(dt,"width",(0,Vi.getNumberOrAutoValidator)());Zt.Factory.overWriteSetter(dt,"height",(0,Vi.getNumberOrAutoValidator)());Zt.Factory.addGetterSetter(dt,"direction",H4);Zt.Factory.addGetterSetter(dt,"fontFamily","Arial");Zt.Factory.addGetterSetter(dt,"fontSize",12,(0,Vi.getNumberValidator)());Zt.Factory.addGetterSetter(dt,"fontStyle",q4);Zt.Factory.addGetterSetter(dt,"fontVariant",q4);Zt.Factory.addGetterSetter(dt,"padding",0,(0,Vi.getNumberValidator)());Zt.Factory.addGetterSetter(dt,"align",K4);Zt.Factory.addGetterSetter(dt,"verticalAlign",ib);Zt.Factory.addGetterSetter(dt,"lineHeight",1,(0,Vi.getNumberValidator)());Zt.Factory.addGetterSetter(dt,"wrap",lb);Zt.Factory.addGetterSetter(dt,"ellipsis",!1,(0,Vi.getBooleanValidator)());Zt.Factory.addGetterSetter(dt,"letterSpacing",0,(0,Vi.getNumberValidator)());Zt.Factory.addGetterSetter(dt,"text","",(0,Vi.getStringValidator)());Zt.Factory.addGetterSetter(dt,"textDecoration","");var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.TextPath=void 0;const P0=at,cr=Ee,gb=Et,La=Zo,T0=ta,X4=ge,mb=ke,yb="",Q4="normal";function J4(t){t.fillText(this.partialText,0,0)}function Z4(t){t.strokeText(this.partialText,0,0)}class Pt extends gb.Shape{constructor(e){super(e),this.dummyCanvas=P0.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return La.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:La.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=La.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(let l=0;l<s.length;l++){e.save();const u=s[l].p0;e.translate(u.x,u.y),e.rotate(s[l].rotation),this.partialText=s[l].text,e.fillStrokeShape(this),n==="underline"&&(l===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;e.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const i=n[r].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P0.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return T0.Text.prototype.setText.call(this,e)}_getContextFont(){return T0.Text.prototype._getContextFont.call(this)}_getTextSize(e){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let u=0;i==="center"&&(u=Math.max(0,this.pathLength/2-l/2)),i==="right"&&(u=Math.max(0,this.pathLength-l));const c=(0,T0.stringToArray)(this.text());let h=u;for(let p=0;p<c.length;p++){const w=this._getPointAtLength(h);if(!w)return;let y=this._getTextSize(c[p]).width+r;if(c[p]===" "&&i==="justify"){const x=this.text().split(" ").length-1;y+=(this.pathLength-l)/x}const v=this._getPointAtLength(h+y);if(!v)return;const _=La.Path.getLineLength(w.x,w.y,v.x,v.y);let b=0;if(s)try{b=s(c[p-1],c[p])*this.fontSize()}catch{b=0}w.x+=b,v.x+=b,this.textWidth+=b;const E=La.Path.getPointOnLine(b+_/2,w.x,w.y,v.x,v.y),C=Math.atan2(v.y-w.y,v.x-w.x);this.glyphInfo.push({transposeX:E.x,transposeY:E.y,text:c[p],rotation:C,p0:w,p1:v}),h+=y}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(h){e.push(h.p0.x),e.push(h.p0.y),e.push(h.p1.x),e.push(h.p1.y)});let n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,l,u;for(let h=0;h<e.length/2;h++)l=e[h*2],u=e[h*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,u),s=Math.max(s,u);const c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:s-i+c}}destroy(){return P0.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Jd.TextPath=Pt;Pt.prototype._fillFunc=J4;Pt.prototype._strokeFunc=Z4;Pt.prototype._fillFuncHit=J4;Pt.prototype._strokeFuncHit=Z4;Pt.prototype.className="TextPath";Pt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,mb._registerNode)(Pt);cr.Factory.addGetterSetter(Pt,"data");cr.Factory.addGetterSetter(Pt,"fontFamily","Arial");cr.Factory.addGetterSetter(Pt,"fontSize",12,(0,X4.getNumberValidator)());cr.Factory.addGetterSetter(Pt,"fontStyle",Q4);cr.Factory.addGetterSetter(Pt,"align","left");cr.Factory.addGetterSetter(Pt,"letterSpacing",0,(0,X4.getNumberValidator)());cr.Factory.addGetterSetter(Pt,"textBaseline","middle");cr.Factory.addGetterSetter(Pt,"fontVariant",Q4);cr.Factory.addGetterSetter(Pt,"text",yb);cr.Factory.addGetterSetter(Pt,"textDecoration","");cr.Factory.addGetterSetter(Pt,"kerningFunc",void 0);var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.Transformer=void 0;const Be=at,De=Ee,d2=tt,vb=Et,_b=$l,h2=Qo,er=ke,$i=ge,wb=ke,e3="tr-konva",Sb=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${e3}`).join(" "),f2="nodesRect",xb=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],kb={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Cb="ontouchstart"in er.Konva._global;function bb(t,e,n){if(t==="rotater")return n;e+=Be.Util.degToRad(kb[t]||0);const r=(Be.Util.radToDeg(e)%360+360)%360;return Be.Util._inRange(r,315+22.5,360)||Be.Util._inRange(r,0,22.5)?"ns-resize":Be.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Be.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Be.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Be.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Be.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Be.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Be.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Be.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const id=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Eb(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function t3(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:i}}function Pb(t,e){const n=Eb(t);return t3(t,e,n)}function Tb(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=er.Konva.getAngle(t[i]),l=Math.abs(s-e)%(Math.PI*2);Math.min(l,Math.PI*2-l)<n&&(r=s)}return r}let Hp=0,Ne=class extends h2.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Sb,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Be.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return e3+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(i=>i.isAncestorOf(this)?(Be.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(i._attrsAffectingSize.length){const l=i._attrsAffectingSize.map(u=>u+"Change."+this._getEventNamespace()).join(" ");i.on(l,s)}i.on(xb.map(l=>l+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,l=i.y-n.y;this.nodes().forEach(u=>{if(u===e||u.isDragging())return;const c=u.getAbsolutePosition();u.setAbsolutePosition({x:c.x+s,y:c.y+l}),u.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f2),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f2,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),l=e.getAbsolutePosition(r),u=i.x*s.x-e.offsetX()*s.x,c=i.y*s.y-e.offsetY()*s.y,h=(er.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:l.x+u*Math.cos(h)+c*Math.sin(-h),y:l.y+c*Math.cos(h)+u*Math.sin(h),width:i.width*s.x,height:i.height*s.y,rotation:h};return t3(p,-er.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(h=>{const p=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),w=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],y=h.getAbsoluteTransform();w.forEach(function(v){const _=y.point(v);n.push(_)})});const r=new Be.Transform;r.rotate(-er.Konva.getAngle(this.rotation()));let i=1/0,s=1/0,l=-1/0,u=-1/0;n.forEach(function(h){const p=r.point(h);i===void 0&&(i=l=p.x,s=u=p.y),i=Math.min(i,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y)}),r.invert();const c=r.point({x:i,y:s});return{x:c.x,y:c.y,width:l-i,height:u-s,rotation:er.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),id.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new _b.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Cb?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{const i=er.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),l=bb(e,i,s);n.getStage().content&&(n.getStage().content.style.cursor=l),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new vb.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const i=r.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*Be.Util._sign(r.height())-s),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const l=e.target.getAbsolutePosition(),u=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:u.x-l.x,y:u.y-l.y},Hp++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){let n,r,i;const s=this.findOne("."+this._movingAnchorName),l=s.getStage();l.setPointersPositions(e);const u=l.getPointerPosition();let c={x:u.x-this._anchorDragOffset.x,y:u.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(h,c,e)),s.setAbsolutePosition(c);const p=s.getAbsolutePosition();if(h.x===p.x&&h.y===p.y)return;if(this._movingAnchorName==="rotater"){const x=this._getNodeRect();n=s.x()-x.width/2,r=-s.y()+x.height/2;let m=Math.atan2(-r,n)+Math.PI/2;x.height<0&&(m-=Math.PI);const R=er.Konva.getAngle(this.rotation())+m,N=er.Konva.getAngle(this.rotationSnapTolerance()),A=Tb(this.rotationSnaps(),R,N)-x.rotation,U=Pb(x,A);this._fitNodesInto(U,e);return}const w=this.shiftBehavior();let y;w==="inverted"?y=this.keepRatio()&&!e.shiftKey:w==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;let v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){const x=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(x.x-s.x(),2)+Math.pow(x.y-s.y(),2));const m=this.findOne(".top-left").x()>x.x?-1:1,k=this.findOne(".top-left").y()>x.y?-1:1;n=i*this.cos*m,r=i*this.sin*k,this.findOne(".top-left").x(x.x-n),this.findOne(".top-left").y(x.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(y){const x=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-x.x,2)+Math.pow(x.y-s.y(),2));const m=this.findOne(".top-right").x()<x.x?-1:1,k=this.findOne(".top-right").y()>x.y?-1:1;n=i*this.cos*m,r=i*this.sin*k,this.findOne(".top-right").x(x.x+n),this.findOne(".top-right").y(x.y-r)}var _=s.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(y){const x=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(x.x-s.x(),2)+Math.pow(s.y()-x.y,2));const m=x.x<s.x()?-1:1,k=s.y()<x.y?-1:1;n=i*this.cos*m,r=i*this.sin*k,s.x(x.x-n),s.y(x.y+r)}_=s.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(y){const x=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-x.x,2)+Math.pow(s.y()-x.y,2));const m=this.findOne(".bottom-right").x()<x.x?-1:1,k=this.findOne(".bottom-right").y()<x.y?-1:1;n=i*this.cos*m,r=i*this.sin*k,this.findOne(".bottom-right").x(x.x+n),this.findOne(".bottom-right").y(x.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(v=this.centeredScaling()||e.altKey,v){const x=this.findOne(".top-left"),m=this.findOne(".bottom-right"),k=x.x(),R=x.y(),N=this.getWidth()-m.x(),O=this.getHeight()-m.y();m.move({x:-k,y:-R}),x.move({x:N,y:O})}const b=this.findOne(".top-left").getAbsolutePosition();n=b.x,r=b.y;const E=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:E,height:C,rotation:er.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();Hp--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:e,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const r=this._getNodeRect(),i=1;if(Be.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(Be.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=new Be.Transform;if(s.rotate(er.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=s.point({x:-this.padding()*2,y:0});e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=s.point({x:0,y:-this.padding()*2});e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(r,e);y?e=y:Be.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const l=1e7,u=new Be.Transform;u.translate(r.x,r.y),u.rotate(r.rotation),u.scale(r.width/l,r.height/l);const c=new Be.Transform,h=e.width/l,p=e.height/l;this.flipEnabled()===!1?(c.translate(e.x,e.y),c.rotate(e.rotation),c.translate(e.width<0?e.width:0,e.height<0?e.height:0),c.scale(Math.abs(h),Math.abs(p))):(c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(h,p));const w=c.multiply(u.invert());this._nodes.forEach(y=>{var v;const _=y.getParent().getAbsoluteTransform(),b=y.getTransform().copy();b.translate(y.offsetX(),y.offsetY());const E=new Be.Transform;E.multiply(_.copy().invert()).multiply(w).multiply(_).multiply(b);const C=E.decompose();y.setAttrs(C),(v=y.getLayer())===null||v===void 0||v.batchDraw()}),this.rotation(Be.Util._getRotation(e.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(Be.Util._getRotation(n.rotation));const r=n.width,i=n.height,s=this.enabledAnchors(),l=this.resizeEnabled(),u=this.padding(),c=this.anchorSize(),h=this.find("._anchor");h.forEach(w=>{w.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+u,offsetY:c/2+u,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+u,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-u,offsetY:c/2+u,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:c/2+u,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:c/2-u,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:c/2+u,offsetY:c/2-u,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:c/2-u,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:c/2-u,offsetY:c/2-u,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Be.Util._sign(i)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const p=this.anchorStyleFunc();p&&h.forEach(w=>{p(w)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),h2.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return d2.Node.prototype.toObject.call(this)}clone(e){return d2.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Zd.Transformer=Ne;Ne.isTransforming=()=>Hp>0;function Rb(t){return t instanceof Array||Be.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){id.indexOf(e)===-1&&Be.Util.warn("Unknown anchor name: "+e+". Available names are: "+id.join(", "))}),t||[]}Ne.prototype.className="Transformer";(0,wb._registerNode)(Ne);De.Factory.addGetterSetter(Ne,"enabledAnchors",id,Rb);De.Factory.addGetterSetter(Ne,"flipEnabled",!0,(0,$i.getBooleanValidator)());De.Factory.addGetterSetter(Ne,"resizeEnabled",!0);De.Factory.addGetterSetter(Ne,"anchorSize",10,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"rotateEnabled",!0);De.Factory.addGetterSetter(Ne,"rotateLineVisible",!0);De.Factory.addGetterSetter(Ne,"rotationSnaps",[]);De.Factory.addGetterSetter(Ne,"rotateAnchorOffset",50,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"rotateAnchorCursor","crosshair");De.Factory.addGetterSetter(Ne,"rotationSnapTolerance",5,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"borderEnabled",!0);De.Factory.addGetterSetter(Ne,"anchorStroke","rgb(0, 161, 255)");De.Factory.addGetterSetter(Ne,"anchorStrokeWidth",1,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"anchorFill","white");De.Factory.addGetterSetter(Ne,"anchorCornerRadius",0,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"borderStroke","rgb(0, 161, 255)");De.Factory.addGetterSetter(Ne,"borderStrokeWidth",1,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"borderDash");De.Factory.addGetterSetter(Ne,"keepRatio",!0);De.Factory.addGetterSetter(Ne,"shiftBehavior","default");De.Factory.addGetterSetter(Ne,"centeredScaling",!1);De.Factory.addGetterSetter(Ne,"ignoreStroke",!1);De.Factory.addGetterSetter(Ne,"padding",0,(0,$i.getNumberValidator)());De.Factory.addGetterSetter(Ne,"nodes");De.Factory.addGetterSetter(Ne,"node");De.Factory.addGetterSetter(Ne,"boundBoxFunc");De.Factory.addGetterSetter(Ne,"anchorDragBoundFunc");De.Factory.addGetterSetter(Ne,"anchorStyleFunc");De.Factory.addGetterSetter(Ne,"shouldOverdrawWholeArea",!1);De.Factory.addGetterSetter(Ne,"useSingleNodeRotation",!0);De.Factory.backCompat(Ne,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var eh={};Object.defineProperty(eh,"__esModule",{value:!0});eh.Wedge=void 0;const th=Ee,Nb=Et,Ab=ke,n3=ge,Ob=ke;class Jr extends Nb.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Ab.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}eh.Wedge=Jr;Jr.prototype.className="Wedge";Jr.prototype._centroid=!0;Jr.prototype._attrsAffectingSize=["radius"];(0,Ob._registerNode)(Jr);th.Factory.addGetterSetter(Jr,"radius",0,(0,n3.getNumberValidator)());th.Factory.addGetterSetter(Jr,"angle",0,(0,n3.getNumberValidator)());th.Factory.addGetterSetter(Jr,"clockwise",!1);th.Factory.backCompat(Jr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.Blur=void 0;const p2=Ee,Ib=tt,Lb=ge;function g2(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const jb=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Mb=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Fb(t,e){const n=t.data,r=t.width,i=t.height;let s,l,u,c,h,p,w,y,v,_,b,E,C,x,m,k,R,N,O,A;const U=e+e+1,I=r-1,K=i-1,M=e+1,V=M*(M+1)/2,z=new g2,Y=jb[e],te=Mb[e];let ee=null,F=z,q=null,$=null;for(let Q=1;Q<U;Q++)F=F.next=new g2,Q===M&&(ee=F);F.next=z,u=l=0;for(let Q=0;Q<i;Q++){E=C=x=m=c=h=p=w=0,y=M*(k=n[l]),v=M*(R=n[l+1]),_=M*(N=n[l+2]),b=M*(O=n[l+3]),c+=V*k,h+=V*R,p+=V*N,w+=V*O,F=z;for(let ne=0;ne<M;ne++)F.r=k,F.g=R,F.b=N,F.a=O,F=F.next;for(let ne=1;ne<M;ne++)s=l+((I<ne?I:ne)<<2),c+=(F.r=k=n[s])*(A=M-ne),h+=(F.g=R=n[s+1])*A,p+=(F.b=N=n[s+2])*A,w+=(F.a=O=n[s+3])*A,E+=k,C+=R,x+=N,m+=O,F=F.next;q=z,$=ee;for(let ne=0;ne<r;ne++)n[l+3]=O=w*Y>>te,O!==0?(O=255/O,n[l]=(c*Y>>te)*O,n[l+1]=(h*Y>>te)*O,n[l+2]=(p*Y>>te)*O):n[l]=n[l+1]=n[l+2]=0,c-=y,h-=v,p-=_,w-=b,y-=q.r,v-=q.g,_-=q.b,b-=q.a,s=u+((s=ne+e+1)<I?s:I)<<2,E+=q.r=n[s],C+=q.g=n[s+1],x+=q.b=n[s+2],m+=q.a=n[s+3],c+=E,h+=C,p+=x,w+=m,q=q.next,y+=k=$.r,v+=R=$.g,_+=N=$.b,b+=O=$.a,E-=k,C-=R,x-=N,m-=O,$=$.next,l+=4;u+=r}for(let Q=0;Q<r;Q++){C=x=m=E=h=p=w=c=0,l=Q<<2,y=M*(k=n[l]),v=M*(R=n[l+1]),_=M*(N=n[l+2]),b=M*(O=n[l+3]),c+=V*k,h+=V*R,p+=V*N,w+=V*O,F=z;for(let me=0;me<M;me++)F.r=k,F.g=R,F.b=N,F.a=O,F=F.next;let ne=r;for(let me=1;me<=e;me++)l=ne+Q<<2,c+=(F.r=k=n[l])*(A=M-me),h+=(F.g=R=n[l+1])*A,p+=(F.b=N=n[l+2])*A,w+=(F.a=O=n[l+3])*A,E+=k,C+=R,x+=N,m+=O,F=F.next,me<K&&(ne+=r);l=Q,q=z,$=ee;for(let me=0;me<i;me++)s=l<<2,n[s+3]=O=w*Y>>te,O>0?(O=255/O,n[s]=(c*Y>>te)*O,n[s+1]=(h*Y>>te)*O,n[s+2]=(p*Y>>te)*O):n[s]=n[s+1]=n[s+2]=0,c-=y,h-=v,p-=_,w-=b,y-=q.r,v-=q.g,_-=q.b,b-=q.a,s=Q+((s=me+M)<K?s:K)*r<<2,c+=E+=q.r=n[s],h+=C+=q.g=n[s+1],p+=x+=q.b=n[s+2],w+=m+=q.a=n[s+3],q=q.next,y+=k=$.r,v+=R=$.g,_+=N=$.b,b+=O=$.a,E-=k,C-=R,x-=N,m-=O,$=$.next,l+=r}}const Db=function(e){const n=Math.round(this.blurRadius());n>0&&Fb(e,n)};nh.Blur=Db;p2.Factory.addGetterSetter(Ib.Node,"blurRadius",0,(0,Lb.getNumberValidator)(),p2.Factory.afterSetFilter);var rh={};Object.defineProperty(rh,"__esModule",{value:!0});rh.Brighten=void 0;const m2=Ee,Ub=tt,zb=ge,Bb=function(t){const e=this.brightness()*255,n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};rh.Brighten=Bb;m2.Factory.addGetterSetter(Ub.Node,"brightness",0,(0,zb.getNumberValidator)(),m2.Factory.afterSetFilter);var ih={};Object.defineProperty(ih,"__esModule",{value:!0});ih.Contrast=void 0;const y2=Ee,Gb=tt,Vb=ge,$b=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length;let i=150,s=150,l=150;for(let u=0;u<r;u+=4)i=n[u],s=n[u+1],l=n[u+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,n[u]=i,n[u+1]=s,n[u+2]=l};ih.Contrast=$b;y2.Factory.addGetterSetter(Gb.Node,"contrast",0,(0,Vb.getNumberValidator)(),y2.Factory.afterSetFilter);var sh={};Object.defineProperty(sh,"__esModule",{value:!0});sh.Emboss=void 0;const ji=Ee,oh=tt,Wb=at,r3=ge,Hb=function(t){const e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=t.data,l=t.width,u=t.height,c=l*4;let h=0,p=0,w=u;switch(r){case"top-left":h=-1,p=-1;break;case"top":h=-1,p=0;break;case"top-right":h=-1,p=1;break;case"right":h=0,p=1;break;case"bottom-right":h=1,p=1;break;case"bottom":h=1,p=0;break;case"bottom-left":h=1,p=-1;break;case"left":h=0,p=-1;break;default:Wb.Util.error("Unknown emboss direction: "+r)}do{const y=(w-1)*c;let v=h;w+v<1&&(v=0),w+v>u&&(v=0);const _=(w-1+v)*l*4;let b=l;do{const E=y+(b-1)*4;let C=p;b+C<1&&(C=0),b+C>l&&(C=0);const x=_+(b-1+C)*4,m=s[E]-s[x],k=s[E+1]-s[x+1],R=s[E+2]-s[x+2];let N=m;const O=N>0?N:-N,A=k>0?k:-k,U=R>0?R:-R;if(A>O&&(N=k),U>O&&(N=R),N*=e,i){const I=s[E]+N,K=s[E+1]+N,M=s[E+2]+N;s[E]=I>255?255:I<0?0:I,s[E+1]=K>255?255:K<0?0:K,s[E+2]=M>255?255:M<0?0:M}else{let I=n-N;I<0?I=0:I>255&&(I=255),s[E]=s[E+1]=s[E+2]=I}}while(--b)}while(--w)};sh.Emboss=Hb;ji.Factory.addGetterSetter(oh.Node,"embossStrength",.5,(0,r3.getNumberValidator)(),ji.Factory.afterSetFilter);ji.Factory.addGetterSetter(oh.Node,"embossWhiteLevel",.5,(0,r3.getNumberValidator)(),ji.Factory.afterSetFilter);ji.Factory.addGetterSetter(oh.Node,"embossDirection","top-left",void 0,ji.Factory.afterSetFilter);ji.Factory.addGetterSetter(oh.Node,"embossBlend",!1,void 0,ji.Factory.afterSetFilter);var ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.Enhance=void 0;const v2=Ee,Kb=tt,qb=ge;function R0(t,e,n,r,i){const s=n-e,l=i-r;if(s===0)return r+l/2;if(l===0)return r;let u=(t-e)/s;return u=l*u+r,u}const Yb=function(t){const e=t.data,n=e.length;let r=e[0],i=r,s,l=e[1],u=l,c,h=e[2],p=h,w;const y=this.enhance();if(y===0)return;for(let m=0;m<n;m+=4)s=e[m+0],s<r?r=s:s>i&&(i=s),c=e[m+1],c<l?l=c:c>u&&(u=c),w=e[m+2],w<h?h=w:w>p&&(p=w);i===r&&(i=255,r=0),u===l&&(u=255,l=0),p===h&&(p=255,h=0);let v,_,b,E,C,x;if(y>0)v=i+y*(255-i),_=r-y*(r-0),b=u+y*(255-u),E=l-y*(l-0),C=p+y*(255-p),x=h-y*(h-0);else{const m=(i+r)*.5;v=i+y*(i-m),_=r+y*(r-m);const k=(u+l)*.5;b=u+y*(u-k),E=l+y*(l-k);const R=(p+h)*.5;C=p+y*(p-R),x=h+y*(h-R)}for(let m=0;m<n;m+=4)e[m+0]=R0(e[m+0],r,i,_,v),e[m+1]=R0(e[m+1],l,u,E,b),e[m+2]=R0(e[m+2],h,p,x,C)};ah.Enhance=Yb;v2.Factory.addGetterSetter(Kb.Node,"enhance",0,(0,qb.getNumberValidator)(),v2.Factory.afterSetFilter);var lh={};Object.defineProperty(lh,"__esModule",{value:!0});lh.Grayscale=void 0;const Xb=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=.34*e[r]+.5*e[r+1]+.16*e[r+2];e[r]=i,e[r+1]=i,e[r+2]=i}};lh.Grayscale=Xb;var uh={};Object.defineProperty(uh,"__esModule",{value:!0});uh.HSL=void 0;const Go=Ee,om=tt,am=ge;Go.Factory.addGetterSetter(om.Node,"hue",0,(0,am.getNumberValidator)(),Go.Factory.afterSetFilter);Go.Factory.addGetterSetter(om.Node,"saturation",0,(0,am.getNumberValidator)(),Go.Factory.afterSetFilter);Go.Factory.addGetterSetter(om.Node,"luminance",0,(0,am.getNumberValidator)(),Go.Factory.afterSetFilter);const Qb=function(t){const e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=this.luminance()*127,u=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),h=.299*r+.701*u+.167*c,p=.587*r-.587*u+.33*c,w=.114*r-.114*u-.497*c,y=.299*r-.299*u-.328*c,v=.587*r+.413*u+.035*c,_=.114*r-.114*u+.293*c,b=.299*r-.3*u+1.25*c,E=.587*r-.586*u-1.05*c,C=.114*r+.886*u-.2*c;let x,m,k,R;for(let N=0;N<n;N+=4)x=e[N+0],m=e[N+1],k=e[N+2],R=e[N+3],e[N+0]=h*x+p*m+w*k+l,e[N+1]=y*x+v*m+_*k+l,e[N+2]=b*x+E*m+C*k+l,e[N+3]=R};uh.HSL=Qb;var ch={};Object.defineProperty(ch,"__esModule",{value:!0});ch.HSV=void 0;const Vo=Ee,lm=tt,um=ge,Jb=function(t){const e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=r*i*Math.cos(s*Math.PI/180),u=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*l+.167*u,h=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,w=.299*r-.299*l-.328*u,y=.587*r+.413*l+.035*u,v=.114*r-.114*l+.293*u,_=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,E=.114*r+.886*l-.2*u;for(let C=0;C<n;C+=4){const x=e[C+0],m=e[C+1],k=e[C+2],R=e[C+3];e[C+0]=c*x+h*m+p*k,e[C+1]=w*x+y*m+v*k,e[C+2]=_*x+b*m+E*k,e[C+3]=R}};ch.HSV=Jb;Vo.Factory.addGetterSetter(lm.Node,"hue",0,(0,um.getNumberValidator)(),Vo.Factory.afterSetFilter);Vo.Factory.addGetterSetter(lm.Node,"saturation",0,(0,um.getNumberValidator)(),Vo.Factory.afterSetFilter);Vo.Factory.addGetterSetter(lm.Node,"value",0,(0,um.getNumberValidator)(),Vo.Factory.afterSetFilter);var dh={};Object.defineProperty(dh,"__esModule",{value:!0});dh.Invert=void 0;const Zb=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};dh.Invert=Zb;var hh={};Object.defineProperty(hh,"__esModule",{value:!0});hh.Kaleidoscope=void 0;const sd=Ee,i3=tt,_2=at,s3=ge,eE=function(t,e,n){const r=t.data,i=e.data,s=t.width,l=t.height,u=n.polarCenterX||s/2,c=n.polarCenterY||l/2;let h=Math.sqrt(u*u+c*c),p=s-u,w=l-c;const y=Math.sqrt(p*p+w*w);h=y>h?y:h;const v=l,_=s,b=360/_*Math.PI/180;for(let E=0;E<_;E+=1){const C=Math.sin(E*b),x=Math.cos(E*b);for(let m=0;m<v;m+=1){p=Math.floor(u+h*m/v*x),w=Math.floor(c+h*m/v*C);let k=(w*s+p)*4;const R=r[k+0],N=r[k+1],O=r[k+2],A=r[k+3];k=(E+m*s)*4,i[k+0]=R,i[k+1]=N,i[k+2]=O,i[k+3]=A}}},tE=function(t,e,n){const r=t.data,i=e.data,s=t.width,l=t.height,u=n.polarCenterX||s/2,c=n.polarCenterY||l/2;let h=Math.sqrt(u*u+c*c),p=s-u,w=l-c;const y=Math.sqrt(p*p+w*w);h=y>h?y:h;const v=l,_=s,b=0;let E,C;for(p=0;p<s;p+=1)for(w=0;w<l;w+=1){const x=p-u,m=w-c,k=Math.sqrt(x*x+m*m)*v/h;let R=(Math.atan2(m,x)*180/Math.PI+360+b)%360;R=R*_/360,E=Math.floor(R),C=Math.floor(k);let N=(C*s+E)*4;const O=r[N+0],A=r[N+1],U=r[N+2],I=r[N+3];N=(w*s+p)*4,i[N+0]=O,i[N+1]=A,i[N+2]=U,i[N+3]=I}},nE=function(t){const e=t.width,n=t.height;let r,i,s,l,u,c,h,p,w,y,v=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),b=Math.floor(e*(_%360)/360);if(v<1)return;const E=_2.Util.createCanvasElement();E.width=e,E.height=n;const C=E.getContext("2d").getImageData(0,0,e,n);_2.Util.releaseCanvas(E),eE(t,C,{polarCenterX:e/2,polarCenterY:n/2});let x=e/Math.pow(2,v);for(;x<=8;)x=x*2,v-=1;x=Math.ceil(x);let m=x,k=0,R=m,N=1;for(b+x>e&&(k=m,R=0,N=-1),i=0;i<n;i+=1)for(r=k;r!==R;r+=N)s=Math.round(r+b)%e,w=(e*i+s)*4,u=C.data[w+0],c=C.data[w+1],h=C.data[w+2],p=C.data[w+3],y=(e*i+r)*4,C.data[y+0]=u,C.data[y+1]=c,C.data[y+2]=h,C.data[y+3]=p;for(i=0;i<n;i+=1)for(m=Math.floor(x),l=0;l<v;l+=1){for(r=0;r<m+1;r+=1)w=(e*i+r)*4,u=C.data[w+0],c=C.data[w+1],h=C.data[w+2],p=C.data[w+3],y=(e*i+m*2-r-1)*4,C.data[y+0]=u,C.data[y+1]=c,C.data[y+2]=h,C.data[y+3]=p;m*=2}tE(C,t,{})};hh.Kaleidoscope=nE;sd.Factory.addGetterSetter(i3.Node,"kaleidoscopePower",2,(0,s3.getNumberValidator)(),sd.Factory.afterSetFilter);sd.Factory.addGetterSetter(i3.Node,"kaleidoscopeAngle",0,(0,s3.getNumberValidator)(),sd.Factory.afterSetFilter);var fh={};Object.defineProperty(fh,"__esModule",{value:!0});fh.Mask=void 0;const w2=Ee,rE=tt,iE=ge;function hc(t,e,n){let r=(n*t.width+e)*4;const i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function ja(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function sE(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function oE(t,e){const n=hc(t,0,0),r=hc(t,t.width-1,0),i=hc(t,0,t.height-1),s=hc(t,t.width-1,t.height-1),l=e||10;if(ja(n,r)<l&&ja(r,s)<l&&ja(s,i)<l&&ja(i,n)<l){const u=sE([r,n,s,i]),c=[];for(let h=0;h<t.width*t.height;h++){const p=ja(u,[t.data[h*4],t.data[h*4+1],t.data[h*4+2]]);c[h]=p<l?0:255}return c}}function aE(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function lE(t,e,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let u=0;u<n;u++)for(let c=0;c<e;c++){const h=u*e+c;let p=0;for(let w=0;w<i;w++)for(let y=0;y<i;y++){const v=u+w-s,_=c+y-s;if(v>=0&&v<n&&_>=0&&_<e){const b=v*e+_,E=r[w*i+y];p+=t[b]*E}}l[h]=p===255*8?255:0}return l}function uE(t,e,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let u=0;u<n;u++)for(let c=0;c<e;c++){const h=u*e+c;let p=0;for(let w=0;w<i;w++)for(let y=0;y<i;y++){const v=u+w-s,_=c+y-s;if(v>=0&&v<n&&_>=0&&_<e){const b=v*e+_,E=r[w*i+y];p+=t[b]*E}}l[h]=p>=255*4?255:0}return l}function cE(t,e,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let u=0;u<n;u++)for(let c=0;c<e;c++){const h=u*e+c;let p=0;for(let w=0;w<i;w++)for(let y=0;y<i;y++){const v=u+w-s,_=c+y-s;if(v>=0&&v<n&&_>=0&&_<e){const b=v*e+_,E=r[w*i+y];p+=t[b]*E}}l[h]=p}return l}const dE=function(t){const e=this.threshold();let n=oE(t,e);return n&&(n=lE(n,t.width,t.height),n=uE(n,t.width,t.height),n=cE(n,t.width,t.height),aE(t,n)),t};fh.Mask=dE;w2.Factory.addGetterSetter(rE.Node,"threshold",0,(0,iE.getNumberValidator)(),w2.Factory.afterSetFilter);var ph={};Object.defineProperty(ph,"__esModule",{value:!0});ph.Noise=void 0;const S2=Ee,hE=tt,fE=ge,pE=function(t){const e=this.noise()*255,n=t.data,r=n.length,i=e/2;for(let s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};ph.Noise=pE;S2.Factory.addGetterSetter(hE.Node,"noise",.2,(0,fE.getNumberValidator)(),S2.Factory.afterSetFilter);var gh={};Object.defineProperty(gh,"__esModule",{value:!0});gh.Pixelate=void 0;const x2=Ee,gE=at,mE=tt,yE=ge,vE=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i=Math.ceil(n/e),s=Math.ceil(r/e),l=t.data;if(e<=0){gE.Util.error("pixelSize value can not be <= 0");return}for(let u=0;u<i;u+=1)for(let c=0;c<s;c+=1){let h=0,p=0,w=0,y=0;const v=u*e,_=v+e,b=c*e,E=b+e;let C=0;for(let x=v;x<_;x+=1)if(!(x>=n))for(let m=b;m<E;m+=1){if(m>=r)continue;const k=(n*m+x)*4;h+=l[k+0],p+=l[k+1],w+=l[k+2],y+=l[k+3],C+=1}h=h/C,p=p/C,w=w/C,y=y/C;for(let x=v;x<_;x+=1)if(!(x>=n))for(let m=b;m<E;m+=1){if(m>=r)continue;const k=(n*m+x)*4;l[k+0]=h,l[k+1]=p,l[k+2]=w,l[k+3]=y}}};gh.Pixelate=vE;x2.Factory.addGetterSetter(mE.Node,"pixelSize",8,(0,yE.getNumberValidator)(),x2.Factory.afterSetFilter);var mh={};Object.defineProperty(mh,"__esModule",{value:!0});mh.Posterize=void 0;const k2=Ee,_E=tt,wE=ge,SE=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e;for(let s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};mh.Posterize=SE;k2.Factory.addGetterSetter(_E.Node,"levels",.5,(0,wE.getNumberValidator)(),k2.Factory.afterSetFilter);var yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.RGB=void 0;const od=Ee,cm=tt,xE=ge,kE=function(t){const e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue();for(let l=0;l<n;l+=4){const u=(.34*e[l]+.5*e[l+1]+.16*e[l+2])/255;e[l]=u*r,e[l+1]=u*i,e[l+2]=u*s,e[l+3]=e[l+3]}};yh.RGB=kE;od.Factory.addGetterSetter(cm.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});od.Factory.addGetterSetter(cm.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});od.Factory.addGetterSetter(cm.Node,"blue",0,xE.RGBComponent,od.Factory.afterSetFilter);var vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.RGBA=void 0;const Al=Ee,_h=tt,CE=ge,bE=function(t){const e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),l=this.alpha();for(let u=0;u<n;u+=4){const c=1-l;e[u]=r*l+e[u]*c,e[u+1]=i*l+e[u+1]*c,e[u+2]=s*l+e[u+2]*c}};vh.RGBA=bE;Al.Factory.addGetterSetter(_h.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Al.Factory.addGetterSetter(_h.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Al.Factory.addGetterSetter(_h.Node,"blue",0,CE.RGBComponent,Al.Factory.afterSetFilter);Al.Factory.addGetterSetter(_h.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.Sepia=void 0;const EE=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+0],s=e[r+1],l=e[r+2];e[r+0]=Math.min(255,i*.393+s*.769+l*.189),e[r+1]=Math.min(255,i*.349+s*.686+l*.168),e[r+2]=Math.min(255,i*.272+s*.534+l*.131)}};wh.Sepia=EE;var Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.Solarize=void 0;const PE=function(t){const e=t.data,n=t.width,r=t.height,i=n*4;let s=r;do{const l=(s-1)*i;let u=n;do{const c=l+(u-1)*4;let h=e[c],p=e[c+1],w=e[c+2];h>127&&(h=255-h),p>127&&(p=255-p),w>127&&(w=255-w),e[c]=h,e[c+1]=p,e[c+2]=w}while(--u)}while(--s)};Sh.Solarize=PE;var xh={};Object.defineProperty(xh,"__esModule",{value:!0});xh.Threshold=void 0;const C2=Ee,TE=tt,RE=ge,NE=function(t){const e=this.threshold()*255,n=t.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<e?0:255};xh.Threshold=NE;C2.Factory.addGetterSetter(TE.Node,"threshold",.5,(0,RE.getNumberValidator)(),C2.Factory.afterSetFilter);Object.defineProperty(Od,"__esModule",{value:!0});Od.Konva=void 0;const b2=nd,AE=Fd,OE=zd,IE=Vd,LE=$d,jE=Wd,E2=Bo,ME=Gl,FE=Zo,DE=$l,UE=qd,zE=Yd,BE=Xd,GE=Qd,VE=ta,$E=Jd,WE=Zd,HE=eh,KE=nh,qE=rh,YE=ih,XE=sh,QE=ah,JE=lh,ZE=uh,eP=ch,tP=dh,nP=hh,rP=fh,iP=ph,sP=gh,oP=mh,aP=yh,lP=vh,uP=wh,cP=Sh,dP=xh;Od.Konva=b2.Konva.Util._assign(b2.Konva,{Arc:AE.Arc,Arrow:OE.Arrow,Circle:IE.Circle,Ellipse:LE.Ellipse,Image:jE.Image,Label:E2.Label,Tag:E2.Tag,Line:ME.Line,Path:FE.Path,Rect:DE.Rect,RegularPolygon:UE.RegularPolygon,Ring:zE.Ring,Sprite:BE.Sprite,Star:GE.Star,Text:VE.Text,TextPath:$E.TextPath,Transformer:WE.Transformer,Wedge:HE.Wedge,Filters:{Blur:KE.Blur,Brighten:qE.Brighten,Contrast:YE.Contrast,Emboss:XE.Emboss,Enhance:QE.Enhance,Grayscale:JE.Grayscale,HSL:ZE.HSL,HSV:eP.HSV,Invert:tP.Invert,Kaleidoscope:nP.Kaleidoscope,Mask:rP.Mask,Noise:iP.Noise,Pixelate:sP.Pixelate,Posterize:oP.Posterize,RGB:aP.RGB,RGBA:lP.RGBA,Sepia:uP.Sepia,Solarize:cP.Solarize,Threshold:dP.Threshold}});var hP=E4.exports;Object.defineProperty(hP,"__esModule",{value:!0});const fP=Od;E4.exports=fP.Konva;var Kp={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=nd;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=nd;t.exports=r.Konva})(Kp,Kp.exports);var pP=Kp.exports;const Ol=Yp(pP);var o3={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=function(e){var n={},r=W,i=$a,s=Object.assign;function l(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),R=Symbol.iterator;function N(o){return o===null||typeof o!="object"?null:(o=R&&o[R]||o["@@iterator"],typeof o=="function"?o:null)}function O(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case p:return"Fragment";case h:return"Portal";case y:return"Profiler";case w:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case _:return(o.displayName||"Context")+".Consumer";case v:return(o._context.displayName||"Context")+".Provider";case b:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case x:return a=o.displayName||null,a!==null?a:O(o.type)||"Memo";case m:a=o._payload,o=o._init;try{return O(o(a))}catch{}}return null}function A(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(a);case 8:return a===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function U(o){var a=o,d=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,a.flags&4098&&(d=a.return),o=a.return;while(o)}return a.tag===3?d:null}function I(o){if(U(o)!==o)throw Error(l(188))}function K(o){var a=o.alternate;if(!a){if(a=U(o),a===null)throw Error(l(188));return a!==o?null:o}for(var d=o,f=a;;){var g=d.return;if(g===null)break;var S=g.alternate;if(S===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===d)return I(g),o;if(S===f)return I(g),a;S=S.sibling}throw Error(l(188))}if(d.return!==f.return)d=g,f=S;else{for(var T=!1,j=g.child;j;){if(j===d){T=!0,d=g,f=S;break}if(j===f){T=!0,f=g,d=S;break}j=j.sibling}if(!T){for(j=S.child;j;){if(j===d){T=!0,d=S,f=g;break}if(j===f){T=!0,f=S,d=g;break}j=j.sibling}if(!T)throw Error(l(189))}}if(d.alternate!==f)throw Error(l(190))}if(d.tag!==3)throw Error(l(188));return d.stateNode.current===d?o:a}function M(o){return o=K(o),o!==null?V(o):null}function V(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=V(o);if(a!==null)return a;o=o.sibling}return null}function z(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){if(o.tag!==4){var a=z(o);if(a!==null)return a}o=o.sibling}return null}var Y=Array.isArray,te=e.getPublicInstance,ee=e.getRootHostContext,F=e.getChildHostContext,q=e.prepareForCommit,$=e.resetAfterCommit,Q=e.createInstance,ne=e.appendInitialChild,me=e.finalizeInitialChildren,Fe=e.prepareUpdate,Ue=e.shouldSetTextContent,Re=e.createTextInstance,L=e.scheduleTimeout,X=e.cancelTimeout,ae=e.noTimeout,de=e.isPrimaryRenderer,ce=e.supportsMutation,we=e.supportsPersistence,Oe=e.supportsHydration,Vt=e.getInstanceFromNode,Ce=e.preparePortalMount,Pn=e.getCurrentEventPriority,Wn=e.detachDeletedInstance,Zr=e.supportsMicrotasks,b3=e.scheduleMicrotask,ra=e.supportsTestSelectors,E3=e.findFiberRoot,P3=e.getBoundingRect,T3=e.getTextContent,ia=e.isHiddenSubtree,R3=e.matchAccessibilityRole,N3=e.setFocusIfFocusable,A3=e.setupIntersectionObserver,O3=e.appendChild,I3=e.appendChildToContainer,L3=e.commitTextUpdate,j3=e.commitMount,M3=e.commitUpdate,F3=e.insertBefore,D3=e.insertInContainerBefore,U3=e.removeChild,z3=e.removeChildFromContainer,vm=e.resetTextContent,B3=e.hideInstance,G3=e.hideTextInstance,V3=e.unhideInstance,$3=e.unhideTextInstance,W3=e.clearContainer,H3=e.cloneInstance,_m=e.createContainerChildSet,wm=e.appendChildToContainerChildSet,K3=e.finalizeContainerChildren,Ch=e.replaceContainerChildren,Sm=e.cloneHiddenInstance,xm=e.cloneHiddenTextInstance,q3=e.canHydrateInstance,Y3=e.canHydrateTextInstance,X3=e.canHydrateSuspenseInstance,km=e.isSuspenseInstancePending,bh=e.isSuspenseInstanceFallback,Q3=e.getSuspenseInstanceFallbackErrorDetails,J3=e.registerSuspenseInstanceRetry,Hl=e.getNextHydratableSibling,Z3=e.getFirstHydratableChild,e5=e.getFirstHydratableChildWithinContainer,t5=e.getFirstHydratableChildWithinSuspenseInstance,n5=e.hydrateInstance,r5=e.hydrateTextInstance,i5=e.hydrateSuspenseInstance,s5=e.getNextHydratableInstanceAfterSuspenseInstance,o5=e.commitHydratedContainer,a5=e.commitHydratedSuspenseInstance,l5=e.clearSuspenseBoundary,u5=e.clearSuspenseBoundaryFromContainer,c5=e.shouldDeleteUnhydratedTailInstances,d5=e.didNotMatchHydratedContainerTextInstance,h5=e.didNotMatchHydratedTextInstance,Eh;function sa(o){if(Eh===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Eh=a&&a[1]||""}return`
`+Eh+o}var Ph=!1;function Th(o,a){if(!o||Ph)return"";Ph=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Z){var f=Z}Reflect.construct(o,[],a)}else{try{a.call()}catch(Z){f=Z}o.call(a.prototype)}else{try{throw Error()}catch(Z){f=Z}o()}}catch(Z){if(Z&&f&&typeof Z.stack=="string"){for(var g=Z.stack.split(`
`),S=f.stack.split(`
`),T=g.length-1,j=S.length-1;1<=T&&0<=j&&g[T]!==S[j];)j--;for(;1<=T&&0<=j;T--,j--)if(g[T]!==S[j]){if(T!==1||j!==1)do if(T--,j--,0>j||g[T]!==S[j]){var G=`
`+g[T].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=T&&0<=j);break}}}finally{Ph=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?sa(o):""}var f5=Object.prototype.hasOwnProperty,Rh=[],Fs=-1;function ei(o){return{current:o}}function Ke(o){0>Fs||(o.current=Rh[Fs],Rh[Fs]=null,Fs--)}function $e(o,a){Fs++,Rh[Fs]=o.current,o.current=a}var ti={},$t=ei(ti),on=ei(!1),Hi=ti;function Ds(o,a){var d=o.type.contextTypes;if(!d)return ti;var f=o.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in d)g[S]=a[S];return f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=g),g}function an(o){return o=o.childContextTypes,o!=null}function Kl(){Ke(on),Ke($t)}function Cm(o,a,d){if($t.current!==ti)throw Error(l(168));$e($t,a),$e(on,d)}function bm(o,a,d){var f=o.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(l(108,A(o)||"Unknown",g));return s({},d,f)}function ql(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ti,Hi=$t.current,$e($t,o),$e(on,on.current),!0}function Em(o,a,d){var f=o.stateNode;if(!f)throw Error(l(169));d?(o=bm(o,a,Hi),f.__reactInternalMemoizedMergedChildContext=o,Ke(on),Ke($t),$e($t,o)):Ke(on),$e(on,d)}var Hn=Math.clz32?Math.clz32:m5,p5=Math.log,g5=Math.LN2;function m5(o){return o>>>=0,o===0?32:31-(p5(o)/g5|0)|0}var Yl=64,Xl=4194304;function oa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ql(o,a){var d=o.pendingLanes;if(d===0)return 0;var f=0,g=o.suspendedLanes,S=o.pingedLanes,T=d&268435455;if(T!==0){var j=T&~g;j!==0?f=oa(j):(S&=T,S!==0&&(f=oa(S)))}else T=d&~g,T!==0?f=oa(T):S!==0&&(f=oa(S));if(f===0)return 0;if(a!==0&&a!==f&&!(a&g)&&(g=f&-f,S=a&-a,g>=S||g===16&&(S&4194240)!==0))return a;if(f&4&&(f|=d&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=f;0<a;)d=31-Hn(a),g=1<<d,f|=o[d],a&=~g;return f}function y5(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v5(o,a){for(var d=o.suspendedLanes,f=o.pingedLanes,g=o.expirationTimes,S=o.pendingLanes;0<S;){var T=31-Hn(S),j=1<<T,G=g[T];G===-1?(!(j&d)||j&f)&&(g[T]=y5(j,a)):G<=a&&(o.expiredLanes|=j),S&=~j}}function Nh(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Pm(){var o=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),o}function Ah(o){for(var a=[],d=0;31>d;d++)a.push(o);return a}function aa(o,a,d){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Hn(a),o[a]=d}function _5(o,a){var d=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var f=o.eventTimes;for(o=o.expirationTimes;0<d;){var g=31-Hn(d),S=1<<g;a[g]=0,f[g]=-1,o[g]=-1,d&=~S}}function Oh(o,a){var d=o.entangledLanes|=a;for(o=o.entanglements;d;){var f=31-Hn(d),g=1<<f;g&a|o[f]&a&&(o[f]|=a),d&=~g}}var Le=0;function Tm(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ih=i.unstable_scheduleCallback,Rm=i.unstable_cancelCallback,w5=i.unstable_shouldYield,S5=i.unstable_requestPaint,Tt=i.unstable_now,Lh=i.unstable_ImmediatePriority,x5=i.unstable_UserBlockingPriority,jh=i.unstable_NormalPriority,k5=i.unstable_IdlePriority,Jl=null,dr=null;function C5(o){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Jl,o,void 0,(o.current.flags&128)===128)}catch{}}function b5(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Kn=typeof Object.is=="function"?Object.is:b5,Er=null,Zl=!1,Mh=!1;function Nm(o){Er===null?Er=[o]:Er.push(o)}function E5(o){Zl=!0,Nm(o)}function hr(){if(!Mh&&Er!==null){Mh=!0;var o=0,a=Le;try{var d=Er;for(Le=1;o<d.length;o++){var f=d[o];do f=f(!0);while(f!==null)}Er=null,Zl=!1}catch(g){throw Er!==null&&(Er=Er.slice(o+1)),Ih(Lh,hr),g}finally{Le=a,Mh=!1}}return null}var Us=[],zs=0,eu=null,tu=0,Tn=[],Rn=0,Ki=null,Pr=1,Tr="";function qi(o,a){Us[zs++]=tu,Us[zs++]=eu,eu=o,tu=a}function Am(o,a,d){Tn[Rn++]=Pr,Tn[Rn++]=Tr,Tn[Rn++]=Ki,Ki=o;var f=Pr;o=Tr;var g=32-Hn(f)-1;f&=~(1<<g),d+=1;var S=32-Hn(a)+g;if(30<S){var T=g-g%5;S=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Pr=1<<32-Hn(a)+g|d<<g|f,Tr=S+o}else Pr=1<<S|d<<g|f,Tr=o}function Fh(o){o.return!==null&&(qi(o,1),Am(o,1,0))}function Dh(o){for(;o===eu;)eu=Us[--zs],Us[zs]=null,tu=Us[--zs],Us[zs]=null;for(;o===Ki;)Ki=Tn[--Rn],Tn[Rn]=null,Tr=Tn[--Rn],Tn[Rn]=null,Pr=Tn[--Rn],Tn[Rn]=null}var yn=null,Nn=null,Je=!1,la=!1,qn=null;function Om(o,a){var d=jn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=o,a=o.deletions,a===null?(o.deletions=[d],o.flags|=16):a.push(d)}function Im(o,a){switch(o.tag){case 5:return a=q3(a,o.type,o.pendingProps),a!==null?(o.stateNode=a,yn=o,Nn=Z3(a),!0):!1;case 6:return a=Y3(a,o.pendingProps),a!==null?(o.stateNode=a,yn=o,Nn=null,!0):!1;case 13:if(a=X3(a),a!==null){var d=Ki!==null?{id:Pr,overflow:Tr}:null;return o.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=jn(18,null,null,0),d.stateNode=a,d.return=o,o.child=d,yn=o,Nn=null,!0}return!1;default:return!1}}function Uh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function zh(o){if(Je){var a=Nn;if(a){var d=a;if(!Im(o,a)){if(Uh(o))throw Error(l(418));a=Hl(d);var f=yn;a&&Im(o,a)?Om(f,d):(o.flags=o.flags&-4097|2,Je=!1,yn=o)}}else{if(Uh(o))throw Error(l(418));o.flags=o.flags&-4097|2,Je=!1,yn=o}}}function Lm(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;yn=o}function nu(o){if(!Oe||o!==yn)return!1;if(!Je)return Lm(o),Je=!0,!1;if(o.tag!==3&&(o.tag!==5||c5(o.type)&&!Ue(o.type,o.memoizedProps))){var a=Nn;if(a){if(Uh(o))throw jm(),Error(l(418));for(;a;)Om(o,a),a=Hl(a)}}if(Lm(o),o.tag===13){if(!Oe)throw Error(l(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));Nn=s5(o)}else Nn=yn?Hl(o.stateNode):null;return!0}function jm(){for(var o=Nn;o;)o=Hl(o)}function Bs(){Oe&&(Nn=yn=null,la=Je=!1)}function Bh(o){qn===null?qn=[o]:qn.push(o)}var P5=u.ReactCurrentBatchConfig;function ru(o,a){if(Kn(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var d=Object.keys(o),f=Object.keys(a);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!f5.call(a,g)||!Kn(o[g],a[g]))return!1}return!0}function T5(o){switch(o.tag){case 5:return sa(o.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return o=Th(o.type,!1),o;case 11:return o=Th(o.type.render,!1),o;case 1:return o=Th(o.type,!0),o;default:return""}}function ua(o,a,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(l(309));var f=d.stateNode}if(!f)throw Error(l(147,o));var g=f,S=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(T){var j=g.refs;T===null?delete j[S]:j[S]=T},a._stringRef=S,a)}if(typeof o!="string")throw Error(l(284));if(!d._owner)throw Error(l(290,o))}return o}function iu(o,a){throw o=Object.prototype.toString.call(a),Error(l(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function Mm(o){var a=o._init;return a(o._payload)}function Fm(o){function a(B,D){if(o){var H=B.deletions;H===null?(B.deletions=[D],B.flags|=16):H.push(D)}}function d(B,D){if(!o)return null;for(;D!==null;)a(B,D),D=D.sibling;return null}function f(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function g(B,D){return B=li(B,D),B.index=0,B.sibling=null,B}function S(B,D,H){return B.index=H,o?(H=B.alternate,H!==null?(H=H.index,H<D?(B.flags|=2,D):H):(B.flags|=2,D)):(B.flags|=1048576,D)}function T(B){return o&&B.alternate===null&&(B.flags|=2),B}function j(B,D,H,ie){return D===null||D.tag!==6?(D=Ff(H,B.mode,ie),D.return=B,D):(D=g(D,H),D.return=B,D)}function G(B,D,H,ie){var he=H.type;return he===p?le(B,D,H.props.children,ie,H.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===m&&Mm(he)===D.type)?(ie=g(D,H.props),ie.ref=ua(B,D,H),ie.return=B,ie):(ie=ju(H.type,H.key,H.props,null,B.mode,ie),ie.ref=ua(B,D,H),ie.return=B,ie)}function Z(B,D,H,ie){return D===null||D.tag!==4||D.stateNode.containerInfo!==H.containerInfo||D.stateNode.implementation!==H.implementation?(D=Df(H,B.mode,ie),D.return=B,D):(D=g(D,H.children||[]),D.return=B,D)}function le(B,D,H,ie,he){return D===null||D.tag!==7?(D=ts(H,B.mode,ie,he),D.return=B,D):(D=g(D,H),D.return=B,D)}function ve(B,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Ff(""+D,B.mode,H),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case c:return H=ju(D.type,D.key,D.props,null,B.mode,H),H.ref=ua(B,null,D),H.return=B,H;case h:return D=Df(D,B.mode,H),D.return=B,D;case m:var ie=D._init;return ve(B,ie(D._payload),H)}if(Y(D)||N(D))return D=ts(D,B.mode,H,null),D.return=B,D;iu(B,D)}return null}function re(B,D,H,ie){var he=D!==null?D.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return he!==null?null:j(B,D,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case c:return H.key===he?G(B,D,H,ie):null;case h:return H.key===he?Z(B,D,H,ie):null;case m:return he=H._init,re(B,D,he(H._payload),ie)}if(Y(H)||N(H))return he!==null?null:le(B,D,H,ie,null);iu(B,H)}return null}function qe(B,D,H,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(H)||null,j(D,B,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case c:return B=B.get(ie.key===null?H:ie.key)||null,G(D,B,ie,he);case h:return B=B.get(ie.key===null?H:ie.key)||null,Z(D,B,ie,he);case m:var xe=ie._init;return qe(B,D,H,xe(ie._payload),he)}if(Y(ie)||N(ie))return B=B.get(H)||null,le(D,B,ie,he,null);iu(D,ie)}return null}function Ge(B,D,H,ie){for(var he=null,xe=null,_e=D,je=D=0,At=null;_e!==null&&je<H.length;je++){_e.index>je?(At=_e,_e=null):At=_e.sibling;var Me=re(B,_e,H[je],ie);if(Me===null){_e===null&&(_e=At);break}o&&_e&&Me.alternate===null&&a(B,_e),D=S(Me,D,je),xe===null?he=Me:xe.sibling=Me,xe=Me,_e=At}if(je===H.length)return d(B,_e),Je&&qi(B,je),he;if(_e===null){for(;je<H.length;je++)_e=ve(B,H[je],ie),_e!==null&&(D=S(_e,D,je),xe===null?he=_e:xe.sibling=_e,xe=_e);return Je&&qi(B,je),he}for(_e=f(B,_e);je<H.length;je++)At=qe(_e,B,je,H[je],ie),At!==null&&(o&&At.alternate!==null&&_e.delete(At.key===null?je:At.key),D=S(At,D,je),xe===null?he=At:xe.sibling=At,xe=At);return o&&_e.forEach(function(ui){return a(B,ui)}),Je&&qi(B,je),he}function dn(B,D,H,ie){var he=N(H);if(typeof he!="function")throw Error(l(150));if(H=he.call(H),H==null)throw Error(l(151));for(var xe=he=null,_e=D,je=D=0,At=null,Me=H.next();_e!==null&&!Me.done;je++,Me=H.next()){_e.index>je?(At=_e,_e=null):At=_e.sibling;var ui=re(B,_e,Me.value,ie);if(ui===null){_e===null&&(_e=At);break}o&&_e&&ui.alternate===null&&a(B,_e),D=S(ui,D,je),xe===null?he=ui:xe.sibling=ui,xe=ui,_e=At}if(Me.done)return d(B,_e),Je&&qi(B,je),he;if(_e===null){for(;!Me.done;je++,Me=H.next())Me=ve(B,Me.value,ie),Me!==null&&(D=S(Me,D,je),xe===null?he=Me:xe.sibling=Me,xe=Me);return Je&&qi(B,je),he}for(_e=f(B,_e);!Me.done;je++,Me=H.next())Me=qe(_e,B,je,Me.value,ie),Me!==null&&(o&&Me.alternate!==null&&_e.delete(Me.key===null?je:Me.key),D=S(Me,D,je),xe===null?he=Me:xe.sibling=Me,xe=Me);return o&&_e.forEach(function(i6){return a(B,i6)}),Je&&qi(B,je),he}function Or(B,D,H,ie){if(typeof H=="object"&&H!==null&&H.type===p&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case c:e:{for(var he=H.key,xe=D;xe!==null;){if(xe.key===he){if(he=H.type,he===p){if(xe.tag===7){d(B,xe.sibling),D=g(xe,H.props.children),D.return=B,B=D;break e}}else if(xe.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===m&&Mm(he)===xe.type){d(B,xe.sibling),D=g(xe,H.props),D.ref=ua(B,xe,H),D.return=B,B=D;break e}d(B,xe);break}else a(B,xe);xe=xe.sibling}H.type===p?(D=ts(H.props.children,B.mode,ie,H.key),D.return=B,B=D):(ie=ju(H.type,H.key,H.props,null,B.mode,ie),ie.ref=ua(B,D,H),ie.return=B,B=ie)}return T(B);case h:e:{for(xe=H.key;D!==null;){if(D.key===xe)if(D.tag===4&&D.stateNode.containerInfo===H.containerInfo&&D.stateNode.implementation===H.implementation){d(B,D.sibling),D=g(D,H.children||[]),D.return=B,B=D;break e}else{d(B,D);break}else a(B,D);D=D.sibling}D=Df(H,B.mode,ie),D.return=B,B=D}return T(B);case m:return xe=H._init,Or(B,D,xe(H._payload),ie)}if(Y(H))return Ge(B,D,H,ie);if(N(H))return dn(B,D,H,ie);iu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,D!==null&&D.tag===6?(d(B,D.sibling),D=g(D,H),D.return=B,B=D):(d(B,D),D=Ff(H,B.mode,ie),D.return=B,B=D),T(B)):d(B,D)}return Or}var Gs=Fm(!0),Dm=Fm(!1),su=ei(null),ou=null,Vs=null,Gh=null;function Vh(){Gh=Vs=ou=null}function Um(o,a,d){de?($e(su,a._currentValue),a._currentValue=d):($e(su,a._currentValue2),a._currentValue2=d)}function $h(o){var a=su.current;Ke(su),de?o._currentValue=a:o._currentValue2=a}function Wh(o,a,d){for(;o!==null;){var f=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),o===d)break;o=o.return}}function $s(o,a){ou=o,Gh=Vs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&a&&(ln=!0),o.firstContext=null)}function An(o){var a=de?o._currentValue:o._currentValue2;if(Gh!==o)if(o={context:o,memoizedValue:a,next:null},Vs===null){if(ou===null)throw Error(l(308));Vs=o,ou.dependencies={lanes:0,firstContext:o}}else Vs=Vs.next=o;return a}var Yi=null;function Hh(o){Yi===null?Yi=[o]:Yi.push(o)}function zm(o,a,d,f){var g=a.interleaved;return g===null?(d.next=d,Hh(a)):(d.next=g.next,g.next=d),a.interleaved=d,fr(o,f)}function fr(o,a){o.lanes|=a;var d=o.alternate;for(d!==null&&(d.lanes|=a),d=o,o=o.return;o!==null;)o.childLanes|=a,d=o.alternate,d!==null&&(d.childLanes|=a),d=o,o=o.return;return d.tag===3?d.stateNode:null}var ni=!1;function Kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bm(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Rr(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function ri(o,a,d){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,be&2){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,fr(o,d)}return g=f.interleaved,g===null?(a.next=a,Hh(f)):(a.next=g.next,g.next=a),f.interleaved=a,fr(o,d)}function au(o,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var f=a.lanes;f&=o.pendingLanes,d|=f,a.lanes=d,Oh(o,d)}}function Gm(o,a){var d=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var T={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?g=S=T:S=S.next=T,d=d.next}while(d!==null);S===null?g=S=a:S=S.next=a}else g=S=a;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:f.shared,effects:f.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=a:o.next=a,d.lastBaseUpdate=a}function lu(o,a,d,f){var g=o.updateQueue;ni=!1;var S=g.firstBaseUpdate,T=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var G=j,Z=G.next;G.next=null,T===null?S=Z:T.next=Z,T=G;var le=o.alternate;le!==null&&(le=le.updateQueue,j=le.lastBaseUpdate,j!==T&&(j===null?le.firstBaseUpdate=Z:j.next=Z,le.lastBaseUpdate=G))}if(S!==null){var ve=g.baseState;T=0,le=Z=G=null,j=S;do{var re=j.lane,qe=j.eventTime;if((f&re)===re){le!==null&&(le=le.next={eventTime:qe,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Ge=o,dn=j;switch(re=a,qe=d,dn.tag){case 1:if(Ge=dn.payload,typeof Ge=="function"){ve=Ge.call(qe,ve,re);break e}ve=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=dn.payload,re=typeof Ge=="function"?Ge.call(qe,ve,re):Ge,re==null)break e;ve=s({},ve,re);break e;case 2:ni=!0}}j.callback!==null&&j.lane!==0&&(o.flags|=64,re=g.effects,re===null?g.effects=[j]:re.push(j))}else qe={eventTime:qe,lane:re,tag:j.tag,payload:j.payload,callback:j.callback,next:null},le===null?(Z=le=qe,G=ve):le=le.next=qe,T|=re;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;re=j,j=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(le===null&&(G=ve),g.baseState=G,g.firstBaseUpdate=Z,g.lastBaseUpdate=le,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else S===null&&(g.shared.lanes=0);Qi|=T,o.lanes=T,o.memoizedState=ve}}function Vm(o,a,d){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var f=o[a],g=f.callback;if(g!==null){if(f.callback=null,f=d,typeof g!="function")throw Error(l(191,g));g.call(f)}}}var ca={},On=ei(ca),da=ei(ca),Ws=ei(ca);function pr(o){if(o===ca)throw Error(l(174));return o}function qh(o,a){$e(Ws,a),$e(da,o),$e(On,ca),o=ee(a),Ke(On),$e(On,o)}function Hs(){Ke(On),Ke(da),Ke(Ws)}function $m(o){var a=pr(Ws.current),d=pr(On.current);a=F(d,o.type,a),d!==a&&($e(da,o),$e(On,a))}function Yh(o){da.current===o&&(Ke(On),Ke(da))}var nt=ei(0);function uu(o){for(var a=o;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||km(d)||bh(d)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xh=[];function Qh(){for(var o=0;o<Xh.length;o++){var a=Xh[o];de?a._workInProgressVersionPrimary=null:a._workInProgressVersionSecondary=null}Xh.length=0}var cu=u.ReactCurrentDispatcher,Jh=u.ReactCurrentBatchConfig,Xi=0,rt=null,_t=null,Rt=null,du=!1,ha=!1,fa=0,R5=0;function Wt(){throw Error(l(321))}function Zh(o,a){if(a===null)return!1;for(var d=0;d<a.length&&d<o.length;d++)if(!Kn(o[d],a[d]))return!1;return!0}function ef(o,a,d,f,g,S){if(Xi=S,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,cu.current=o===null||o.memoizedState===null?I5:L5,o=d(f,g),ha){S=0;do{if(ha=!1,fa=0,25<=S)throw Error(l(301));S+=1,Rt=_t=null,a.updateQueue=null,cu.current=j5,o=d(f,g)}while(ha)}if(cu.current=pu,a=_t!==null&&_t.next!==null,Xi=0,Rt=_t=rt=null,du=!1,a)throw Error(l(300));return o}function tf(){var o=fa!==0;return fa=0,o}function gr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?rt.memoizedState=Rt=o:Rt=Rt.next=o,Rt}function In(){if(_t===null){var o=rt.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var a=Rt===null?rt.memoizedState:Rt.next;if(a!==null)Rt=a,_t=o;else{if(o===null)throw Error(l(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Rt===null?rt.memoizedState=Rt=o:Rt=Rt.next=o}return Rt}function pa(o,a){return typeof a=="function"?a(o):a}function nf(o){var a=In(),d=a.queue;if(d===null)throw Error(l(311));d.lastRenderedReducer=o;var f=_t,g=f.baseQueue,S=d.pending;if(S!==null){if(g!==null){var T=g.next;g.next=S.next,S.next=T}f.baseQueue=g=S,d.pending=null}if(g!==null){S=g.next,f=f.baseState;var j=T=null,G=null,Z=S;do{var le=Z.lane;if((Xi&le)===le)G!==null&&(G=G.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),f=Z.hasEagerState?Z.eagerState:o(f,Z.action);else{var ve={lane:le,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};G===null?(j=G=ve,T=f):G=G.next=ve,rt.lanes|=le,Qi|=le}Z=Z.next}while(Z!==null&&Z!==S);G===null?T=f:G.next=j,Kn(f,a.memoizedState)||(ln=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=G,d.lastRenderedState=f}if(o=d.interleaved,o!==null){g=o;do S=g.lane,rt.lanes|=S,Qi|=S,g=g.next;while(g!==o)}else g===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function rf(o){var a=In(),d=a.queue;if(d===null)throw Error(l(311));d.lastRenderedReducer=o;var f=d.dispatch,g=d.pending,S=a.memoizedState;if(g!==null){d.pending=null;var T=g=g.next;do S=o(S,T.action),T=T.next;while(T!==g);Kn(S,a.memoizedState)||(ln=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,f]}function Wm(){}function Hm(o,a){var d=rt,f=In(),g=a(),S=!Kn(f.memoizedState,g);if(S&&(f.memoizedState=g,ln=!0),f=f.queue,sf(Ym.bind(null,d,f,o),[o]),f.getSnapshot!==a||S||Rt!==null&&Rt.memoizedState.tag&1){if(d.flags|=2048,ga(9,qm.bind(null,d,f,g,a),void 0,null),Nt===null)throw Error(l(349));Xi&30||Km(d,a,g)}return g}function Km(o,a,d){o.flags|=16384,o={getSnapshot:a,value:d},a=rt.updateQueue,a===null?(a={lastEffect:null,stores:null},rt.updateQueue=a,a.stores=[o]):(d=a.stores,d===null?a.stores=[o]:d.push(o))}function qm(o,a,d,f){a.value=d,a.getSnapshot=f,Xm(a)&&Qm(o)}function Ym(o,a,d){return d(function(){Xm(a)&&Qm(o)})}function Xm(o){var a=o.getSnapshot;o=o.value;try{var d=a();return!Kn(o,d)}catch{return!0}}function Qm(o){var a=fr(o,1);a!==null&&Ln(a,o,1,-1)}function Jm(o){var a=gr();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:o},a.queue=o,o=o.dispatch=O5.bind(null,rt,o),[a.memoizedState,o]}function ga(o,a,d,f){return o={tag:o,create:a,destroy:d,deps:f,next:null},a=rt.updateQueue,a===null?(a={lastEffect:null,stores:null},rt.updateQueue=a,a.lastEffect=o.next=o):(d=a.lastEffect,d===null?a.lastEffect=o.next=o:(f=d.next,d.next=o,o.next=f,a.lastEffect=o)),o}function Zm(){return In().memoizedState}function hu(o,a,d,f){var g=gr();rt.flags|=o,g.memoizedState=ga(1|a,d,void 0,f===void 0?null:f)}function fu(o,a,d,f){var g=In();f=f===void 0?null:f;var S=void 0;if(_t!==null){var T=_t.memoizedState;if(S=T.destroy,f!==null&&Zh(f,T.deps)){g.memoizedState=ga(a,d,S,f);return}}rt.flags|=o,g.memoizedState=ga(1|a,d,S,f)}function e1(o,a){return hu(8390656,8,o,a)}function sf(o,a){return fu(2048,8,o,a)}function t1(o,a){return fu(4,2,o,a)}function n1(o,a){return fu(4,4,o,a)}function r1(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function i1(o,a,d){return d=d!=null?d.concat([o]):null,fu(4,4,r1.bind(null,a,o),d)}function of(){}function s1(o,a){var d=In();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Zh(a,f[1])?f[0]:(d.memoizedState=[o,a],o)}function o1(o,a){var d=In();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Zh(a,f[1])?f[0]:(o=o(),d.memoizedState=[o,a],o)}function a1(o,a,d){return Xi&21?(Kn(d,a)||(d=Pm(),rt.lanes|=d,Qi|=d,o.baseState=!0),a):(o.baseState&&(o.baseState=!1,ln=!0),o.memoizedState=d)}function N5(o,a){var d=Le;Le=d!==0&&4>d?d:4,o(!0);var f=Jh.transition;Jh.transition={};try{o(!1),a()}finally{Le=d,Jh.transition=f}}function l1(){return In().memoizedState}function A5(o,a,d){var f=oi(o);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},u1(o))c1(a,d);else if(d=zm(o,a,d,f),d!==null){var g=qt();Ln(d,o,f,g),d1(d,a,f)}}function O5(o,a,d){var f=oi(o),g={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if(u1(o))c1(a,g);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var T=a.lastRenderedState,j=S(T,d);if(g.hasEagerState=!0,g.eagerState=j,Kn(j,T)){var G=a.interleaved;G===null?(g.next=g,Hh(a)):(g.next=G.next,G.next=g),a.interleaved=g;return}}catch{}finally{}d=zm(o,a,g,f),d!==null&&(g=qt(),Ln(d,o,f,g),d1(d,a,f))}}function u1(o){var a=o.alternate;return o===rt||a!==null&&a===rt}function c1(o,a){ha=du=!0;var d=o.pending;d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a}function d1(o,a,d){if(d&4194240){var f=a.lanes;f&=o.pendingLanes,d|=f,a.lanes=d,Oh(o,d)}}var pu={readContext:An,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},I5={readContext:An,useCallback:function(o,a){return gr().memoizedState=[o,a===void 0?null:a],o},useContext:An,useEffect:e1,useImperativeHandle:function(o,a,d){return d=d!=null?d.concat([o]):null,hu(4194308,4,r1.bind(null,a,o),d)},useLayoutEffect:function(o,a){return hu(4194308,4,o,a)},useInsertionEffect:function(o,a){return hu(4,2,o,a)},useMemo:function(o,a){var d=gr();return a=a===void 0?null:a,o=o(),d.memoizedState=[o,a],o},useReducer:function(o,a,d){var f=gr();return a=d!==void 0?d(a):a,f.memoizedState=f.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},f.queue=o,o=o.dispatch=A5.bind(null,rt,o),[f.memoizedState,o]},useRef:function(o){var a=gr();return o={current:o},a.memoizedState=o},useState:Jm,useDebugValue:of,useDeferredValue:function(o){return gr().memoizedState=o},useTransition:function(){var o=Jm(!1),a=o[0];return o=N5.bind(null,o[1]),gr().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,d){var f=rt,g=gr();if(Je){if(d===void 0)throw Error(l(407));d=d()}else{if(d=a(),Nt===null)throw Error(l(349));Xi&30||Km(f,a,d)}g.memoizedState=d;var S={value:d,getSnapshot:a};return g.queue=S,e1(Ym.bind(null,f,S,o),[o]),f.flags|=2048,ga(9,qm.bind(null,f,S,d,a),void 0,null),d},useId:function(){var o=gr(),a=Nt.identifierPrefix;if(Je){var d=Tr,f=Pr;d=(f&~(1<<32-Hn(f)-1)).toString(32)+d,a=":"+a+"R"+d,d=fa++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=R5++,a=":"+a+"r"+d.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},L5={readContext:An,useCallback:s1,useContext:An,useEffect:sf,useImperativeHandle:i1,useInsertionEffect:t1,useLayoutEffect:n1,useMemo:o1,useReducer:nf,useRef:Zm,useState:function(){return nf(pa)},useDebugValue:of,useDeferredValue:function(o){var a=In();return a1(a,_t.memoizedState,o)},useTransition:function(){var o=nf(pa)[0],a=In().memoizedState;return[o,a]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:l1,unstable_isNewReconciler:!1},j5={readContext:An,useCallback:s1,useContext:An,useEffect:sf,useImperativeHandle:i1,useInsertionEffect:t1,useLayoutEffect:n1,useMemo:o1,useReducer:rf,useRef:Zm,useState:function(){return rf(pa)},useDebugValue:of,useDeferredValue:function(o){var a=In();return _t===null?a.memoizedState=o:a1(a,_t.memoizedState,o)},useTransition:function(){var o=rf(pa)[0],a=In().memoizedState;return[o,a]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:l1,unstable_isNewReconciler:!1};function Yn(o,a){if(o&&o.defaultProps){a=s({},a),o=o.defaultProps;for(var d in o)a[d]===void 0&&(a[d]=o[d]);return a}return a}function af(o,a,d,f){a=o.memoizedState,d=d(f,a),d=d==null?a:s({},a,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var gu={isMounted:function(o){return(o=o._reactInternals)?U(o)===o:!1},enqueueSetState:function(o,a,d){o=o._reactInternals;var f=qt(),g=oi(o),S=Rr(f,g);S.payload=a,d!=null&&(S.callback=d),a=ri(o,S,g),a!==null&&(Ln(a,o,g,f),au(a,o,g))},enqueueReplaceState:function(o,a,d){o=o._reactInternals;var f=qt(),g=oi(o),S=Rr(f,g);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=ri(o,S,g),a!==null&&(Ln(a,o,g,f),au(a,o,g))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var d=qt(),f=oi(o),g=Rr(d,f);g.tag=2,a!=null&&(g.callback=a),a=ri(o,g,f),a!==null&&(Ln(a,o,f,d),au(a,o,f))}};function h1(o,a,d,f,g,S,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,S,T):a.prototype&&a.prototype.isPureReactComponent?!ru(d,f)||!ru(g,S):!0}function f1(o,a,d){var f=!1,g=ti,S=a.contextType;return typeof S=="object"&&S!==null?S=An(S):(g=an(a)?Hi:$t.current,f=a.contextTypes,S=(f=f!=null)?Ds(o,g):ti),a=new a(d,S),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gu,o.stateNode=a,a._reactInternals=o,f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=g,o.__reactInternalMemoizedMaskedChildContext=S),a}function p1(o,a,d,f){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,f),a.state!==o&&gu.enqueueReplaceState(a,a.state,null)}function lf(o,a,d,f){var g=o.stateNode;g.props=d,g.state=o.memoizedState,g.refs={},Kh(o);var S=a.contextType;typeof S=="object"&&S!==null?g.context=An(S):(S=an(a)?Hi:$t.current,g.context=Ds(o,S)),g.state=o.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(af(o,a,S,d),g.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&gu.enqueueReplaceState(g,g.state,null),lu(o,d,g,f),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308)}function Ks(o,a){try{var d="",f=a;do d+=T5(f),f=f.return;while(f);var g=d}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:a,stack:g,digest:null}}function uf(o,a,d){return{value:o,source:null,stack:d??null,digest:a??null}}function cf(o,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var M5=typeof WeakMap=="function"?WeakMap:Map;function g1(o,a,d){d=Rr(-1,d),d.tag=3,d.payload={element:null};var f=a.value;return d.callback=function(){Ru||(Ru=!0,Nf=f),cf(o,a)},d}function m1(o,a,d){d=Rr(-1,d),d.tag=3;var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;d.payload=function(){return f(g)},d.callback=function(){cf(o,a)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){cf(o,a),typeof f!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),d}function y1(o,a,d){var f=o.pingCache;if(f===null){f=o.pingCache=new M5;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(d)||(g.add(d),o=X5.bind(null,o,a,d),a.then(o,o))}function v1(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function _1(o,a,d,f,g){return o.mode&1?(o.flags|=65536,o.lanes=g,o):(o===a?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Rr(-1,1),a.tag=2,ri(d,a,1))),d.lanes|=1),o)}var F5=u.ReactCurrentOwner,ln=!1;function en(o,a,d,f){a.child=o===null?Dm(a,null,d,f):Gs(a,o.child,d,f)}function w1(o,a,d,f,g){d=d.render;var S=a.ref;return $s(a,g),f=ef(o,a,d,f,S,g),d=tf(),o!==null&&!ln?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~g,Nr(o,a,g)):(Je&&d&&Fh(a),a.flags|=1,en(o,a,f,g),a.child)}function S1(o,a,d,f,g){if(o===null){var S=d.type;return typeof S=="function"&&!Mf(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,x1(o,a,S,f,g)):(o=ju(d.type,null,f,a,a.mode,g),o.ref=a.ref,o.return=a,a.child=o)}if(S=o.child,!(o.lanes&g)){var T=S.memoizedProps;if(d=d.compare,d=d!==null?d:ru,d(T,f)&&o.ref===a.ref)return Nr(o,a,g)}return a.flags|=1,o=li(S,f),o.ref=a.ref,o.return=a,a.child=o}function x1(o,a,d,f,g){if(o!==null){var S=o.memoizedProps;if(ru(S,f)&&o.ref===a.ref)if(ln=!1,a.pendingProps=f=S,(o.lanes&g)!==0)o.flags&131072&&(ln=!0);else return a.lanes=o.lanes,Nr(o,a,g)}return df(o,a,d,f,g)}function k1(o,a,d){var f=a.pendingProps,g=f.children,S=o!==null?o.memoizedState:null;if(f.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ys,vn),vn|=d;else{if(!(d&1073741824))return o=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,$e(Ys,vn),vn|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:d,$e(Ys,vn),vn|=f}else S!==null?(f=S.baseLanes|d,a.memoizedState=null):f=d,$e(Ys,vn),vn|=f;return en(o,a,g,d),a.child}function C1(o,a){var d=a.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function df(o,a,d,f,g){var S=an(d)?Hi:$t.current;return S=Ds(a,S),$s(a,g),d=ef(o,a,d,f,S,g),f=tf(),o!==null&&!ln?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~g,Nr(o,a,g)):(Je&&f&&Fh(a),a.flags|=1,en(o,a,d,g),a.child)}function b1(o,a,d,f,g){if(an(d)){var S=!0;ql(a)}else S=!1;if($s(a,g),a.stateNode===null)yu(o,a),f1(a,d,f),lf(a,d,f,g),f=!0;else if(o===null){var T=a.stateNode,j=a.memoizedProps;T.props=j;var G=T.context,Z=d.contextType;typeof Z=="object"&&Z!==null?Z=An(Z):(Z=an(d)?Hi:$t.current,Z=Ds(a,Z));var le=d.getDerivedStateFromProps,ve=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function";ve||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==f||G!==Z)&&p1(a,T,f,Z),ni=!1;var re=a.memoizedState;T.state=re,lu(a,f,T,g),G=a.memoizedState,j!==f||re!==G||on.current||ni?(typeof le=="function"&&(af(a,d,le,f),G=a.memoizedState),(j=ni||h1(a,d,j,f,re,G,Z))?(ve||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=G),T.props=f,T.state=G,T.context=Z,f=j):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Bm(o,a),j=a.memoizedProps,Z=a.type===a.elementType?j:Yn(a.type,j),T.props=Z,ve=a.pendingProps,re=T.context,G=d.contextType,typeof G=="object"&&G!==null?G=An(G):(G=an(d)?Hi:$t.current,G=Ds(a,G));var qe=d.getDerivedStateFromProps;(le=typeof qe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==ve||re!==G)&&p1(a,T,f,G),ni=!1,re=a.memoizedState,T.state=re,lu(a,f,T,g);var Ge=a.memoizedState;j!==ve||re!==Ge||on.current||ni?(typeof qe=="function"&&(af(a,d,qe,f),Ge=a.memoizedState),(Z=ni||h1(a,d,Z,f,re,Ge,G)||!1)?(le||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Ge,G),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Ge,G)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&re===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&re===o.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ge),T.props=f,T.state=Ge,T.context=G,f=Z):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&re===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&re===o.memoizedState||(a.flags|=1024),f=!1)}return hf(o,a,d,f,S,g)}function hf(o,a,d,f,g,S){C1(o,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&Em(a,d,!1),Nr(o,a,S);f=a.stateNode,F5.current=a;var j=T&&typeof d.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,o!==null&&T?(a.child=Gs(a,o.child,null,S),a.child=Gs(a,null,j,S)):en(o,a,j,S),a.memoizedState=f.state,g&&Em(a,d,!0),a.child}function E1(o){var a=o.stateNode;a.pendingContext?Cm(o,a.pendingContext,a.pendingContext!==a.context):a.context&&Cm(o,a.context,!1),qh(o,a.containerInfo)}function P1(o,a,d,f,g){return Bs(),Bh(g),a.flags|=256,en(o,a,d,f),a.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function pf(o){return{baseLanes:o,cachePool:null,transitions:null}}function T1(o,a,d){var f=a.pendingProps,g=nt.current,S=!1,T=(a.flags&128)!==0,j;if((j=T)||(j=o!==null&&o.memoizedState===null?!1:(g&2)!==0),j?(S=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(g|=1),$e(nt,g&1),o===null)return zh(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(a.mode&1?bh(o)?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(T=f.children,o=f.fallback,S?(f=a.mode,S=a.child,T={mode:"hidden",children:T},!(f&1)&&S!==null?(S.childLanes=0,S.pendingProps=T):S=Mu(T,f,0,null),o=ts(o,f,d,null),S.return=a,o.return=a,S.sibling=o,a.child=S,a.child.memoizedState=pf(d),a.memoizedState=ff,o):gf(a,T));if(g=o.memoizedState,g!==null&&(j=g.dehydrated,j!==null))return D5(o,a,T,f,j,g,d);if(S){S=f.fallback,T=a.mode,g=o.child,j=g.sibling;var G={mode:"hidden",children:f.children};return!(T&1)&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=G,a.deletions=null):(f=li(g,G),f.subtreeFlags=g.subtreeFlags&14680064),j!==null?S=li(j,S):(S=ts(S,T,d,null),S.flags|=2),S.return=a,f.return=a,f.sibling=S,a.child=f,f=S,S=a.child,T=o.child.memoizedState,T=T===null?pf(d):{baseLanes:T.baseLanes|d,cachePool:null,transitions:T.transitions},S.memoizedState=T,S.childLanes=o.childLanes&~d,a.memoizedState=ff,f}return S=o.child,o=S.sibling,f=li(S,{mode:"visible",children:f.children}),!(a.mode&1)&&(f.lanes=d),f.return=a,f.sibling=null,o!==null&&(d=a.deletions,d===null?(a.deletions=[o],a.flags|=16):d.push(o)),a.child=f,a.memoizedState=null,f}function gf(o,a){return a=Mu({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function mu(o,a,d,f){return f!==null&&Bh(f),Gs(a,o.child,null,d),o=gf(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function D5(o,a,d,f,g,S,T){if(d)return a.flags&256?(a.flags&=-257,f=uf(Error(l(422))),mu(o,a,T,f)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(S=f.fallback,g=a.mode,f=Mu({mode:"visible",children:f.children},g,0,null),S=ts(S,g,T,null),S.flags|=2,f.return=a,S.return=a,f.sibling=S,a.child=f,a.mode&1&&Gs(a,o.child,null,T),a.child.memoizedState=pf(T),a.memoizedState=ff,S);if(!(a.mode&1))return mu(o,a,T,null);if(bh(g))return f=Q3(g).digest,S=Error(l(419)),f=uf(S,f,void 0),mu(o,a,T,f);if(d=(T&o.childLanes)!==0,ln||d){if(f=Nt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(f.suspendedLanes|T)?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,fr(o,g),Ln(f,o,g,-1))}return jf(),f=uf(Error(l(421))),mu(o,a,T,f)}return km(g)?(a.flags|=128,a.child=o.child,a=Q5.bind(null,o),J3(g,a),null):(o=S.treeContext,Oe&&(Nn=t5(g),yn=a,Je=!0,qn=null,la=!1,o!==null&&(Tn[Rn++]=Pr,Tn[Rn++]=Tr,Tn[Rn++]=Ki,Pr=o.id,Tr=o.overflow,Ki=a)),a=gf(a,f.children),a.flags|=4096,a)}function R1(o,a,d){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a),Wh(o.return,a,d)}function mf(o,a,d,f,g){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=d,S.tailMode=g)}function N1(o,a,d){var f=a.pendingProps,g=f.revealOrder,S=f.tail;if(en(o,a,f.children,d),f=nt.current,f&2)f=f&1|2,a.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&R1(o,d,a);else if(o.tag===19)R1(o,d,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}if($e(nt,f),!(a.mode&1))a.memoizedState=null;else switch(g){case"forwards":for(d=a.child,g=null;d!==null;)o=d.alternate,o!==null&&uu(o)===null&&(g=d),d=d.sibling;d=g,d===null?(g=a.child,a.child=null):(g=d.sibling,d.sibling=null),mf(a,!1,g,d,S);break;case"backwards":for(d=null,g=a.child,a.child=null;g!==null;){if(o=g.alternate,o!==null&&uu(o)===null){a.child=g;break}o=g.sibling,g.sibling=d,d=g,g=o}mf(a,!0,d,null,S);break;case"together":mf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function yu(o,a){!(a.mode&1)&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function Nr(o,a,d){if(o!==null&&(a.dependencies=o.dependencies),Qi|=a.lanes,!(d&a.childLanes))return null;if(o!==null&&a.child!==o.child)throw Error(l(153));if(a.child!==null){for(o=a.child,d=li(o,o.pendingProps),a.child=d,d.return=a;o.sibling!==null;)o=o.sibling,d=d.sibling=li(o,o.pendingProps),d.return=a;d.sibling=null}return a.child}function U5(o,a,d){switch(a.tag){case 3:E1(a),Bs();break;case 5:$m(a);break;case 1:an(a.type)&&ql(a);break;case 4:qh(a,a.stateNode.containerInfo);break;case 10:Um(a,a.type._context,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?($e(nt,nt.current&1),a.flags|=128,null):d&a.child.childLanes?T1(o,a,d):($e(nt,nt.current&1),o=Nr(o,a,d),o!==null?o.sibling:null);$e(nt,nt.current&1);break;case 19:if(f=(d&a.childLanes)!==0,o.flags&128){if(f)return N1(o,a,d);a.flags|=128}var g=a.memoizedState;if(g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),$e(nt,nt.current),f)break;return null;case 22:case 23:return a.lanes=0,k1(o,a,d)}return Nr(o,a,d)}function mr(o){o.flags|=4}function A1(o,a){if(o!==null&&o.child===a.child)return!0;if(a.flags&16)return!1;for(o=a.child;o!==null;){if(o.flags&12854||o.subtreeFlags&12854)return!1;o=o.sibling}return!0}var ma,ya,vu,_u;if(ce)ma=function(o,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)ne(o,d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},ya=function(){},vu=function(o,a,d,f,g){if(o=o.memoizedProps,o!==f){var S=a.stateNode,T=pr(On.current);d=Fe(S,d,o,f,g,T),(a.updateQueue=d)&&mr(a)}},_u=function(o,a,d,f){d!==f&&mr(a)};else if(we){ma=function(o,a,d,f){for(var g=a.child;g!==null;){if(g.tag===5){var S=g.stateNode;d&&f&&(S=Sm(S,g.type,g.memoizedProps,g)),ne(o,S)}else if(g.tag===6)S=g.stateNode,d&&f&&(S=xm(S,g.memoizedProps,g)),ne(o,S);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)S=g.child,S!==null&&(S.return=g),ma(o,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===a)break;for(;g.sibling===null;){if(g.return===null||g.return===a)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};var O1=function(o,a,d,f){for(var g=a.child;g!==null;){if(g.tag===5){var S=g.stateNode;d&&f&&(S=Sm(S,g.type,g.memoizedProps,g)),wm(o,S)}else if(g.tag===6)S=g.stateNode,d&&f&&(S=xm(S,g.memoizedProps,g)),wm(o,S);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)S=g.child,S!==null&&(S.return=g),O1(o,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===a)break;for(;g.sibling===null;){if(g.return===null||g.return===a)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};ya=function(o,a){var d=a.stateNode;if(!A1(o,a)){o=d.containerInfo;var f=_m(o);O1(f,a,!1,!1),d.pendingChildren=f,mr(a),K3(o,f)}},vu=function(o,a,d,f,g){var S=o.stateNode,T=o.memoizedProps;if((o=A1(o,a))&&T===f)a.stateNode=S;else{var j=a.stateNode,G=pr(On.current),Z=null;T!==f&&(Z=Fe(j,d,T,f,g,G)),o&&Z===null?a.stateNode=S:(S=H3(S,Z,d,T,f,a,o,j),me(S,d,f,g,G)&&mr(a),a.stateNode=S,o?mr(a):ma(S,a,!1,!1))}},_u=function(o,a,d,f){d!==f?(o=pr(Ws.current),d=pr(On.current),a.stateNode=Re(f,o,d,a),mr(a)):a.stateNode=o.stateNode}}else ya=function(){},vu=function(){},_u=function(){};function va(o,a){if(!Je)switch(o.tailMode){case"hidden":a=o.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function Ht(o){var a=o.alternate!==null&&o.alternate.child===o.child,d=0,f=0;if(a)for(var g=o.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=f,o.childLanes=d,a}function z5(o,a,d){var f=a.pendingProps;switch(Dh(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(a),null;case 1:return an(a.type)&&Kl(),Ht(a),null;case 3:return d=a.stateNode,Hs(),Ke(on),Ke($t),Qh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(nu(a)?mr(a):o===null||o.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,qn!==null&&(If(qn),qn=null))),ya(o,a),Ht(a),null;case 5:Yh(a),d=pr(Ws.current);var g=a.type;if(o!==null&&a.stateNode!=null)vu(o,a,g,f,d),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(l(166));return Ht(a),null}if(o=pr(On.current),nu(a)){if(!Oe)throw Error(l(175));o=n5(a.stateNode,a.type,a.memoizedProps,d,o,a,!la),a.updateQueue=o,o!==null&&mr(a)}else{var S=Q(g,f,d,o,a);ma(S,a,!1,!1),a.stateNode=S,me(S,g,f,d,o)&&mr(a)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ht(a),null;case 6:if(o&&a.stateNode!=null)_u(o,a,o.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(l(166));if(o=pr(Ws.current),d=pr(On.current),nu(a)){if(!Oe)throw Error(l(176));if(o=a.stateNode,d=a.memoizedProps,(f=r5(o,d,a,!la))&&(g=yn,g!==null))switch(g.tag){case 3:d5(g.stateNode.containerInfo,o,d,(g.mode&1)!==0);break;case 5:h5(g.type,g.memoizedProps,g.stateNode,o,d,(g.mode&1)!==0)}f&&mr(a)}else a.stateNode=Re(f,o,d,a)}return Ht(a),null;case 13:if(Ke(nt),f=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Je&&Nn!==null&&a.mode&1&&!(a.flags&128))jm(),Bs(),a.flags|=98560,g=!1;else if(g=nu(a),f!==null&&f.dehydrated!==null){if(o===null){if(!g)throw Error(l(318));if(!Oe)throw Error(l(344));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(l(317));i5(g,a)}else Bs(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Ht(a),g=!1}else qn!==null&&(If(qn),qn=null),g=!0;if(!g)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(d=f!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(a.child.flags|=8192,a.mode&1&&(o===null||nt.current&1?wt===0&&(wt=3):jf())),a.updateQueue!==null&&(a.flags|=4),Ht(a),null);case 4:return Hs(),ya(o,a),o===null&&Ce(a.stateNode.containerInfo),Ht(a),null;case 10:return $h(a.type._context),Ht(a),null;case 17:return an(a.type)&&Kl(),Ht(a),null;case 19:if(Ke(nt),g=a.memoizedState,g===null)return Ht(a),null;if(f=(a.flags&128)!==0,S=g.rendering,S===null)if(f)va(g,!1);else{if(wt!==0||o!==null&&o.flags&128)for(o=a.child;o!==null;){if(S=uu(o),S!==null){for(a.flags|=128,va(g,!1),o=S.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),a.subtreeFlags=0,o=d,d=a.child;d!==null;)f=d,g=o,f.flags&=14680066,S=f.alternate,S===null?(f.childLanes=0,f.lanes=g,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=S.childLanes,f.lanes=S.lanes,f.child=S.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=S.memoizedProps,f.memoizedState=S.memoizedState,f.updateQueue=S.updateQueue,f.type=S.type,g=S.dependencies,f.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),d=d.sibling;return $e(nt,nt.current&1|2),a.child}o=o.sibling}g.tail!==null&&Tt()>Rf&&(a.flags|=128,f=!0,va(g,!1),a.lanes=4194304)}else{if(!f)if(o=uu(S),o!==null){if(a.flags|=128,f=!0,o=o.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!Je)return Ht(a),null}else 2*Tt()-g.renderingStartTime>Rf&&d!==1073741824&&(a.flags|=128,f=!0,va(g,!1),a.lanes=4194304);g.isBackwards?(S.sibling=a.child,a.child=S):(o=g.last,o!==null?o.sibling=S:a.child=S,g.last=S)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Tt(),a.sibling=null,o=nt.current,$e(nt,f?o&1|2:o&1),a):(Ht(a),null);case 22:case 23:return Lf(),d=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(a.flags|=8192),d&&a.mode&1?vn&1073741824&&(Ht(a),ce&&a.subtreeFlags&6&&(a.flags|=8192)):Ht(a),null;case 24:return null;case 25:return null}throw Error(l(156,a.tag))}function B5(o,a){switch(Dh(a),a.tag){case 1:return an(a.type)&&Kl(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Hs(),Ke(on),Ke($t),Qh(),o=a.flags,o&65536&&!(o&128)?(a.flags=o&-65537|128,a):null;case 5:return Yh(a),null;case 13:if(Ke(nt),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Bs()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return Ke(nt),null;case 4:return Hs(),null;case 10:return $h(a.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var wu=!1,Kt=!1,G5=typeof WeakSet=="function"?WeakSet:Set,se=null;function qs(o,a){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){Ze(o,a,f)}else d.current=null}function yf(o,a,d){try{d()}catch(f){Ze(o,a,f)}}var I1=!1;function V5(o,a){for(q(o.containerInfo),se=a;se!==null;)if(o=se,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,se=a;else for(;se!==null;){o=se;try{var d=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var f=d.memoizedProps,g=d.memoizedState,S=o.stateNode,T=S.getSnapshotBeforeUpdate(o.elementType===o.type?f:Yn(o.type,f),g);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:ce&&W3(o.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(j){Ze(o,o.return,j)}if(a=o.sibling,a!==null){a.return=o.return,se=a;break}se=o.return}return d=I1,I1=!1,d}function _a(o,a,d){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&o)===o){var S=g.destroy;g.destroy=void 0,S!==void 0&&yf(a,d,S)}g=g.next}while(g!==f)}}function Su(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var f=d.create;d.destroy=f()}d=d.next}while(d!==a)}}function vf(o){var a=o.ref;if(a!==null){var d=o.stateNode;switch(o.tag){case 5:o=te(d);break;default:o=d}typeof a=="function"?a(o):a.current=o}}function L1(o){var a=o.alternate;a!==null&&(o.alternate=null,L1(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&Wn(a)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function j1(o){return o.tag===5||o.tag===3||o.tag===4}function M1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||j1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _f(o,a,d){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?D3(d,o,a):I3(d,o);else if(f!==4&&(o=o.child,o!==null))for(_f(o,a,d),o=o.sibling;o!==null;)_f(o,a,d),o=o.sibling}function wf(o,a,d){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?F3(d,o,a):O3(d,o);else if(f!==4&&(o=o.child,o!==null))for(wf(o,a,d),o=o.sibling;o!==null;)wf(o,a,d),o=o.sibling}var Lt=null,Xn=!1;function yr(o,a,d){for(d=d.child;d!==null;)Sf(o,a,d),d=d.sibling}function Sf(o,a,d){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Jl,d)}catch{}switch(d.tag){case 5:Kt||qs(d,a);case 6:if(ce){var f=Lt,g=Xn;Lt=null,yr(o,a,d),Lt=f,Xn=g,Lt!==null&&(Xn?z3(Lt,d.stateNode):U3(Lt,d.stateNode))}else yr(o,a,d);break;case 18:ce&&Lt!==null&&(Xn?u5(Lt,d.stateNode):l5(Lt,d.stateNode));break;case 4:ce?(f=Lt,g=Xn,Lt=d.stateNode.containerInfo,Xn=!0,yr(o,a,d),Lt=f,Xn=g):(we&&(f=d.stateNode.containerInfo,g=_m(f),Ch(f,g)),yr(o,a,d));break;case 0:case 11:case 14:case 15:if(!Kt&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var S=g,T=S.destroy;S=S.tag,T!==void 0&&(S&2||S&4)&&yf(d,a,T),g=g.next}while(g!==f)}yr(o,a,d);break;case 1:if(!Kt&&(qs(d,a),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(j){Ze(d,a,j)}yr(o,a,d);break;case 21:yr(o,a,d);break;case 22:d.mode&1?(Kt=(f=Kt)||d.memoizedState!==null,yr(o,a,d),Kt=f):yr(o,a,d);break;default:yr(o,a,d)}}function F1(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new G5),a.forEach(function(f){var g=J5.bind(null,o,f);d.has(f)||(d.add(f),f.then(g,g))})}}function Qn(o,a){var d=a.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];try{var S=o,T=a;if(ce){var j=T;e:for(;j!==null;){switch(j.tag){case 5:Lt=j.stateNode,Xn=!1;break e;case 3:Lt=j.stateNode.containerInfo,Xn=!0;break e;case 4:Lt=j.stateNode.containerInfo,Xn=!0;break e}j=j.return}if(Lt===null)throw Error(l(160));Sf(S,T,g),Lt=null,Xn=!1}else Sf(S,T,g);var G=g.alternate;G!==null&&(G.return=null),g.return=null}catch(Z){Ze(g,a,Z)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)D1(a,o),a=a.sibling}function D1(o,a){var d=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Qn(a,o),vr(o),f&4){try{_a(3,o,o.return),Su(3,o)}catch(re){Ze(o,o.return,re)}try{_a(5,o,o.return)}catch(re){Ze(o,o.return,re)}}break;case 1:Qn(a,o),vr(o),f&512&&d!==null&&qs(d,d.return);break;case 5:if(Qn(a,o),vr(o),f&512&&d!==null&&qs(d,d.return),ce){if(o.flags&32){var g=o.stateNode;try{vm(g)}catch(re){Ze(o,o.return,re)}}if(f&4&&(g=o.stateNode,g!=null)){var S=o.memoizedProps;if(d=d!==null?d.memoizedProps:S,f=o.type,a=o.updateQueue,o.updateQueue=null,a!==null)try{M3(g,a,f,d,S,o)}catch(re){Ze(o,o.return,re)}}}break;case 6:if(Qn(a,o),vr(o),f&4&&ce){if(o.stateNode===null)throw Error(l(162));g=o.stateNode,S=o.memoizedProps,d=d!==null?d.memoizedProps:S;try{L3(g,d,S)}catch(re){Ze(o,o.return,re)}}break;case 3:if(Qn(a,o),vr(o),f&4){if(ce&&Oe&&d!==null&&d.memoizedState.isDehydrated)try{o5(a.containerInfo)}catch(re){Ze(o,o.return,re)}if(we){g=a.containerInfo,S=a.pendingChildren;try{Ch(g,S)}catch(re){Ze(o,o.return,re)}}}break;case 4:if(Qn(a,o),vr(o),f&4&&we){S=o.stateNode,g=S.containerInfo,S=S.pendingChildren;try{Ch(g,S)}catch(re){Ze(o,o.return,re)}}break;case 13:Qn(a,o),vr(o),g=o.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(Tf=Tt())),f&4&&F1(o);break;case 22:var T=d!==null&&d.memoizedState!==null;if(o.mode&1?(Kt=(d=Kt)||T,Qn(a,o),Kt=d):Qn(a,o),vr(o),f&8192){if(d=o.memoizedState!==null,(o.stateNode.isHidden=d)&&!T&&o.mode&1)for(se=o,f=o.child;f!==null;){for(a=se=f;se!==null;){T=se;var j=T.child;switch(T.tag){case 0:case 11:case 14:case 15:_a(4,T,T.return);break;case 1:qs(T,T.return);var G=T.stateNode;if(typeof G.componentWillUnmount=="function"){var Z=T,le=T.return;try{var ve=Z;G.props=ve.memoizedProps,G.state=ve.memoizedState,G.componentWillUnmount()}catch(re){Ze(Z,le,re)}}break;case 5:qs(T,T.return);break;case 22:if(T.memoizedState!==null){B1(a);continue}}j!==null?(j.return=T,se=j):B1(a)}f=f.sibling}if(ce){e:if(f=null,ce)for(a=o;;){if(a.tag===5){if(f===null){f=a;try{g=a.stateNode,d?B3(g):V3(a.stateNode,a.memoizedProps)}catch(re){Ze(o,o.return,re)}}}else if(a.tag===6){if(f===null)try{S=a.stateNode,d?G3(S):$3(S,a.memoizedProps)}catch(re){Ze(o,o.return,re)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===o)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}}}break;case 19:Qn(a,o),vr(o),f&4&&F1(o);break;case 21:break;default:Qn(a,o),vr(o)}}function vr(o){var a=o.flags;if(a&2){try{if(ce){e:{for(var d=o.return;d!==null;){if(j1(d)){var f=d;break e}d=d.return}throw Error(l(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(vm(g),f.flags&=-33);var S=M1(o);wf(o,S,g);break;case 3:case 4:var T=f.stateNode.containerInfo,j=M1(o);_f(o,j,T);break;default:throw Error(l(161))}}}catch(G){Ze(o,o.return,G)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function $5(o,a,d){se=o,U1(o)}function U1(o,a,d){for(var f=(o.mode&1)!==0;se!==null;){var g=se,S=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||wu;if(!T){var j=g.alternate,G=j!==null&&j.memoizedState!==null||Kt;j=wu;var Z=Kt;if(wu=T,(Kt=G)&&!Z)for(se=g;se!==null;)T=se,G=T.child,T.tag===22&&T.memoizedState!==null?G1(g):G!==null?(G.return=T,se=G):G1(g);for(;S!==null;)se=S,U1(S),S=S.sibling;se=g,wu=j,Kt=Z}z1(o)}else g.subtreeFlags&8772&&S!==null?(S.return=g,se=S):z1(o)}}function z1(o){for(;se!==null;){var a=se;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Kt||Su(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Kt)if(d===null)f.componentDidMount();else{var g=a.elementType===a.type?d.memoizedProps:Yn(a.type,d.memoizedProps);f.componentDidUpdate(g,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&Vm(a,S,f);break;case 3:var T=a.updateQueue;if(T!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=te(a.child.stateNode);break;case 1:d=a.child.stateNode}Vm(a,T,d)}break;case 5:var j=a.stateNode;d===null&&a.flags&4&&j3(j,a.type,a.memoizedProps,a);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&a.memoizedState===null){var G=a.alternate;if(G!==null){var Z=G.memoizedState;if(Z!==null){var le=Z.dehydrated;le!==null&&a5(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}Kt||a.flags&512&&vf(a)}catch(ve){Ze(a,a.return,ve)}}if(a===o){se=null;break}if(d=a.sibling,d!==null){d.return=a.return,se=d;break}se=a.return}}function B1(o){for(;se!==null;){var a=se;if(a===o){se=null;break}var d=a.sibling;if(d!==null){d.return=a.return,se=d;break}se=a.return}}function G1(o){for(;se!==null;){var a=se;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Su(4,a)}catch(G){Ze(a,d,G)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(G){Ze(a,g,G)}}var S=a.return;try{vf(a)}catch(G){Ze(a,S,G)}break;case 5:var T=a.return;try{vf(a)}catch(G){Ze(a,T,G)}}}catch(G){Ze(a,a.return,G)}if(a===o){se=null;break}var j=a.sibling;if(j!==null){j.return=a.return,se=j;break}se=a.return}}var xu=0,ku=1,Cu=2,bu=3,Eu=4;if(typeof Symbol=="function"&&Symbol.for){var wa=Symbol.for;xu=wa("selector.component"),ku=wa("selector.has_pseudo_class"),Cu=wa("selector.role"),bu=wa("selector.test_id"),Eu=wa("selector.text")}function xf(o){var a=Vt(o);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(l(364));return a}if(o=E3(o),o===null)throw Error(l(362));return o.stateNode.current}function kf(o,a){switch(a.$$typeof){case xu:if(o.type===a.value)return!0;break;case ku:e:{a=a.value,o=[o,0];for(var d=0;d<o.length;){var f=o[d++],g=o[d++],S=a[g];if(f.tag!==5||!ia(f)){for(;S!=null&&kf(f,S);)g++,S=a[g];if(g===a.length){a=!0;break e}else for(f=f.child;f!==null;)o.push(f,g),f=f.sibling}}a=!1}return a;case Cu:if(o.tag===5&&R3(o.stateNode,a.value))return!0;break;case Eu:if((o.tag===5||o.tag===6)&&(o=T3(o),o!==null&&0<=o.indexOf(a.value)))return!0;break;case bu:if(o.tag===5&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Cf(o){switch(o.$$typeof){case xu:return"<"+(O(o.value)||"Unknown")+">";case ku:return":has("+(Cf(o)||"")+")";case Cu:return'[role="'+o.value+'"]';case Eu:return'"'+o.value+'"';case bu:return'[data-testname="'+o.value+'"]';default:throw Error(l(365))}}function V1(o,a){var d=[];o=[o,0];for(var f=0;f<o.length;){var g=o[f++],S=o[f++],T=a[S];if(g.tag!==5||!ia(g)){for(;T!=null&&kf(g,T);)S++,T=a[S];if(S===a.length)d.push(g);else for(g=g.child;g!==null;)o.push(g,S),g=g.sibling}}return d}function bf(o,a){if(!ra)throw Error(l(363));o=xf(o),o=V1(o,a),a=[],o=Array.from(o);for(var d=0;d<o.length;){var f=o[d++];if(f.tag===5)ia(f)||a.push(f.stateNode);else for(f=f.child;f!==null;)o.push(f),f=f.sibling}return a}var W5=Math.ceil,Pu=u.ReactCurrentDispatcher,Ef=u.ReactCurrentOwner,ht=u.ReactCurrentBatchConfig,be=0,Nt=null,gt=null,jt=0,vn=0,Ys=ei(0),wt=0,Sa=null,Qi=0,Tu=0,Pf=0,xa=null,un=null,Tf=0,Rf=1/0,Ar=null;function Xs(){Rf=Tt()+500}var Ru=!1,Nf=null,ii=null,Nu=!1,si=null,Au=0,ka=0,Af=null,Ou=-1,Iu=0;function qt(){return be&6?Tt():Ou!==-1?Ou:Ou=Tt()}function oi(o){return o.mode&1?be&2&&jt!==0?jt&-jt:P5.transition!==null?(Iu===0&&(Iu=Pm()),Iu):(o=Le,o!==0?o:Pn()):1}function Ln(o,a,d,f){if(50<ka)throw ka=0,Af=null,Error(l(185));aa(o,d,f),(!(be&2)||o!==Nt)&&(o===Nt&&(!(be&2)&&(Tu|=d),wt===4&&ai(o,jt)),cn(o,f),d===1&&be===0&&!(a.mode&1)&&(Xs(),Zl&&hr()))}function cn(o,a){var d=o.callbackNode;v5(o,a);var f=Ql(o,o===Nt?jt:0);if(f===0)d!==null&&Rm(d),o.callbackNode=null,o.callbackPriority=0;else if(a=f&-f,o.callbackPriority!==a){if(d!=null&&Rm(d),a===1)o.tag===0?E5(W1.bind(null,o)):Nm(W1.bind(null,o)),Zr?b3(function(){!(be&6)&&hr()}):Ih(Lh,hr),d=null;else{switch(Tm(f)){case 1:d=Lh;break;case 4:d=x5;break;case 16:d=jh;break;case 536870912:d=k5;break;default:d=jh}d=ey(d,$1.bind(null,o))}o.callbackPriority=a,o.callbackNode=d}}function $1(o,a){if(Ou=-1,Iu=0,be&6)throw Error(l(327));var d=o.callbackNode;if(es()&&o.callbackNode!==d)return null;var f=Ql(o,o===Nt?jt:0);if(f===0)return null;if(f&30||f&o.expiredLanes||a)a=Lu(o,f);else{a=f;var g=be;be|=2;var S=q1();(Nt!==o||jt!==a)&&(Ar=null,Xs(),Ji(o,a));do try{q5();break}catch(j){K1(o,j)}while(!0);Vh(),Pu.current=S,be=g,gt!==null?a=0:(Nt=null,jt=0,a=wt)}if(a!==0){if(a===2&&(g=Nh(o),g!==0&&(f=g,a=Of(o,g))),a===1)throw d=Sa,Ji(o,0),ai(o,f),cn(o,Tt()),d;if(a===6)ai(o,f);else{if(g=o.current.alternate,!(f&30)&&!H5(g)&&(a=Lu(o,f),a===2&&(S=Nh(o),S!==0&&(f=S,a=Of(o,S))),a===1))throw d=Sa,Ji(o,0),ai(o,f),cn(o,Tt()),d;switch(o.finishedWork=g,o.finishedLanes=f,a){case 0:case 1:throw Error(l(345));case 2:Zi(o,un,Ar);break;case 3:if(ai(o,f),(f&130023424)===f&&(a=Tf+500-Tt(),10<a)){if(Ql(o,0)!==0)break;if(g=o.suspendedLanes,(g&f)!==f){qt(),o.pingedLanes|=o.suspendedLanes&g;break}o.timeoutHandle=L(Zi.bind(null,o,un,Ar),a);break}Zi(o,un,Ar);break;case 4:if(ai(o,f),(f&4194240)===f)break;for(a=o.eventTimes,g=-1;0<f;){var T=31-Hn(f);S=1<<T,T=a[T],T>g&&(g=T),f&=~S}if(f=g,f=Tt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*W5(f/1960))-f,10<f){o.timeoutHandle=L(Zi.bind(null,o,un,Ar),f);break}Zi(o,un,Ar);break;case 5:Zi(o,un,Ar);break;default:throw Error(l(329))}}}return cn(o,Tt()),o.callbackNode===d?$1.bind(null,o):null}function Of(o,a){var d=xa;return o.current.memoizedState.isDehydrated&&(Ji(o,a).flags|=256),o=Lu(o,a),o!==2&&(a=un,un=d,a!==null&&If(a)),o}function If(o){un===null?un=o:un.push.apply(un,o)}function H5(o){for(var a=o;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var g=d[f],S=g.getSnapshot;g=g.value;try{if(!Kn(S(),g))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ai(o,a){for(a&=~Pf,a&=~Tu,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var d=31-Hn(a),f=1<<d;o[d]=-1,a&=~f}}function W1(o){if(be&6)throw Error(l(327));es();var a=Ql(o,0);if(!(a&1))return cn(o,Tt()),null;var d=Lu(o,a);if(o.tag!==0&&d===2){var f=Nh(o);f!==0&&(a=f,d=Of(o,f))}if(d===1)throw d=Sa,Ji(o,0),ai(o,a),cn(o,Tt()),d;if(d===6)throw Error(l(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Zi(o,un,Ar),cn(o,Tt()),null}function H1(o){si!==null&&si.tag===0&&!(be&6)&&es();var a=be;be|=1;var d=ht.transition,f=Le;try{if(ht.transition=null,Le=1,o)return o()}finally{Le=f,ht.transition=d,be=a,!(be&6)&&hr()}}function Lf(){vn=Ys.current,Ke(Ys)}function Ji(o,a){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==ae&&(o.timeoutHandle=ae,X(d)),gt!==null)for(d=gt.return;d!==null;){var f=d;switch(Dh(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Kl();break;case 3:Hs(),Ke(on),Ke($t),Qh();break;case 5:Yh(f);break;case 4:Hs();break;case 13:Ke(nt);break;case 19:Ke(nt);break;case 10:$h(f.type._context);break;case 22:case 23:Lf()}d=d.return}if(Nt=o,gt=o=li(o.current,null),jt=vn=a,wt=0,Sa=null,Pf=Tu=Qi=0,un=xa=null,Yi!==null){for(a=0;a<Yi.length;a++)if(d=Yi[a],f=d.interleaved,f!==null){d.interleaved=null;var g=f.next,S=d.pending;if(S!==null){var T=S.next;S.next=g,f.next=T}d.pending=f}Yi=null}return o}function K1(o,a){do{var d=gt;try{if(Vh(),cu.current=pu,du){for(var f=rt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}du=!1}if(Xi=0,Rt=_t=rt=null,ha=!1,fa=0,Ef.current=null,d===null||d.return===null){wt=1,Sa=a,gt=null;break}e:{var S=o,T=d.return,j=d,G=a;if(a=jt,j.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var Z=G,le=j,ve=le.tag;if(!(le.mode&1)&&(ve===0||ve===11||ve===15)){var re=le.alternate;re?(le.updateQueue=re.updateQueue,le.memoizedState=re.memoizedState,le.lanes=re.lanes):(le.updateQueue=null,le.memoizedState=null)}var qe=v1(T);if(qe!==null){qe.flags&=-257,_1(qe,T,j,S,a),qe.mode&1&&y1(S,Z,a),a=qe,G=Z;var Ge=a.updateQueue;if(Ge===null){var dn=new Set;dn.add(G),a.updateQueue=dn}else Ge.add(G);break e}else{if(!(a&1)){y1(S,Z,a),jf();break e}G=Error(l(426))}}else if(Je&&j.mode&1){var Or=v1(T);if(Or!==null){!(Or.flags&65536)&&(Or.flags|=256),_1(Or,T,j,S,a),Bh(Ks(G,j));break e}}S=G=Ks(G,j),wt!==4&&(wt=2),xa===null?xa=[S]:xa.push(S),S=T;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var B=g1(S,G,a);Gm(S,B);break e;case 1:j=G;var D=S.type,H=S.stateNode;if(!(S.flags&128)&&(typeof D.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ii===null||!ii.has(H)))){S.flags|=65536,a&=-a,S.lanes|=a;var ie=m1(S,j,a);Gm(S,ie);break e}}S=S.return}while(S!==null)}X1(d)}catch(he){a=he,gt===d&&d!==null&&(gt=d=d.return);continue}break}while(!0)}function q1(){var o=Pu.current;return Pu.current=pu,o===null?pu:o}function jf(){(wt===0||wt===3||wt===2)&&(wt=4),Nt===null||!(Qi&268435455)&&!(Tu&268435455)||ai(Nt,jt)}function Lu(o,a){var d=be;be|=2;var f=q1();(Nt!==o||jt!==a)&&(Ar=null,Ji(o,a));do try{K5();break}catch(g){K1(o,g)}while(!0);if(Vh(),be=d,Pu.current=f,gt!==null)throw Error(l(261));return Nt=null,jt=0,wt}function K5(){for(;gt!==null;)Y1(gt)}function q5(){for(;gt!==null&&!w5();)Y1(gt)}function Y1(o){var a=Z1(o.alternate,o,vn);o.memoizedProps=o.pendingProps,a===null?X1(o):gt=a,Ef.current=null}function X1(o){var a=o;do{var d=a.alternate;if(o=a.return,a.flags&32768){if(d=B5(d,a),d!==null){d.flags&=32767,gt=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{wt=6,gt=null;return}}else if(d=z5(d,a,vn),d!==null){gt=d;return}if(a=a.sibling,a!==null){gt=a;return}gt=a=o}while(a!==null);wt===0&&(wt=5)}function Zi(o,a,d){var f=Le,g=ht.transition;try{ht.transition=null,Le=1,Y5(o,a,d,f)}finally{ht.transition=g,Le=f}return null}function Y5(o,a,d,f){do es();while(si!==null);if(be&6)throw Error(l(327));d=o.finishedWork;var g=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(l(177));o.callbackNode=null,o.callbackPriority=0;var S=d.lanes|d.childLanes;if(_5(o,S),o===Nt&&(gt=Nt=null,jt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Nu||(Nu=!0,ey(jh,function(){return es(),null})),S=(d.flags&15990)!==0,d.subtreeFlags&15990||S){S=ht.transition,ht.transition=null;var T=Le;Le=1;var j=be;be|=4,Ef.current=null,V5(o,d),D1(d,o),$(o.containerInfo),o.current=d,$5(d),S5(),be=j,Le=T,ht.transition=S}else o.current=d;if(Nu&&(Nu=!1,si=o,Au=g),S=o.pendingLanes,S===0&&(ii=null),C5(d.stateNode),cn(o,Tt()),a!==null)for(f=o.onRecoverableError,d=0;d<a.length;d++)g=a[d],f(g.value,{componentStack:g.stack,digest:g.digest});if(Ru)throw Ru=!1,o=Nf,Nf=null,o;return Au&1&&o.tag!==0&&es(),S=o.pendingLanes,S&1?o===Af?ka++:(ka=0,Af=o):ka=0,hr(),null}function es(){if(si!==null){var o=Tm(Au),a=ht.transition,d=Le;try{if(ht.transition=null,Le=16>o?16:o,si===null)var f=!1;else{if(o=si,si=null,Au=0,be&6)throw Error(l(331));var g=be;for(be|=4,se=o.current;se!==null;){var S=se,T=S.child;if(se.flags&16){var j=S.deletions;if(j!==null){for(var G=0;G<j.length;G++){var Z=j[G];for(se=Z;se!==null;){var le=se;switch(le.tag){case 0:case 11:case 15:_a(8,le,S)}var ve=le.child;if(ve!==null)ve.return=le,se=ve;else for(;se!==null;){le=se;var re=le.sibling,qe=le.return;if(L1(le),le===Z){se=null;break}if(re!==null){re.return=qe,se=re;break}se=qe}}}var Ge=S.alternate;if(Ge!==null){var dn=Ge.child;if(dn!==null){Ge.child=null;do{var Or=dn.sibling;dn.sibling=null,dn=Or}while(dn!==null)}}se=S}}if(S.subtreeFlags&2064&&T!==null)T.return=S,se=T;else e:for(;se!==null;){if(S=se,S.flags&2048)switch(S.tag){case 0:case 11:case 15:_a(9,S,S.return)}var B=S.sibling;if(B!==null){B.return=S.return,se=B;break e}se=S.return}}var D=o.current;for(se=D;se!==null;){T=se;var H=T.child;if(T.subtreeFlags&2064&&H!==null)H.return=T,se=H;else e:for(T=D;se!==null;){if(j=se,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Su(9,j)}}catch(he){Ze(j,j.return,he)}if(j===T){se=null;break e}var ie=j.sibling;if(ie!==null){ie.return=j.return,se=ie;break e}se=j.return}}if(be=g,hr(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Jl,o)}catch{}f=!0}return f}finally{Le=d,ht.transition=a}}return!1}function Q1(o,a,d){a=Ks(d,a),a=g1(o,a,1),o=ri(o,a,1),a=qt(),o!==null&&(aa(o,1,a),cn(o,a))}function Ze(o,a,d){if(o.tag===3)Q1(o,o,d);else for(;a!==null;){if(a.tag===3){Q1(a,o,d);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ii===null||!ii.has(f))){o=Ks(d,o),o=m1(a,o,1),a=ri(a,o,1),o=qt(),a!==null&&(aa(a,1,o),cn(a,o));break}}a=a.return}}function X5(o,a,d){var f=o.pingCache;f!==null&&f.delete(a),a=qt(),o.pingedLanes|=o.suspendedLanes&d,Nt===o&&(jt&d)===d&&(wt===4||wt===3&&(jt&130023424)===jt&&500>Tt()-Tf?Ji(o,0):Pf|=d),cn(o,a)}function J1(o,a){a===0&&(o.mode&1?(a=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):a=1);var d=qt();o=fr(o,a),o!==null&&(aa(o,a,d),cn(o,d))}function Q5(o){var a=o.memoizedState,d=0;a!==null&&(d=a.retryLane),J1(o,d)}function J5(o,a){var d=0;switch(o.tag){case 13:var f=o.stateNode,g=o.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=o.stateNode;break;default:throw Error(l(314))}f!==null&&f.delete(a),J1(o,d)}var Z1;Z1=function(o,a,d){if(o!==null)if(o.memoizedProps!==a.pendingProps||on.current)ln=!0;else{if(!(o.lanes&d)&&!(a.flags&128))return ln=!1,U5(o,a,d);ln=!!(o.flags&131072)}else ln=!1,Je&&a.flags&1048576&&Am(a,tu,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;yu(o,a),o=a.pendingProps;var g=Ds(a,$t.current);$s(a,d),g=ef(null,a,f,o,g,d);var S=tf();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,an(f)?(S=!0,ql(a)):S=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Kh(a),g.updater=gu,a.stateNode=g,g._reactInternals=a,lf(a,f,o,d),a=hf(null,a,f,!0,S,d)):(a.tag=0,Je&&S&&Fh(a),en(null,a,g,d),a=a.child),a;case 16:f=a.elementType;e:{switch(yu(o,a),o=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=e6(f),o=Yn(f,o),g){case 0:a=df(null,a,f,o,d);break e;case 1:a=b1(null,a,f,o,d);break e;case 11:a=w1(null,a,f,o,d);break e;case 14:a=S1(null,a,f,Yn(f.type,o),d);break e}throw Error(l(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Yn(f,g),df(o,a,f,g,d);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Yn(f,g),b1(o,a,f,g,d);case 3:e:{if(E1(a),o===null)throw Error(l(387));f=a.pendingProps,S=a.memoizedState,g=S.element,Bm(o,a),lu(a,f,null,d);var T=a.memoizedState;if(f=T.element,Oe&&S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){g=Ks(Error(l(423)),a),a=P1(o,a,f,d,g);break e}else if(f!==g){g=Ks(Error(l(424)),a),a=P1(o,a,f,d,g);break e}else for(Oe&&(Nn=e5(a.stateNode.containerInfo),yn=a,Je=!0,qn=null,la=!1),d=Dm(a,null,f,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Bs(),f===g){a=Nr(o,a,d);break e}en(o,a,f,d)}a=a.child}return a;case 5:return $m(a),o===null&&zh(a),f=a.type,g=a.pendingProps,S=o!==null?o.memoizedProps:null,T=g.children,Ue(f,g)?T=null:S!==null&&Ue(f,S)&&(a.flags|=32),C1(o,a),en(o,a,T,d),a.child;case 6:return o===null&&zh(a),null;case 13:return T1(o,a,d);case 4:return qh(a,a.stateNode.containerInfo),f=a.pendingProps,o===null?a.child=Gs(a,null,f,d):en(o,a,f,d),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Yn(f,g),w1(o,a,f,g,d);case 7:return en(o,a,a.pendingProps,d),a.child;case 8:return en(o,a,a.pendingProps.children,d),a.child;case 12:return en(o,a,a.pendingProps.children,d),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,S=a.memoizedProps,T=g.value,Um(a,f,T),S!==null)if(Kn(S.value,T)){if(S.children===g.children&&!on.current){a=Nr(o,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var j=S.dependencies;if(j!==null){T=S.child;for(var G=j.firstContext;G!==null;){if(G.context===f){if(S.tag===1){G=Rr(-1,d&-d),G.tag=2;var Z=S.updateQueue;if(Z!==null){Z=Z.shared;var le=Z.pending;le===null?G.next=G:(G.next=le.next,le.next=G),Z.pending=G}}S.lanes|=d,G=S.alternate,G!==null&&(G.lanes|=d),Wh(S.return,d,a),j.lanes|=d;break}G=G.next}}else if(S.tag===10)T=S.type===a.type?null:S.child;else if(S.tag===18){if(T=S.return,T===null)throw Error(l(341));T.lanes|=d,j=T.alternate,j!==null&&(j.lanes|=d),Wh(T,d,a),T=S.sibling}else T=S.child;if(T!==null)T.return=S;else for(T=S;T!==null;){if(T===a){T=null;break}if(S=T.sibling,S!==null){S.return=T.return,T=S;break}T=T.return}S=T}en(o,a,g.children,d),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,$s(a,d),g=An(g),f=f(g),a.flags|=1,en(o,a,f,d),a.child;case 14:return f=a.type,g=Yn(f,a.pendingProps),g=Yn(f.type,g),S1(o,a,f,g,d);case 15:return x1(o,a,a.type,a.pendingProps,d);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Yn(f,g),yu(o,a),a.tag=1,an(f)?(o=!0,ql(a)):o=!1,$s(a,d),f1(a,f,g),lf(a,f,g,d),hf(null,a,f,!0,o,d);case 19:return N1(o,a,d);case 22:return k1(o,a,d)}throw Error(l(156,a.tag))};function ey(o,a){return Ih(o,a)}function Z5(o,a,d,f){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(o,a,d,f){return new Z5(o,a,d,f)}function Mf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function e6(o){if(typeof o=="function")return Mf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===b)return 11;if(o===x)return 14}return 2}function li(o,a){var d=o.alternate;return d===null?(d=jn(o.tag,a,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=a,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,a=o.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function ju(o,a,d,f,g,S){var T=2;if(f=o,typeof o=="function")Mf(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case p:return ts(d.children,g,S,a);case w:T=8,g|=8;break;case y:return o=jn(12,d,a,g|2),o.elementType=y,o.lanes=S,o;case E:return o=jn(13,d,a,g),o.elementType=E,o.lanes=S,o;case C:return o=jn(19,d,a,g),o.elementType=C,o.lanes=S,o;case k:return Mu(d,g,S,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case v:T=10;break e;case _:T=9;break e;case b:T=11;break e;case x:T=14;break e;case m:T=16,f=null;break e}throw Error(l(130,o==null?o:typeof o,""))}return a=jn(T,d,a,g),a.elementType=o,a.type=f,a.lanes=S,a}function ts(o,a,d,f){return o=jn(7,o,f,a),o.lanes=d,o}function Mu(o,a,d,f){return o=jn(22,o,f,a),o.elementType=k,o.lanes=d,o.stateNode={isHidden:!1},o}function Ff(o,a,d){return o=jn(6,o,null,a),o.lanes=d,o}function Df(o,a,d){return a=jn(4,o.children!==null?o.children:[],o.key,a),a.lanes=d,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function t6(o,a,d,f,g){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=f,this.onRecoverableError=g,Oe&&(this.mutableSourceEagerHydrationData=null)}function ty(o,a,d,f,g,S,T,j,G){return o=new t6(o,a,d,j,G),a===1?(a=1,S===!0&&(a|=8)):a=0,S=jn(3,null,null,a),o.current=S,S.stateNode=o,S.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(S),o}function ny(o){if(!o)return ti;o=o._reactInternals;e:{if(U(o)!==o||o.tag!==1)throw Error(l(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(an(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(l(171))}if(o.tag===1){var d=o.type;if(an(d))return bm(o,d,a)}return a}function ry(o){var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(l(188)):(o=Object.keys(o).join(","),Error(l(268,o)));return o=M(a),o===null?null:o.stateNode}function iy(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<a?d:a}}function Fu(o,a){iy(o,a),(o=o.alternate)&&iy(o,a)}function n6(o){return o=M(o),o===null?null:o.stateNode}function r6(){return null}return n.attemptContinuousHydration=function(o){if(o.tag===13){var a=fr(o,134217728);if(a!==null){var d=qt();Ln(a,o,134217728,d)}Fu(o,134217728)}},n.attemptDiscreteHydration=function(o){if(o.tag===13){var a=fr(o,1);if(a!==null){var d=qt();Ln(a,o,1,d)}Fu(o,1)}},n.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var a=oi(o),d=fr(o,a);if(d!==null){var f=qt();Ln(d,o,a,f)}Fu(o,a)}},n.attemptSynchronousHydration=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var d=oa(a.pendingLanes);d!==0&&(Oh(a,d|1),cn(a,Tt()),!(be&6)&&(Xs(),hr()))}break;case 13:H1(function(){var f=fr(o,1);if(f!==null){var g=qt();Ln(f,o,1,g)}}),Fu(o,1)}},n.batchedUpdates=function(o,a){var d=be;be|=1;try{return o(a)}finally{be=d,be===0&&(Xs(),Zl&&hr())}},n.createComponentSelector=function(o){return{$$typeof:xu,value:o}},n.createContainer=function(o,a,d,f,g,S,T){return ty(o,a,!1,null,d,f,g,S,T)},n.createHasPseudoClassSelector=function(o){return{$$typeof:ku,value:o}},n.createHydrationContainer=function(o,a,d,f,g,S,T,j,G){return o=ty(d,f,!0,o,g,S,T,j,G),o.context=ny(null),d=o.current,f=qt(),g=oi(d),S=Rr(f,g),S.callback=a??null,ri(d,S,g),o.current.lanes=g,aa(o,g,f),cn(o,f),o},n.createPortal=function(o,a,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:f==null?null:""+f,children:o,containerInfo:a,implementation:d}},n.createRoleSelector=function(o){return{$$typeof:Cu,value:o}},n.createTestNameSelector=function(o){return{$$typeof:bu,value:o}},n.createTextSelector=function(o){return{$$typeof:Eu,value:o}},n.deferredUpdates=function(o){var a=Le,d=ht.transition;try{return ht.transition=null,Le=16,o()}finally{Le=a,ht.transition=d}},n.discreteUpdates=function(o,a,d,f,g){var S=Le,T=ht.transition;try{return ht.transition=null,Le=1,o(a,d,f,g)}finally{Le=S,ht.transition=T,be===0&&Xs()}},n.findAllNodes=bf,n.findBoundingRects=function(o,a){if(!ra)throw Error(l(363));a=bf(o,a),o=[];for(var d=0;d<a.length;d++)o.push(P3(a[d]));for(a=o.length-1;0<a;a--){d=o[a];for(var f=d.x,g=f+d.width,S=d.y,T=S+d.height,j=a-1;0<=j;j--)if(a!==j){var G=o[j],Z=G.x,le=Z+G.width,ve=G.y,re=ve+G.height;if(f>=Z&&S>=ve&&g<=le&&T<=re){o.splice(a,1);break}else if(f!==Z||d.width!==G.width||re<S||ve>T){if(!(S!==ve||d.height!==G.height||le<f||Z>g)){Z>f&&(G.width+=Z-f,G.x=f),le<g&&(G.width=g-Z),o.splice(a,1);break}}else{ve>S&&(G.height+=ve-S,G.y=S),re<T&&(G.height=T-ve),o.splice(a,1);break}}}return o},n.findHostInstance=ry,n.findHostInstanceWithNoPortals=function(o){return o=K(o),o=o!==null?z(o):null,o===null?null:o.stateNode},n.findHostInstanceWithWarning=function(o){return ry(o)},n.flushControlled=function(o){var a=be;be|=1;var d=ht.transition,f=Le;try{ht.transition=null,Le=1,o()}finally{Le=f,ht.transition=d,be=a,be===0&&(Xs(),hr())}},n.flushPassiveEffects=es,n.flushSync=H1,n.focusWithin=function(o,a){if(!ra)throw Error(l(363));for(o=xf(o),a=V1(o,a),a=Array.from(a),o=0;o<a.length;){var d=a[o++];if(!ia(d)){if(d.tag===5&&N3(d.stateNode))return!0;for(d=d.child;d!==null;)a.push(d),d=d.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Le},n.getFindAllNodesFailureDescription=function(o,a){if(!ra)throw Error(l(363));var d=0,f=[];o=[xf(o),0];for(var g=0;g<o.length;){var S=o[g++],T=o[g++],j=a[T];if((S.tag!==5||!ia(S))&&(kf(S,j)&&(f.push(Cf(j)),T++,T>d&&(d=T)),T<a.length))for(S=S.child;S!==null;)o.push(S,T),S=S.sibling}if(d<a.length){for(o=[];d<a.length;d++)o.push(Cf(a[d]));return`findAllNodes was able to match part of the selector:
  `+(f.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},n.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return te(o.child.stateNode);default:return o.child.stateNode}},n.injectIntoDevTools=function(o){if(o={bundleType:o.bundleType,version:o.version,rendererPackageName:o.rendererPackageName,rendererConfig:o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:n6,findFiberByHostInstance:o.findFiberByHostInstance||r6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)o=!0;else{try{Jl=a.inject(o),dr=a}catch{}o=!!a.checkDCE}}return o},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(o,a,d,f){if(!ra)throw Error(l(363));o=bf(o,a);var g=A3(o,d,f).disconnect;return{disconnect:function(){g()}}},n.registerMutableSourceForHydration=function(o,a){var d=a._getVersion;d=d(a._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,d]:o.mutableSourceEagerHydrationData.push(a,d)},n.runWithPriority=function(o,a){var d=Le;try{return Le=o,a()}finally{Le=d}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(o,a,d,f){var g=a.current,S=qt(),T=oi(g);return d=ny(d),a.context===null?a.context=d:a.pendingContext=d,a=Rr(S,T),a.payload={element:o},f=f===void 0?null:f,f!==null&&(a.callback=f),o=ri(g,a,T),o!==null&&(Ln(o,g,T,S),au(o,g,T)),T},n};o3.exports=gP;var mP=o3.exports;const yP=Yp(mP);var a3={exports:{}},Ms={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ms.ConcurrentRoot=1;Ms.ContinuousEventPriority=4;Ms.DefaultEventPriority=16;Ms.DiscreteEventPriority=1;Ms.IdleEventPriority=536870912;Ms.LegacyRoot=0;a3.exports=Ms;var l3=a3.exports;const P2={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let T2=!1,R2=!1;const dm=".react-konva-event",vP=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,_P=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,wP={};function kh(t,e,n=wP){if(!T2&&"zIndex"in e&&(console.warn(_P),T2=!0),!R2&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(vP),R2=!0)}for(var s in n)if(!P2[s]){var l=s.slice(0,2)==="on",u=n[s]!==e[s];if(l&&u){var c=s.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t.off(c,n[s])}var h=!e.hasOwnProperty(s);h&&t.setAttr(s,void 0)}var p=e._useStrictMode,w={},y=!1;const v={};for(var s in e)if(!P2[s]){var l=s.slice(0,2)==="on",_=n[s]!==e[s];if(l&&_){var c=s.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[s]&&(v[c]=e[s])}!l&&(e[s]!==n[s]||p&&e[s]!==t.getAttr(s))&&(y=!0,w[s]=e[s])}y&&(t.setAttrs(w),Wi(t));for(var c in v)t.on(c+dm,v[c])}function Wi(t){if(!ke.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const u3={},SP={};Ol.Node.prototype._applyProps=kh;function xP(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Wi(t)}function kP(t,e,n){let r=Ol[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Ol.Group);const i={},s={};for(var l in e){var u=l.slice(0,2)==="on";u?s[l]=e[l]:i[l]=e[l]}const c=new r(i);return kh(c,s),c}function CP(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function bP(t,e,n){return!1}function EP(t){return t}function PP(){return null}function TP(){return null}function RP(t,e,n,r){return SP}function NP(){}function AP(t){}function OP(t,e){return!1}function IP(){return u3}function LP(){return u3}const jP=setTimeout,MP=clearTimeout,FP=-1;function DP(t,e){return!1}const UP=!1,zP=!0,BP=!0;function GP(t,e){e.parent===t?e.moveToTop():t.add(e),Wi(t)}function VP(t,e){e.parent===t?e.moveToTop():t.add(e),Wi(t)}function c3(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Wi(t)}function $P(t,e,n){c3(t,e,n)}function WP(t,e){e.destroy(),e.off(dm),Wi(t)}function HP(t,e){e.destroy(),e.off(dm),Wi(t)}function KP(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function qP(t,e,n){}function YP(t,e,n,r,i){kh(t,i,r)}function XP(t){t.hide(),Wi(t)}function QP(t){}function JP(t,e){(e.visible==null||e.visible)&&t.show()}function ZP(t,e){}function eT(t){}function tT(){}const nT=()=>l3.DefaultEventPriority,rT=Object.freeze(Object.defineProperty({__proto__:null,appendChild:GP,appendChildToContainer:VP,appendInitialChild:xP,cancelTimeout:MP,clearContainer:eT,commitMount:qP,commitTextUpdate:KP,commitUpdate:YP,createInstance:kP,createTextInstance:CP,detachDeletedInstance:tT,finalizeInitialChildren:bP,getChildHostContext:LP,getCurrentEventPriority:nT,getPublicInstance:EP,getRootHostContext:IP,hideInstance:XP,hideTextInstance:QP,idlePriority:$a.unstable_IdlePriority,insertBefore:c3,insertInContainerBefore:$P,isPrimaryRenderer:UP,noTimeout:FP,now:$a.unstable_now,prepareForCommit:PP,preparePortalMount:TP,prepareUpdate:RP,removeChild:WP,removeChildFromContainer:HP,resetAfterCommit:NP,resetTextContent:AP,run:$a.unstable_runWithPriority,scheduleTimeout:jP,shouldDeprioritizeSubtree:OP,shouldSetTextContent:DP,supportsMutation:BP,unhideInstance:JP,unhideTextInstance:ZP,warnsIfNotActing:zP},Symbol.toStringTag,{value:"Module"}));var iT=Object.defineProperty,sT=Object.defineProperties,oT=Object.getOwnPropertyDescriptors,N2=Object.getOwnPropertySymbols,aT=Object.prototype.hasOwnProperty,lT=Object.prototype.propertyIsEnumerable,A2=(t,e,n)=>e in t?iT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O2=(t,e)=>{for(var n in e||(e={}))aT.call(e,n)&&A2(t,n,e[n]);if(N2)for(var n of N2(e))lT.call(e,n)&&A2(t,n,e[n]);return t},uT=(t,e)=>sT(t,oT(e)),I2,L2;typeof window<"u"&&((I2=window.document)!=null&&I2.createElement||((L2=window.navigator)==null?void 0:L2.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function d3(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=d3(r,e,n);if(i)return i;r=r.sibling}}function h3(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const j2=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=j2;return}return j2.apply(this,arguments)};const hm=h3(W.createContext(null));class f3 extends W.Component{render(){return W.createElement(hm.Provider,{value:this._reactInternals},this.props.children)}}function cT(){const t=W.useContext(hm);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=d3(r,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===e)return!0;l=l.next}});if(i)return i}},[t,e])}function dT(){const t=cT(),[e]=W.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==hm&&!e.has(i)&&e.set(i,W.useContext(h3(i)))}n=n.return}return e}function hT(){const t=dT();return W.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>W.createElement(e,null,W.createElement(n.Provider,uT(O2({},r),{value:t.get(n)}))),e=>W.createElement(f3,O2({},e))),[t])}function fT(t){const e=Ut.useRef({});return Ut.useLayoutEffect(()=>{e.current=t}),Ut.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const pT=t=>{const e=Ut.useRef(null),n=Ut.useRef(null),r=Ut.useRef(null),i=fT(t),s=hT(),l=u=>{const{forwardedRef:c}=t;c&&(typeof c=="function"?c(u):c.current=u)};return Ut.useLayoutEffect(()=>(n.current=new Ol.Stage({width:t.width,height:t.height,container:e.current}),l(n.current),r.current=Va.createContainer(n.current,l3.LegacyRoot,!1,null),Va.updateContainer(Ut.createElement(s,{},t.children),r.current),()=>{Ol.isBrowser&&(l(null),Va.updateContainer(null,r.current,null),n.current.destroy())}),[]),Ut.useLayoutEffect(()=>{l(n.current),kh(n.current,t,i),Va.updateContainer(Ut.createElement(s,{},t.children),r.current,null)}),Ut.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},p3="Layer",ad="Group",hs="Rect",M2="Line",N0="Text",g3="Transformer",Va=yP(rT);Va.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ut.version,rendererPackageName:"react-konva"});const m3=Ut.forwardRef((t,e)=>Ut.createElement(f3,{},Ut.createElement(pT,{...t,forwardedRef:e}))),Ae=20;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Gt=(t,e)=>{const n=W.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:c,...h},p)=>W.createElement("svg",{ref:p,...gT,width:i,height:i,stroke:r,strokeWidth:l?Number(s)*24/Number(i):s,className:["lucide",`lucide-${mT(t)}`,u].join(" "),...h},[...e.map(([w,y])=>W.createElement(w,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Gt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Gt("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Gt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=Gt("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Gt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Gt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Gt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Gt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Gt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Gt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Gt("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Gt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Gt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=Gt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Gt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=Gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function v3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=v3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gm(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=v3(t))&&(r&&(r+=" "),r+=e);return r}const mm="-",RT=t=>{const e=AT(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const u=l.split(mm);return u[0]===""&&u.length!==1&&u.shift(),_3(u,e)||NT(l)},getConflictingClassGroupIds:(l,u)=>{const c=n[l]||[];return u&&r[l]?[...c,...r[l]]:c}}},_3=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?_3(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(mm);return(l=e.validators.find(({validator:u})=>u(s)))==null?void 0:l.classGroupId},F2=/^\[(.+)\]$/,NT=t=>{if(F2.test(t)){const e=F2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},AT=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return IT(Object.entries(t.classGroups),n).forEach(([s,l])=>{qp(l,r,s,e)}),r},qp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:D2(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(OT(i)){qp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,l])=>{qp(l,D2(e,s),n,r)})})},D2=(t,e)=>{let n=t;return e.split(mm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},OT=t=>t.isThemeGetter,IT=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([l,u])=>[e+l,u])):s);return[n,i]}):t,LT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,l)=>{n.set(s,l),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return i(s,l),l},set(s,l){n.has(s)?n.set(s,l):i(s,l)}}},w3="!",jT=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,l=u=>{const c=[];let h=0,p=0,w;for(let E=0;E<u.length;E++){let C=u[E];if(h===0){if(C===i&&(r||u.slice(E,E+s)===e)){c.push(u.slice(p,E)),p=E+s;continue}if(C==="/"){w=E;continue}}C==="["?h++:C==="]"&&h--}const y=c.length===0?u:u.substring(p),v=y.startsWith(w3),_=v?y.substring(1):y,b=w&&w>p?w-p:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:b}};return n?u=>n({className:u,parseClassName:l}):l},MT=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},FT=t=>({cache:LT(t.cacheSize),parseClassName:jT(t),...RT(t)}),DT=/\s+/,UT=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],l=t.trim().split(DT);let u="";for(let c=l.length-1;c>=0;c-=1){const h=l[c],{modifiers:p,hasImportantModifier:w,baseClassName:y,maybePostfixModifierPosition:v}=n(h);let _=!!v,b=r(_?y.substring(0,v):y);if(!b){if(!_){u=h+(u.length>0?" "+u:u);continue}if(b=r(y),!b){u=h+(u.length>0?" "+u:u);continue}_=!1}const E=MT(p).join(":"),C=w?E+w3:E,x=C+b;if(s.includes(x))continue;s.push(x);const m=i(b,_);for(let k=0;k<m.length;++k){const R=m[k];s.push(C+R)}u=h+(u.length>0?" "+u:u)}return u};function zT(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=S3(e))&&(r&&(r+=" "),r+=n);return r}const S3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=S3(t[r]))&&(n&&(n+=" "),n+=e);return n};function BT(t,...e){let n,r,i,s=l;function l(c){const h=e.reduce((p,w)=>w(p),t());return n=FT(h),r=n.cache.get,i=n.cache.set,s=u,u(c)}function u(c){const h=r(c);if(h)return h;const p=UT(c,n);return i(c,p),p}return function(){return s(zT.apply(null,arguments))}}const Ye=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},x3=/^\[(?:([a-z-]+):)?(.+)\]$/i,GT=/^\d+\/\d+$/,VT=new Set(["px","full","screen"]),$T=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,KT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lr=t=>Oo(t)||VT.has(t)||GT.test(t),hi=t=>na(t,"length",nR),Oo=t=>!!t&&!Number.isNaN(Number(t)),A0=t=>na(t,"number",Oo),Ma=t=>!!t&&Number.isInteger(Number(t)),YT=t=>t.endsWith("%")&&Oo(t.slice(0,-1)),Se=t=>x3.test(t),fi=t=>$T.test(t),XT=new Set(["length","size","percentage"]),QT=t=>na(t,XT,k3),JT=t=>na(t,"position",k3),ZT=new Set(["image","url"]),eR=t=>na(t,ZT,iR),tR=t=>na(t,"",rR),Fa=()=>!0,na=(t,e,n)=>{const r=x3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},nR=t=>WT.test(t)&&!HT.test(t),k3=()=>!1,rR=t=>KT.test(t),iR=t=>qT.test(t),sR=()=>{const t=Ye("colors"),e=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),i=Ye("borderColor"),s=Ye("borderRadius"),l=Ye("borderSpacing"),u=Ye("borderWidth"),c=Ye("contrast"),h=Ye("grayscale"),p=Ye("hueRotate"),w=Ye("invert"),y=Ye("gap"),v=Ye("gradientColorStops"),_=Ye("gradientColorStopPositions"),b=Ye("inset"),E=Ye("margin"),C=Ye("opacity"),x=Ye("padding"),m=Ye("saturate"),k=Ye("scale"),R=Ye("sepia"),N=Ye("skew"),O=Ye("space"),A=Ye("translate"),U=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",Se,e],M=()=>[Se,e],V=()=>["",Lr,hi],z=()=>["auto",Oo,Se],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Se],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Oo,Se];return{cacheSize:500,separator:":",theme:{colors:[Fa],spacing:[Lr,hi],blur:["none","",fi,Se],brightness:Q(),borderColor:[t],borderRadius:["none","","full",fi,Se],borderSpacing:M(),borderWidth:V(),contrast:Q(),grayscale:q(),hueRotate:Q(),invert:q(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[YT,hi],inset:K(),margin:K(),opacity:Q(),padding:M(),saturate:Q(),scale:Q(),sepia:q(),skew:Q(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[fi]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Se]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ma,Se]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Ma,Se]}],"grid-cols":[{"grid-cols":[Fa]}],"col-start-end":[{col:["auto",{span:["full",Ma,Se]},Se]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Fa]}],"row-start-end":[{row:["auto",{span:[Ma,Se]},Se]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[fi]},fi]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fi,hi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",A0]}],"font-family":[{font:[Fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",Oo,A0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lr,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr,hi]}],"underline-offset":[{"underline-offset":["auto",Lr,Se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),JT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eR]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:te()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Lr,Se]}],"outline-w":[{outline:[Lr,hi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Lr,hi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fi,tR]}],"shadow-color":[{shadow:[Fa]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",fi,Se]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[w]}],saturate:[{saturate:[m]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[m]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Ma,Se]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lr,hi,A0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ym=BT(sR);function oR(...t){return ym(gm(t))}function Ct({children:t,className:e,variante:n="primario",dimensione:r="md",pienaLarghezza:i=!1,...s}){const l="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",u={primario:"bg-[--primary] text-white hover:bg-orange-600 focus:ring-orange-500",secondario:"bg-[--secondary] text-white hover:bg-blue-900 focus:ring-blue-500",fantasma:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500",pericolo:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return P.jsx("button",{className:oR(l,u[n],c[r],i&&"w-full",e),...s,children:t})}function aR({selectedId:t,ruotaSelezionato:e,rimuoviSelezionato:n,onSave:r,onToggleSidebar:i}){return P.jsxs("div",{className:"bg-white border-b border-gray-200 p-2 sm:p-4 flex items-center justify-between shadow-sm z-10 gap-3",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:bg-gray-100 rounded md:hidden",title:"Menu Strumenti",children:P.jsx(wT,{className:"w-6 h-6"})}),P.jsx(Un,{to:"/",className:"text-gray-500 hover:text-[--secondary] p-1",children:P.jsx(Wl,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),P.jsxs("h1",{className:"text-lg sm:text-xl font-bold text-[--secondary] flex items-center gap-2",children:[P.jsx(y3,{className:"w-5 h-5 sm:w-6 sm:h-6"}),P.jsx("span",{className:"hidden sm:inline",children:"Designer Sala"}),P.jsx("span",{className:"sm:hidden",children:"Designer"})]})]}),P.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[P.jsx(Ct,{variante:"secondario",onClick:e,disabled:!t,className:"p-2",title:"Ruota selezionato",children:P.jsx(kT,{className:"w-5 h-5"})}),P.jsx(Ct,{variante:"pericolo",onClick:n,disabled:!t,className:"p-2",title:"Elimina selezionato",children:P.jsx(pm,{className:"w-5 h-5"})}),P.jsxs(Ct,{onClick:r,className:"flex items-center gap-2 shadow-md",children:[P.jsx(CT,{className:"w-4 h-4"}),P.jsx("span",{className:"hidden sm:inline",children:"Salva"})]})]})]})}function U2({roomDimensions:t,setRoomDimensions:e,creaStanza:n,onAddObject:r,onAddDoor:i,className:s=""}){const[l,u]=W.useState({name:"",width:1,height:1}),c=()=>{l.name&&l.width>0&&l.height>0&&(r(l.name,l.width,l.height),u(h=>({...h,name:""})))};return P.jsxs("div",{className:`bg-white border-r border-gray-200 p-4 flex flex-col gap-6 overflow-y-auto ${s}`,children:[P.jsxs("div",{className:"flex flex-col gap-3",children:[P.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center gap-2",children:[P.jsx(y3,{className:"w-4 h-4"}),"Area Locale"]}),P.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 flex flex-col gap-3",children:[P.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[P.jsxs("div",{className:"flex flex-col gap-1",children:[P.jsx("label",{className:"text-xs text-gray-500 font-medium",children:"Larghezza (m)"}),P.jsx("input",{type:"number",min:"1",value:t.width,onChange:h=>e({...t,width:parseFloat(h.target.value)||0}),className:"w-full text-sm border border-gray-300 rounded p-1.5 focus:border-[--secondary] focus:outline-none"})]}),P.jsxs("div",{className:"flex flex-col gap-1",children:[P.jsx("label",{className:"text-xs text-gray-500 font-medium",children:"Altezza (m)"}),P.jsx("input",{type:"number",min:"1",step:"0.5",value:t.height,onChange:h=>e({...t,height:parseFloat(h.target.value)||0}),className:"w-full text-sm border border-gray-300 rounded p-1.5 focus:border-[--secondary] focus:outline-none"})]})]}),P.jsx(Ct,{variante:"primario",dimensione:"sm",onClick:n,className:"w-full justify-center",children:"Crea Stanza"}),P.jsx(Ct,{variante:"secondario",dimensione:"sm",onClick:i,className:"w-full justify-center",children:"Aggiungi Porta (1m)"})]})]}),P.jsx("div",{className:"h-px bg-gray-200"}),P.jsxs("div",{className:"flex flex-col gap-3",children:[P.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center gap-2",children:[P.jsx(ET,{className:"w-4 h-4"}),"Crea Oggetto"]}),P.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 flex flex-col gap-3",children:[P.jsxs("div",{className:"flex flex-col gap-1",children:[P.jsx("label",{className:"text-xs text-gray-500 font-medium",children:"Nome Oggetto"}),P.jsx("input",{type:"text",placeholder:"Es. Tavolo VIP",value:l.name,onChange:h=>u({...l,name:h.target.value}),className:"w-full text-sm border border-gray-300 rounded p-1.5 focus:border-[--secondary] focus:outline-none"})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[P.jsxs("div",{className:"flex flex-col gap-1",children:[P.jsx("label",{className:"text-xs text-gray-500 font-medium",children:"Larghezza (m)"}),P.jsx("input",{type:"number",min:"0.5",step:"0.5",value:l.width,onChange:h=>u({...l,width:parseFloat(h.target.value)||0}),className:"w-full text-sm border border-gray-300 rounded p-1.5 focus:border-[--secondary] focus:outline-none"})]}),P.jsxs("div",{className:"flex flex-col gap-1",children:[P.jsx("label",{className:"text-xs text-gray-500 font-medium",children:"Altezza (m)"}),P.jsx("input",{type:"number",min:"0.5",step:"0.5",value:l.height,onChange:h=>u({...l,height:parseFloat(h.target.value)||0}),className:"w-full text-sm border border-gray-300 rounded p-1.5 focus:border-[--secondary] focus:outline-none"})]})]}),P.jsxs(Ct,{variante:"secondario",dimensione:"sm",onClick:c,disabled:!l.name||l.width<=0||l.height<=0,className:"w-full justify-center flex items-center gap-2",children:[P.jsx(fm,{className:"w-4 h-4"}),"Aggiungi"]})]})]})]})}function lR({stageSize:t,visibleRect:e}){const n=[],r=e?Math.floor(e.x/Ae)*Ae:0,i=e?Math.floor(e.y/Ae)*Ae:0,s=e?Math.ceil((e.x+e.width)/Ae)*Ae:t.width,l=e?Math.ceil((e.y+e.height)/Ae)*Ae:t.height,u=Ae*5,c=r-u,h=i-u,p=s+u,w=l+u;for(let y=c;y<=p;y+=Ae)n.push(P.jsx(M2,{points:[y,h,y,w],stroke:"#e5e7eb",strokeWidth:1,listening:!1},`v-${y}`));for(let y=h;y<=w;y+=Ae)n.push(P.jsx(M2,{points:[c,y,p,y],stroke:"#e5e7eb",strokeWidth:1,listening:!1},`h-${y}`));return P.jsx(P.Fragment,{children:n})}function C3({elemento:t,isSelected:e,onSelect:n,onDragEnd:r,onTransformEnd:i,readOnly:s=!1,fillColor:l}){return P.jsxs(ad,{id:t.id,x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation||0,draggable:!s,onDragEnd:u=>!s&&r(u,t.id),onClick:!s||t.type==="rect"?n:void 0,onTap:!s||t.type==="rect"?n:void 0,onTransformEnd:u=>!s&&i(u,t.id),children:[t.type==="wall"&&P.jsx(hs,{width:t.width,height:t.height,fill:"#2c3e50",stroke:e?"#FF6B35":void 0,strokeWidth:e?2:0,cornerRadius:2}),t.type==="room"&&P.jsx(hs,{width:t.width,height:t.height,stroke:"#2c3e50",strokeWidth:Ae,fill:"transparent",listening:!1}),t.type==="door"&&P.jsxs(ad,{children:[P.jsx(hs,{width:t.width,height:t.height,fill:"#ffffff"}),P.jsx(hs,{width:t.width,height:t.height,stroke:"#FF6B35",strokeWidth:2,cornerRadius:2}),P.jsx(N0,{text:"DOOR",fontSize:10,width:t.width,height:t.height,align:"center",verticalAlign:"middle"})]}),t.type==="rect"&&P.jsxs(P.Fragment,{children:[P.jsx(hs,{width:t.width,height:t.height,fill:l||(e?"#FFE8D6":"#fff"),stroke:e?"#FF6B35":"#4B5563",strokeWidth:e?2:1,cornerRadius:4,shadowColor:"black",shadowBlur:5,shadowOpacity:.1,shadowOffset:{x:2,y:2}}),P.jsx(N0,{text:t.label,fontSize:14,fontStyle:"bold",fill:"#4B5563",width:t.width,height:t.height,align:"center",verticalAlign:"middle",listening:!1})]}),t.type==="text"&&P.jsx(N0,{text:t.label,fontSize:t.fontSize||16,fontStyle:"bold",fill:"#4B5563",width:t.width,align:"center"})]})}function uR(){const[t,e]=W.useState([]),[n,r]=W.useState(null),[i,s]=W.useState({width:800,height:2e3}),[l,u]=W.useState({width:10,height:5}),[c,h]=W.useState(!1),[p,w]=W.useState(1),[y,v]=W.useState({x:0,y:0}),[_,b]=W.useState(!1),[E,C]=W.useState(()=>{if(typeof window<"u"){const M=window.innerWidth,V=Math.floor(M/Ae);return V>=40?4:V>=20?2:1}return 4}),x=E*Ae,m=W.useRef(null),k=W.useRef(null);W.useEffect(()=>{let M;const V=()=>{if(m.current){const te=m.current.offsetWidth,ee=m.current.offsetHeight;M&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{if(s({width:te,height:ee}),t.length>0){let F=1/0,q=1/0,$=-1/0,Q=-1/0;t.forEach(we=>{F=Math.min(F,we.x),q=Math.min(q,we.y),$=Math.max($,we.x+(we.width||0)),Q=Math.max(Q,we.y+(we.height||0))});const ne=Q-q,me=Q+20,Ue=$+20,Re=te/Ue,L=ee/me;let X=Math.min(Re,L);X>1&&(X=1),X<.1&&(X=.1),w(X);const de=20-F*X,ce=(ee-ne*X)/2-q*X;v({x:de,y:ce}),b(!0)}else w(1),v({x:0,y:0}),b(!0)})}};V(),window.addEventListener("resize",V);const z=setTimeout(V,100),Y=setTimeout(V,500);return()=>{window.removeEventListener("resize",V),clearTimeout(z),clearTimeout(Y),M&&cancelAnimationFrame(M)}},[t]),W.useEffect(()=>{const M=localStorage.getItem("layout.locale");if(M)try{const V=JSON.parse(M);V.elementi&&V.roomDimensions&&(e(V.elementi),u(V.roomDimensions))}catch(V){console.error("Failed to load layout",V)}},[]);const R=()=>{const M={elementi:t,roomDimensions:l,timestamp:Date.now()};localStorage.setItem("layout.locale",JSON.stringify(M)),alert("Layout salvato in locale!")},N=(M,V)=>{const z=M==="wall",Y=Math.round(100/Ae)*Ae,te=Math.round(100/Ae)*Ae;let ee,F;V!=null&&V.width&&(V!=null&&V.height)?(ee=V.width*x,F=V.height*x):M==="door"?(ee=x,F=Ae):(ee=x,F=z?Ae:x);const q={id:`el-${Date.now()}`,x:Y,y:te,type:M,width:ee,height:F,label:(V==null?void 0:V.label)||(z?void 0:M==="door"?"Porta":`T${t.filter($=>$.type==="rect").length+1}`),rotation:0};e([...t,q])},O=()=>{var L,X;const M=((L=m.current)==null?void 0:L.offsetWidth)||window.innerWidth,V=((X=m.current)==null?void 0:X.offsetHeight)||window.innerHeight,z=3*Ae,Y=M-z*2,te=V-z*2,ee=Y/l.width,F=te/l.height;let q=Math.min(ee,F);q=Math.min(q,4*Ae),C(q/Ae);const $=l.width*q,Q=l.height*q,ne=Ae,me=z,Fe=z,Ue={id:`room-${Date.now()}`,x:me-ne/2,y:Fe-ne/2,type:"room",width:$+ne,height:Q+ne,rotation:0},Re=[{id:`label-width-${Date.now()}`,x:me,y:Fe-ne*2,type:"text",label:`${l.width}m`,width:$,height:Ae,rotation:0,fontSize:16},{id:`label-height-${Date.now()}`,x:me-ne*2,y:Fe+Q,type:"text",label:`${l.height}m`,width:Q,height:Ae,rotation:-90,fontSize:16}];e([Ue,...Re])},A=()=>{n&&(e(t.filter(M=>M.id!==n)),r(null))},U=()=>{n&&e(M=>M.map(V=>{if(V.id===n){const z=(V.rotation||0)+90;return{...V,rotation:z}}return V}))},I=(M,V)=>{const z=t.find(ee=>ee.id===V);if((z==null?void 0:z.type)==="door"){const ee=t.find(F=>F.type==="room");if(ee){const F=ee.x,q=ee.y,$=ee.width||0,Q=ee.height||0,ne=[{name:"top",y:q,x1:F,x2:F+$,vertical:!1},{name:"bottom",y:q+Q,x1:F,x2:F+$,vertical:!1},{name:"left",x:F,y1:q,y2:q+Q,vertical:!0},{name:"right",x:F+$,y1:q,y2:q+Q,vertical:!0}],me=M.target.x(),Fe=M.target.y();let Ue=1/0,Re=null,L=me,X=Fe,ae=0;ne.forEach(de=>{let ce,we,Oe;if(de.vertical){const Vt=z.width||0,Ce=de.y1,Pn=de.y2-Vt;Oe=Math.max(de.y1,Math.min(Fe,de.y2)),we=de.x,ce=Math.sqrt(Math.pow(me-we,2)+Math.pow(Fe-Oe,2)),ce<Ue&&(Ue=ce,Re=de,L=we,X=Math.max(Ce,Math.min(Fe,Pn)),ae=90)}else{const Vt=z.width||0,Ce=de.x1,Pn=de.x2-Vt;we=Math.max(de.x1,Math.min(me,de.x2)),Oe=de.y,ce=Math.sqrt(Math.pow(me-we,2)+Math.pow(Fe-Oe,2)),ce<Ue&&(Ue=ce,Re=de,L=Math.max(Ce,Math.min(me,Pn)),X=Oe,ae=0)}}),Re&&(ae===90?L+=Ae/2:X-=Ae/2),M.target.x(L),M.target.y(X),M.target.rotation(ae),e(de=>de.map(ce=>ce.id===V?{...ce,x:L,y:X,rotation:ae}:ce));return}}const Y=Math.round(M.target.x()/Ae)*Ae,te=Math.round(M.target.y()/Ae)*Ae;M.target.x(Y),M.target.y(te),e(ee=>ee.map(F=>F.id===V?{...F,x:Y,y:te}:F))},K=(M,V)=>{var q,$;const z=M.target,Y=z.scaleX(),te=z.scaleY();z.scaleX(1),z.scaleY(1);const ee=Math.max(Ae/2,(((q=t.find(Q=>Q.id===V))==null?void 0:q.width)||0)*Y),F=Math.max(Ae/2,((($=t.find(Q=>Q.id===V))==null?void 0:$.height)||0)*te);e(Q=>Q.map(ne=>ne.id===V?{...ne,x:z.x(),y:z.y(),width:ee,height:F,rotation:z.rotation()}:ne))};return P.jsxs("div",{className:"flex h-screen flex-col bg-gray-50",children:[P.jsx(aR,{selectedId:n,ruotaSelezionato:U,rimuoviSelezionato:A,onSave:R,onToggleSidebar:()=>h(!c)}),c&&P.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[P.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>h(!1)}),P.jsx(U2,{className:"w-[80%] h-full shadow-xl relative z-10",roomDimensions:l,setRoomDimensions:u,creaStanza:()=>{O(),h(!1)},onAddObject:(M,V,z)=>{N("rect",{width:V,height:z,label:M}),h(!1)},onAddDoor:()=>{N("door"),h(!1)}})]}),P.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[P.jsx(U2,{className:"w-[25%] min-w-[250px] flex-shrink-0 hidden md:flex",roomDimensions:l,setRoomDimensions:u,creaStanza:O,onAddObject:(M,V,z)=>N("rect",{width:V,height:z,label:M}),onAddDoor:()=>N("door")}),P.jsx("div",{className:"flex-1 overflow-hidden bg-gray-100 relative",ref:m,children:P.jsx("div",{className:"bg-white shadow-xl mx-auto relative border-l border-gray-200",style:{width:"100%",height:"100%",minHeight:"500px"},children:P.jsx(m3,{width:i.width,height:i.height,style:{opacity:_?1:0,transition:"opacity 0.3s ease-in"},onMouseDown:M=>{M.target===M.target.getStage()&&r(null)},children:P.jsxs(p3,{children:[P.jsx(hs,{width:i.width,height:i.height,fill:"#ffffff",listening:!0,onMouseDown:()=>r(null)}),P.jsxs(ad,{x:y.x,y:y.y,scaleX:p,scaleY:p,children:[P.jsx(lR,{stageSize:i,visibleRect:{x:-y.x/p,y:-y.y/p,width:i.width/p,height:i.height/p}}),t.map(M=>P.jsx(C3,{elemento:M,isSelected:n===M.id,onSelect:()=>r(M.id),onDragEnd:I,onTransformEnd:K},M.id)),P.jsx(g3,{ref:k,boundBoxFunc:(M,V)=>V.width<20||V.height<20?M:V}),P.jsx(cR,{selectedId:n})]})]})})})})]})]})}const cR=({selectedId:t})=>{var r;const e=W.useRef(null),n=(r=e.current)==null?void 0:r.getStage();return W.useEffect(()=>{var i,s;if(t&&e.current&&n){const l=n.findOne("#"+t);l&&(e.current.nodes([l]),(i=e.current.getLayer())==null||i.batchDraw())}else e.current&&(e.current.nodes([]),(s=e.current.getLayer())==null||s.batchDraw())},[t,n]),P.jsx(g3,{ref:e})},Pc=["Antipasti","Primi","Secondi","Contorni","Dolci","Bevande","Vini"],ud=[{id:"a1",name:"Bruschetta Mista",price:6,category:"Antipasti",available:!0,description:"Pane tostato con pomodoro, pat di olive, funghi"},{id:"a2",name:"Tagliere Salumi",price:12,category:"Antipasti",available:!0,description:"Selezione di salumi locali con formaggi"},{id:"p1",name:"Spaghetti Carbonara",price:10,category:"Primi",available:!0,description:"Uova, guanciale, pecorino, pepe"},{id:"p2",name:"Penne all'Arrabbiata",price:9,category:"Primi",available:!0,description:"Pomodoro, peperoncino, aglio"},{id:"s1",name:"Tagliata di Manzo",price:18,category:"Secondi",available:!0,description:"Rucola e grana"},{id:"s2",name:"Filetto al Pepe Verde",price:22,category:"Secondi",available:!0},{id:"d1",name:"Tiramis",price:6,category:"Dolci",available:!0,description:"Fatto in casa"},{id:"d2",name:"Panna Cotta",price:5,category:"Dolci",available:!0,description:"Frutti di bosco o caramello"},{id:"b1",name:"Acqua Naturale 1L",price:2.5,category:"Bevande",available:!0},{id:"b2",name:"Coca Cola 33cl",price:3,category:"Bevande",available:!0},{id:"v1",name:"Chianti Classico",price:18,category:"Vini",available:!0,description:"Bottiglia 75cl"},{id:"v2",name:"Prosecco Valdobbiadene",price:20,category:"Vini",available:!0,description:"Bottiglia 75cl"}];function dR(){var V;const[t,e]=W.useState([]),[n,r]=W.useState([]),[i,s]=W.useState([]),[l,u]=W.useState(null),[c,h]=W.useState({width:800,height:600}),[p,w]=W.useState(null),[y,v]=W.useState({x:0,y:0}),[_,b]=W.useState(1),[E,C]=W.useState(!1),x=W.useRef(null);W.useEffect(()=>{const z=localStorage.getItem("layout.locale");if(z)try{const ee=JSON.parse(z);ee.elementi&&e(ee.elementi)}catch(ee){console.error("Failed to load layout",ee)}const Y=localStorage.getItem("menu.data");if(Y)try{r(JSON.parse(Y))}catch{r(ud)}else r(ud);const te=localStorage.getItem("orders.data");if(te)try{s(JSON.parse(te))}catch(ee){console.error("Failed to load orders",ee)}},[]),W.useEffect(()=>{i.length>0&&localStorage.setItem("orders.data",JSON.stringify(i))},[i]),W.useEffect(()=>{let z;const Y=()=>{if(x.current){const ee=x.current.offsetWidth,F=x.current.offsetHeight;z&&cancelAnimationFrame(z),z=requestAnimationFrame(()=>{if(h({width:ee,height:F}),t.length>0){let q=1/0,$=1/0,Q=-1/0,ne=-1/0;t.forEach(Ce=>{q=Math.min(q,Ce.x),$=Math.min($,Ce.y),Q=Math.max(Q,Ce.x+(Ce.width||0)),ne=Math.max(ne,Ce.y+(Ce.height||0))});const me=Q-q,Fe=ne-$,Ue=40,Re=ee-Ue,L=F-Ue,X=Re/me,ae=L/Fe;let de=Math.min(X,ae);de=Math.min(de,1.2),b(de);const ce=q+me/2,we=$+Fe/2,Oe=ee/2,Vt=F/2;v({x:Oe-ce*de,y:Vt-we*de}),C(!0)}else C(!0)})}};window.addEventListener("resize",Y);const te=setTimeout(Y,100);return()=>{window.removeEventListener("resize",Y),clearTimeout(te),z&&cancelAnimationFrame(z)}},[t]);const m=z=>{const Y=i.find(te=>te.tableId===z&&te.status==="active");return Y&&Y.items.length>0?"#fee2e2":"#dcfce7"},k=z=>{const Y=i.find(te=>te.tableId===z&&te.status==="active");return Y&&Y.items.length>0?"#ef4444":"#22c55e"},R=z=>{const Y=t.find(te=>te.id===z);Y&&Y.type==="rect"&&u(z)},N=z=>{l&&s(Y=>{const te=Y.findIndex(F=>F.tableId===l&&F.status==="active");let ee=[...Y];if(te>=0){const F={...ee[te]},q=F.items.findIndex($=>$.menuItemId===z.id);if(q>=0){const $=[...F.items];$[q]={...$[q],quantity:$[q].quantity+1},F.items=$}else F.items=[...F.items,{menuItemId:z.id,name:z.name,price:z.price,quantity:1}];ee[te]=F}else ee.push({tableId:l,status:"active",timestamp:Date.now(),items:[{menuItemId:z.id,name:z.name,price:z.price,quantity:1}]});return ee})},O=z=>{l&&s(Y=>{const te=Y.findIndex($=>$.tableId===l&&$.status==="active");if(te===-1)return Y;let ee=[...Y];const F={...ee[te]},q=F.items.findIndex($=>$.menuItemId===z);if(q>=0)if(F.items[q].quantity>1){const $=[...F.items];$[q]={...$[q],quantity:$[q].quantity-1},F.items=$}else F.items=F.items.filter($=>$.menuItemId!==z);return F.items.length===0?ee.splice(te,1):ee[te]=F,ee})},A=()=>{l&&confirm("Chiudere il conto e liberare il tavolo?")&&(s(z=>z.filter(Y=>Y.tableId!==l||Y.status!=="active")),u(null))},U=i.find(z=>z.tableId===l&&z.status==="active"),I=(U==null?void 0:U.items.reduce((z,Y)=>z+Y.price*Y.quantity,0))||0,K=((V=t.find(z=>z.id===l))==null?void 0:V.label)||"Tavolo",M=t.filter(z=>z.type==="rect");return P.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[P.jsxs("header",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-4 shadow-sm z-10 shrink-0",children:[P.jsx(Un,{to:"/",className:"text-gray-500 hover:text-[--secondary] p-1",children:P.jsx(Wl,{className:"w-6 h-6"})}),P.jsxs("h1",{className:"text-xl font-bold text-[--secondary] flex items-center gap-2",children:[P.jsx(ld,{className:"w-6 h-6 text-[--primary]"}),"Sala & Ordini"]})]}),P.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[P.jsxs("div",{className:"w-[20%] min-w-[220px] bg-white border-r border-gray-200 flex flex-col shadow-lg z-10 shrink-0",children:[P.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[P.jsx("h2",{className:"font-bold text-lg text-gray-800",children:"Tavoli"}),P.jsx("p",{className:"text-sm text-gray-500",children:"Seleziona un tavolo"})]}),P.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:P.jsx("div",{className:"flex flex-col gap-3",children:M.map(z=>{const Y=k(z.id)==="#ef4444",te=l===z.id;return P.jsxs("div",{className:"flex flex-col gap-2",children:[P.jsxs("button",{onClick:()=>{R(z.id)},className:`w-full p-4 rounded-xl border-2 transition-all flex items-center justify-between ${Y?"bg-red-50 border-red-200 hover:border-red-400":"bg-green-50 border-green-200 hover:border-green-400"} ${te?"ring-2 ring-[--primary] ring-offset-2":""}`,children:[P.jsx("span",{className:"font-bold text-gray-700 text-lg",children:z.label||"Tavolo"}),P.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${Y?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:Y?"Occupato":"Libero"})]}),te&&P.jsx("div",{className:"ml-4 pl-4 border-l-2 border-gray-200 flex flex-col gap-2 animate-in fade-in slide-in-from-top-2 duration-200",children:Pc.map(ee=>{const F=p===ee,q=n.filter($=>$.category===ee&&$.available);return P.jsxs("div",{className:"flex flex-col",children:[P.jsxs("button",{onClick:()=>w(F?null:ee),className:`text-left px-3 py-2 rounded-lg font-medium text-sm flex justify-between items-center transition-colors ${F?"bg-[--primary] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:[ee,P.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${F?"bg-white/20":"bg-gray-200"}`,children:q.length})]}),F&&P.jsx("div",{className:"mt-1 ml-2 flex flex-col gap-1 animate-in fade-in slide-in-from-top-1 duration-150",children:q.length===0?P.jsx("p",{className:"text-xs text-gray-400 italic p-2",children:"Nessun piatto"}):q.map($=>P.jsxs("button",{onClick:()=>N($),className:"text-left p-2 rounded hover:bg-orange-50 hover:text-orange-700 text-sm text-gray-600 border border-transparent hover:border-orange-100 transition-all flex justify-between items-center group",children:[P.jsx("span",{className:"truncate pr-2",children:$.name}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsxs("span",{className:"text-xs font-semibold",children:["",$.price.toFixed(2)]}),P.jsx(fm,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})]},$.id))})]},ee)})})]},z.id)})})})]}),P.jsx("div",{className:"flex-1 overflow-hidden bg-gray-100 relative",children:P.jsx("div",{ref:x,className:"w-full h-full",children:P.jsx(m3,{width:c.width,height:c.height,style:{opacity:E?1:0,transition:"opacity 0.3s ease-in"},children:P.jsxs(p3,{children:[P.jsx(hs,{width:c.width,height:c.height,fill:"#ffffff",listening:!1}),P.jsx(ad,{x:y.x,y:y.y,scaleX:_,scaleY:_,children:t.map(z=>{const Y=l===z.id,te=z.type==="rect"?m(z.id):void 0;return P.jsx(C3,{elemento:z,isSelected:Y,onSelect:()=>R(z.id),onDragEnd:()=>{},onTransformEnd:()=>{},readOnly:!0,fillColor:te},z.id)})})]})})})}),l&&P.jsxs("div",{className:"w-[30%] min-w-[320px] bg-white border-l border-gray-200 flex flex-col shadow-lg z-10 shrink-0",children:[P.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"font-bold text-lg text-gray-800",children:K}),P.jsx("p",{className:"text-sm text-gray-500",children:U?"Occupato":"Libero"})]}),P.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:"Chiudi"})]}),P.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[P.jsxs("h3",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[P.jsx(bT,{className:"w-4 h-4"})," Ordine Corrente"]}),U&&U.items.length>0?P.jsx("ul",{className:"space-y-2",children:U.items.map(z=>P.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-100",children:[P.jsxs("div",{children:[P.jsx("div",{className:"font-medium text-sm",children:z.name}),P.jsxs("div",{className:"text-xs text-gray-500",children:[" ",z.price.toFixed(2)," x ",z.quantity]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsxs("span",{className:"font-bold text-sm",children:[" ",(z.price*z.quantity).toFixed(2)]}),P.jsx("button",{onClick:()=>O(z.menuItemId),className:"text-red-400 hover:text-red-600 p-1",children:P.jsx(pm,{className:"w-4 h-4"})})]})]},z.menuItemId))}):P.jsx("p",{className:"text-gray-400 text-sm italic",children:"Nessun ordine attivo"})]}),P.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsx("span",{className:"font-bold text-gray-700",children:"Totale"}),P.jsxs("span",{className:"font-bold text-xl text-[--primary]",children:[" ",I.toFixed(2)]})]}),U&&P.jsx(Ct,{variante:"pericolo",pienaLarghezza:!0,onClick:A,children:"Libera Tavolo / Chiudi Conto"})]})]})]})]})}function hR(){const[t,e]=W.useState([]),[n,r]=W.useState(null),[i,s]=W.useState(!1),[l,u]=W.useState("Antipasti");W.useEffect(()=>{const v=localStorage.getItem("menu.data");if(v)try{e(JSON.parse(v))}catch(_){console.error("Failed to load menu",_),e(ud)}else e(ud)},[]),W.useEffect(()=>{t.length>0&&localStorage.setItem("menu.data",JSON.stringify(t))},[t]);const c=()=>{r({id:`item-${Date.now()}`,name:"",price:0,category:l,available:!0,description:""}),s(!0)},h=v=>{r({...v}),s(!0)},p=v=>{confirm("Sei sicuro di voler eliminare questo piatto?")&&e(_=>_.filter(b=>b.id!==v))},w=()=>{!n||!n.name||(e(v=>{const _=v.findIndex(b=>b.id===n.id);if(_>=0){const b=[...v];return b[_]=n,b}else return[...v,n]}),s(!1),r(null))},y=t.filter(v=>v.category===l);return P.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[P.jsxs("header",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between shadow-sm z-10",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx(Un,{to:"/",className:"text-gray-500 hover:text-[--secondary] p-1",children:P.jsx(Wl,{className:"w-6 h-6"})}),P.jsxs("h1",{className:"text-xl font-bold text-[--secondary] flex items-center gap-2",children:[P.jsx(ld,{className:"w-6 h-6 text-[--primary]"}),"Gestione Menu"]})]}),P.jsxs(Ct,{onClick:c,className:"flex items-center gap-2",children:[P.jsx(fm,{className:"w-4 h-4"}),P.jsx("span",{className:"hidden sm:inline",children:"Aggiungi Piatto"})]})]}),P.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[P.jsx("div",{className:"w-[20%] min-w-[220px] bg-white border-r border-gray-200 overflow-y-auto hidden md:block",children:P.jsxs("div",{className:"p-4",children:[P.jsx("h2",{className:"font-semibold text-gray-500 mb-4 text-sm uppercase tracking-wider",children:"Categorie"}),P.jsx("nav",{className:"space-y-1",children:Pc.map(v=>P.jsxs("button",{onClick:()=>u(v),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${l===v?"bg-[--primary] text-white font-medium shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[v,P.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${l===v?"bg-white/20":"bg-gray-200"}`,children:t.filter(_=>_.category===v).length})]},v))})]})}),P.jsx("div",{className:"md:hidden p-4 bg-white border-b border-gray-200",children:P.jsx("select",{value:l,onChange:v=>u(v.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",children:Pc.map(v=>P.jsx("option",{value:v,children:v},v))})}),P.jsx("div",{className:"flex-1 overflow-auto p-4 sm:p-8",children:P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:l}),y.length===0?P.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-gray-300",children:[P.jsx("p",{className:"text-gray-500 mb-4",children:"Nessun piatto in questa categoria"}),P.jsx(Ct,{variante:"secondario",onClick:c,children:"Aggiungi il primo piatto"})]}):P.jsx("div",{className:"grid grid-cols-1 gap-4",children:y.map(v=>P.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between group hover:border-[--primary] transition-colors",children:[P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("h3",{className:"font-bold text-lg text-gray-800",children:v.name}),P.jsxs("span",{className:"text-sm font-medium bg-green-100 text-green-800 px-2 py-0.5 rounded",children:[" ",v.price.toFixed(2)]}),!v.available&&P.jsx("span",{className:"text-xs font-medium bg-red-100 text-red-800 px-2 py-0.5 rounded",children:"Non disponibile"})]}),v.description&&P.jsx("p",{className:"text-gray-500 text-sm mt-1",children:v.description})]}),P.jsxs("div",{className:"flex items-center gap-2 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[P.jsx("button",{onClick:()=>h(v),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Modifica",children:P.jsx(xT,{className:"w-5 h-5"})}),P.jsx("button",{onClick:()=>p(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Elimina",children:P.jsx(pm,{className:"w-5 h-5"})})]})]},v.id))})]})})]}),i&&n&&P.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:P.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200",children:[P.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[P.jsx("h3",{className:"font-bold text-lg",children:t.find(v=>v.id===n.id)?"Modifica Piatto":"Nuovo Piatto"}),P.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:P.jsx(TT,{className:"w-6 h-6"})})]}),P.jsxs("div",{className:"p-6 space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Piatto"}),P.jsx("input",{type:"text",value:n.name,onChange:v=>r({...n,name:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[--primary] focus:border-transparent outline-none",placeholder:"Es. Spaghetti Carbonara",autoFocus:!0})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prezzo ()"}),P.jsx("input",{type:"number",step:"0.50",value:n.price,onChange:v=>r({...n,price:parseFloat(v.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[--primary] focus:border-transparent outline-none"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),P.jsx("select",{value:n.category,onChange:v=>r({...n,category:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[--primary] focus:border-transparent outline-none",children:Pc.map(v=>P.jsx("option",{value:v,children:v},v))})]})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrizione (Opzionale)"}),P.jsx("textarea",{value:n.description||"",onChange:v=>r({...n,description:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[--primary] focus:border-transparent outline-none h-24 resize-none",placeholder:"Ingredienti, allergeni, note..."})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("input",{type:"checkbox",id:"available",checked:n.available,onChange:v=>r({...n,available:v.target.checked}),className:"w-4 h-4 text-[--primary] rounded border-gray-300 focus:ring-[--primary]"}),P.jsx("label",{htmlFor:"available",className:"text-sm text-gray-700",children:"Disponibile per gli ordini"})]})]}),P.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[P.jsx(Ct,{variante:"fantasma",onClick:()=>s(!1),children:"Annulla"}),P.jsx(Ct,{onClick:w,children:"Salva Piatto"})]})]})})]})}function fR(...t){return ym(gm(t))}function rl({children:t,className:e,interattiva:n=!1}){return P.jsx("div",{className:fR("bg-white rounded-2xl shadow-lg border border-gray-100 p-6",n&&"hover:shadow-xl transition-shadow cursor-pointer",e),children:t})}function pR(){const{user:t,signOut:e}=hk();return P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50 relative",children:[P.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:t?P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsxs("span",{className:"text-gray-600 hidden sm:inline",children:["Ciao, ",t.email]}),P.jsxs(Ct,{onClick:e,variante:"fantasma",className:"flex items-center gap-2",children:[P.jsx(_T,{className:"w-4 h-4"}),P.jsx("span",{className:"hidden sm:inline",children:"Esci"})]})]}):P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(Un,{to:"/login",children:P.jsx(Ct,{variante:"fantasma",children:"Accedi"})}),P.jsx(Un,{to:"/registrazione",children:P.jsx(Ct,{children:"Registrati"})})]})}),P.jsxs("header",{className:"mb-12 text-center mt-12 sm:mt-0",children:[P.jsxs("h1",{className:"text-5xl font-bold text-[--secondary] mb-4 flex items-center justify-center gap-3",children:[P.jsx(ld,{size:48,className:"text-[--primary]"}),"MenuMenu"]}),P.jsx("p",{className:"text-xl text-gray-600",children:"Gestisci il tuo ristorante in modo semplice e veloce"})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl w-full",children:[P.jsxs(rl,{interattiva:!0,className:"flex flex-col items-center text-center",children:[P.jsx("div",{className:"bg-[--accent] p-4 rounded-full mb-6",children:P.jsx(ST,{size:32,className:"text-[--secondary]"})}),P.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"Disegna Ristorante"}),P.jsx("p",{className:"text-gray-500 mb-6",children:"Crea la piantina del tuo locale, posiziona i tavoli e organizza gli spazi."}),P.jsx(Un,{to:"/disegna",className:"w-full",children:P.jsx(Ct,{pienaLarghezza:!0,children:"Inizia a Disegnare"})})]}),P.jsxs(rl,{interattiva:!0,className:"flex flex-col items-center text-center",children:[P.jsx("div",{className:"bg-[--accent] p-4 rounded-full mb-6",children:P.jsx(yT,{size:32,className:"text-[--secondary]"})}),P.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"Gestione Ordini"}),P.jsx("p",{className:"text-gray-500 mb-6",children:"Visualizza la sala e gestisci gli ordini in tempo reale."}),P.jsx(Un,{to:"/gestione-ordini",className:"w-full",children:P.jsx(Ct,{pienaLarghezza:!0,children:"Apri Sala"})})]}),P.jsxs(rl,{interattiva:!0,className:"flex flex-col items-center text-center",children:[P.jsx("div",{className:"bg-[--accent] p-4 rounded-full mb-6",children:P.jsx(ld,{size:32,className:"text-[--secondary]"})}),P.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"Gestisci Menu"}),P.jsx("p",{className:"text-gray-500 mb-6",children:"Crea e aggiorna il tuo menu digitale in tempo reale."}),P.jsx(Un,{to:"/gestione-menu",className:"w-full",children:P.jsx(Ct,{pienaLarghezza:!0,variante:"secondario",children:"Modifica Menu"})})]})]})]})}function gR(...t){return ym(gm(t))}const Io=W.forwardRef(({className:t,label:e,error:n,...r},i)=>P.jsxs("div",{className:"w-full",children:[e&&P.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),P.jsx("input",{ref:i,className:gR("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[--primary] focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 transition-all",n&&"border-red-500 focus:ring-red-500",t),...r}),n&&P.jsx("p",{className:"mt-1 text-sm text-red-500",children:n})]}));Io.displayName="Input";function mR(){const t=Kg(),[e,n]=W.useState(!1),[r,i]=W.useState(""),[s,l]=W.useState(""),[u,c]=W.useState(null),h=async p=>{p.preventDefault(),n(!0),c(null);try{const{error:w}=await nl.auth.signInWithPassword({email:r,password:s});if(w)throw w;t("/")}catch(w){c(w.message||"Errore durante il login")}finally{n(!1)}};return P.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:P.jsxs("div",{className:"w-full max-w-md",children:[P.jsxs(Un,{to:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[P.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Torna alla Home"]}),P.jsxs(rl,{className:"p-8",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Accedi"}),P.jsx("p",{className:"text-gray-600 mt-2",children:"Inserisci le tue credenziali per accedere"})]}),u&&P.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-6 border border-red-100",children:u}),P.jsxs("form",{onSubmit:h,className:"space-y-6",children:[P.jsx(Io,{label:"Email",type:"email",value:r,onChange:p=>i(p.target.value),placeholder:"nome@esempio.com",required:!0}),P.jsx(Io,{label:"Password",type:"password",value:s,onChange:p=>l(p.target.value),placeholder:"",required:!0}),P.jsx(Ct,{type:"submit",pienaLarghezza:!0,disabled:e,className:"flex items-center justify-center gap-2",children:e?"Accesso in corso...":P.jsxs(P.Fragment,{children:[P.jsx(vT,{className:"w-4 h-4"}),"Accedi"]})})]}),P.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Non hai un account?"," ",P.jsx(Un,{to:"/registrazione",className:"text-[--primary] font-medium hover:underline",children:"Registrati"})]})]})]})})}function yR(){const t=Kg(),[e,n]=W.useState(!1),[r,i]=W.useState(""),[s,l]=W.useState(""),[u,c]=W.useState(""),[h,p]=W.useState(null),[w,y]=W.useState(null),v=async _=>{if(_.preventDefault(),n(!0),p(null),y(null),s!==u){p("Le password non coincidono"),n(!1);return}try{const{data:b,error:E}=await nl.auth.signUp({email:r,password:s});if(E)throw E;b.session?t("/"):b.user&&y("Registrazione avvenuta con successo! Controlla la tua email per confermare l'account.")}catch(b){p(b.message||"Errore durante la registrazione")}finally{n(!1)}};return P.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:P.jsxs("div",{className:"w-full max-w-md",children:[P.jsxs(Un,{to:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[P.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Torna alla Home"]}),P.jsxs(rl,{className:"p-8",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Registrati"}),P.jsx("p",{className:"text-gray-600 mt-2",children:"Crea un nuovo account per gestire il tuo ristorante"})]}),h&&P.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-6 border border-red-100",children:h}),w&&P.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm mb-6 border border-green-100",children:w}),!w&&P.jsxs("form",{onSubmit:v,className:"space-y-6",children:[P.jsx(Io,{label:"Email",type:"email",value:r,onChange:_=>i(_.target.value),placeholder:"nome@esempio.com",required:!0}),P.jsx(Io,{label:"Password",type:"password",value:s,onChange:_=>l(_.target.value),placeholder:"",required:!0,minLength:6}),P.jsx(Io,{label:"Conferma Password",type:"password",value:u,onChange:_=>c(_.target.value),placeholder:"",required:!0,minLength:6}),P.jsx(Ct,{type:"submit",pienaLarghezza:!0,disabled:e,className:"flex items-center justify-center gap-2",children:e?"Registrazione in corso...":P.jsxs(P.Fragment,{children:[P.jsx(PT,{className:"w-4 h-4"}),"Registrati"]})})]}),P.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Hai gi un account?"," ",P.jsx(Un,{to:"/login",className:"text-[--primary] font-medium hover:underline",children:"Accedi"})]})]})]})})}function vR(){return P.jsx(dk,{children:P.jsx(Nx,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:P.jsx("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans",children:P.jsxs(kx,{children:[P.jsx(as,{path:"/",element:P.jsx(pR,{})}),P.jsx(as,{path:"/login",element:P.jsx(mR,{})}),P.jsx(as,{path:"/registrazione",element:P.jsx(yR,{})}),P.jsx(as,{path:"/disegna",element:P.jsx(uR,{})}),P.jsx(as,{path:"/gestione-ordini",element:P.jsx(dR,{})}),P.jsx(as,{path:"/gestione-menu",element:P.jsx(hR,{})})]})})})})}O0.createRoot(document.getElementById("root")).render(P.jsx(Ut.StrictMode,{children:P.jsx(vR,{})}));
